function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}!function(e){"use strict";function t(e){var t=l[e.charCodeAt(0)];return void 0!==t?t:-1}function r(e){function r(e){c[l++]=e}var n,i,s,o,a,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var u=e.length;a="="===e.charAt(u-2)?2:"="===e.charAt(u-1)?1:0,c=new p(3*e.length/4-a),s=a>0?e.length-4:e.length;var l=0;for(n=0,i=0;s>n;n+=4,i+=3)o=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&o)>>16),r((65280&o)>>8),r(255&o);return 2===a?(o=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&o)):1===a&&(o=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(o>>8&255),r(255&o)),c}function n(e){return u[e]}function i(e){return n(e>>18&63)+n(e>>12&63)+n(e>>6&63)+n(63&e)}function s(e,t,r){for(var n,s=[],o=t;r>o;o+=3)n=(e[o]<<16)+(e[o+1]<<8)+e[o+2],s.push(i(n));return s.join("")}function o(e){var t,r,i,o=e.length%3,a="",c=[],u=16383;for(t=0,i=e.length-o;i>t;t+=u)c.push(s(e,t,t+u>i?i:t+u));switch(o){case 1:r=e[e.length-1],a+=n(r>>2),a+=n(r<<4&63),a+="==";break;case 2:r=(e[e.length-2]<<8)+e[e.length-1],a+=n(r>>10),a+=n(r>>4&63),a+=n(r<<2&63),a+="="}return c.push(a),c.join("")}var a,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=[];for(a=0;a<c.length;a++)u[a]=c[a];var l=[];for(a=0;a<c.length;++a)l[c.charCodeAt(a)]=a;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63;var p="undefined"!=typeof Uint8Array?Uint8Array:Array;e.toByteArray=r,e.fromByteArray=o}("undefined"==typeof exports?this.base64js={}:exports);var bigInt=function(e){"use strict";function t(e,t){this.value=e,this.sign=t,this.isSmall=!1}function r(e){this.value=e,this.sign=0>e,this.isSmall=!0}function n(e){return e>-F&&F>e}function i(e){return 1e7>e?[e]:1e14>e?[e%1e7,Math.floor(e/1e7)]:[e%1e7,Math.floor(e/1e7)%1e7,Math.floor(e/1e14)]}function s(e){o(e);var t=e.length;if(4>t&&A(e,K)<0)switch(t){case 0:return 0;case 1:return e[0];case 2:return e[0]+e[1]*H;default:return e[0]+(e[1]+e[2]*H)*H}return e}function o(e){for(var t=e.length;0===e[--t];);e.length=t+1}function a(e){for(var t=new Array(e),r=-1;++r<e;)t[r]=0;return t}function c(e){return e>0?Math.floor(e):Math.ceil(e)}function u(e,t){var r,n,i=e.length,s=t.length,o=new Array(i),a=0,c=H;for(n=0;s>n;n++)r=e[n]+t[n]+a,a=r>=c?1:0,o[n]=r-a*c;for(;i>n;)r=e[n]+a,a=r===c?1:0,o[n++]=r-a*c;return a>0&&o.push(a),o}function l(e,t){return e.length>=t.length?u(e,t):u(t,e)}function p(e,t){var r,n,i=e.length,s=new Array(i),o=H;for(n=0;i>n;n++)r=e[n]-o+t,t=Math.floor(r/o),s[n]=r-t*o,t+=1;for(;t>0;)s[n++]=t%o,t=Math.floor(t/o);return s}function h(e,t){var r,n,i=e.length,s=t.length,a=new Array(i),c=0,u=H;for(r=0;s>r;r++)n=e[r]-c-t[r],0>n?(n+=u,c=1):c=0,a[r]=n;for(r=s;i>r;r++){if(n=e[r]-c,!(0>n)){a[r++]=n;break}n+=u,a[r]=n}for(;i>r;r++)a[r]=e[r];return o(a),a}function g(e,n,i){var o;return A(e,n)>=0?o=h(e,n):(o=h(n,e),i=!i),o=s(o),"number"==typeof o?(i&&(o=-o),new r(o)):new t(o,i)}function f(e,n,i){var o,a,c=e.length,u=new Array(c),l=-n,p=H;for(o=0;c>o;o++)a=e[o]+l,l=Math.floor(a/p),a%=p,u[o]=0>a?a+p:a;return u=s(u),"number"==typeof u?(i&&(u=-u),new r(u)):new t(u,i)}function m(e,t){var r,n,i,s,c,u=e.length,l=t.length,p=u+l,h=a(p),g=H;for(i=0;u>i;++i){s=e[i];for(var f=0;l>f;++f)c=t[f],r=s*c+h[i+f],n=Math.floor(r/g),h[i+f]=r-n*g,h[i+f+1]+=n}return o(h),h}function _(e,t){var r,n,i=e.length,s=new Array(i),o=H,a=0;for(n=0;i>n;n++)r=e[n]*t+a,a=Math.floor(r/o),s[n]=r-a*o;for(;a>0;)s[n++]=a%o,a=Math.floor(a/o);return s}function k(e,t){for(var r=[];t-- >0;)r.push(0);return r.concat(e)}function b(e,t){var r=Math.max(e.length,t.length);if(30>=r)return m(e,t);r=Math.ceil(r/2);var n=e.slice(r),i=e.slice(0,r),s=t.slice(r),a=t.slice(0,r),c=b(i,a),u=b(n,s),p=b(l(i,n),l(a,s)),g=l(l(c,k(h(h(p,c),u),r)),k(u,2*r));return o(g),g}function d(e,t){return-.012*e-.012*t+15e-6*e*t>0}function v(e,r,n){return H>e?new t(_(r,e),n):new t(m(r,i(e)),n)}function y(e){var t,r,n,i,s,c=e.length,u=a(c+c),l=H;for(n=0;c>n;n++){i=e[n];for(var p=0;c>p;p++)s=e[p],t=i*s+u[n+p],r=Math.floor(t/l),u[n+p]=t-r*l,u[n+p+1]+=r}return o(u),u}function E(e,t){var r,n,i,o,c,u,l,p=e.length,h=t.length,g=H,f=a(t.length),m=t[h-1],k=Math.ceil(g/(2*m)),b=_(e,k),d=_(t,k);for(b.length<=p&&b.push(0),d.push(0),m=d[h-1],n=p-h;n>=0;n--){for(r=g-1,b[n+h]!==m&&(r=Math.floor((b[n+h]*g+b[n+h-1])/m)),i=0,o=0,u=d.length,c=0;u>c;c++)i+=r*d[c],l=Math.floor(i/g),o+=b[n+c]-(i-l*g),i=l,0>o?(b[n+c]=o+g,o=-1):(b[n+c]=o,o=0);for(;0!==o;){for(r-=1,i=0,c=0;u>c;c++)i+=b[n+c]-g+d[c],0>i?(b[n+c]=i+g,i=0):(b[n+c]=i,i=1);o+=i}f[n]=r}return b=I(b,k)[0],[s(f),s(b)]}function S(e,t){for(var r,n,i,o,a,c=e.length,u=t.length,l=[],p=[],g=H;c;)if(p.unshift(e[--c]),A(p,t)<0)l.push(0);else{n=p.length,i=p[n-1]*g+p[n-2],o=t[u-1]*g+t[u-2],n>u&&(i=(i+1)*g),r=Math.ceil(i/o);do{if(a=_(t,r),A(a,p)<=0)break;r--}while(r);l.push(r),p=h(p,a)}return l.reverse(),[s(l),s(p)]}function I(e,t){var r,n,i,s,o=e.length,u=a(o),l=H;for(i=0,r=o-1;r>=0;--r)s=i*l+e[r],n=c(s/t),i=s-n*t,u[r]=0|n;return[u,0|i]}function N(e,n){var o,a,u=B(n),l=e.value,p=u.value;if(0===p)throw new Error("Cannot divide by zero");if(e.isSmall)return u.isSmall?[new r(c(l/p)),new r(l%p)]:[z[0],e];if(u.isSmall){if(1===p)return[e,z[0]];if(-1==p)return[e.negate(),z[0]];var h=Math.abs(p);if(H>h){o=I(l,h),a=s(o[0]);var g=o[1];return e.sign&&(g=-g),"number"==typeof a?(e.sign!==u.sign&&(a=-a),[new r(a),new r(g)]):[new t(a,e.sign!==u.sign),new r(g)]}p=i(h)}var f=A(l,p);if(-1===f)return[z[0],e];if(0===f)return[z[e.sign===u.sign?1:-1],z[0]];o=l.length+p.length<=200?E(l,p):S(l,p),a=o[0];var m=e.sign!==u.sign,_=o[1],k=e.sign;return"number"==typeof a?(m&&(a=-a),a=new r(a)):a=new t(a,m),"number"==typeof _?(k&&(_=-_),_=new r(_)):_=new t(_,k),[a,_]}function A(e,t){if(e.length!==t.length)return e.length>t.length?1:-1;for(var r=e.length-1;r>=0;r--)if(e[r]!==t[r])return e[r]>t[r]?1:-1;return 0}function w(e){var t=e.abs();return t.isUnit()?!1:t.equals(2)||t.equals(3)||t.equals(5)?!0:t.isEven()||t.isDivisibleBy(3)||t.isDivisibleBy(5)?!1:t.lesser(25)?!0:void 0}function j(e){return("number"==typeof e||"string"==typeof e)&&+Math.abs(e)<=H||e instanceof t&&e.value.length<=1}function C(e,t,r){t=B(t);for(var n=e.isNegative(),i=t.isNegative(),s=n?e.not():e,o=i?t.not():t,a=[],c=[],u=!1,l=!1;!u||!l;)s.isZero()?(u=!0,a.push(n?1:0)):n?a.push(s.isEven()?1:0):a.push(s.isEven()?0:1),o.isZero()?(l=!0,c.push(i?1:0)):i?c.push(o.isEven()?1:0):c.push(o.isEven()?0:1),s=s.over(2),o=o.over(2);for(var p=[],h=0;h<a.length;h++)p.push(r(a[h],c[h]));for(var g=bigInt(p.pop()).negate().times(bigInt(2).pow(p.length));p.length;)g=g.add(bigInt(p.pop()).times(bigInt(2).pow(p.length)));return g}function T(e){var t=e.value,r="number"==typeof t?t|Q:t[0]+t[1]*H|W;return r&-r}function R(e,t){return e=B(e),t=B(t),e.greater(t)?e:t}function O(e,t){return e=B(e),t=B(t),e.lesser(t)?e:t}function x(e,t){if(e=B(e).abs(),t=B(t).abs(),e.equals(t))return e;if(e.isZero())return t;if(t.isZero())return e;for(var r,n,i=z[1];e.isEven()&&t.isEven();)r=Math.min(T(e),T(t)),e=e.divide(r),t=t.divide(r),i=i.multiply(r);for(;e.isEven();)e=e.divide(T(e));do{for(;t.isEven();)t=t.divide(T(t));e.greater(t)&&(n=t,t=e,e=n),t=t.subtract(e)}while(!t.isZero());return i.isUnit()?e:e.multiply(i)}function P(e,t){return e=B(e).abs(),t=B(t).abs(),e.divide(x(e,t)).multiply(t)}function M(e,n){e=B(e),n=B(n);var i=O(e,n),o=R(e,n),a=o.subtract(i);if(a.isSmall)return i.add(Math.round(Math.random()*a));for(var u=a.value.length-1,l=[],p=!0,h=u;h>=0;h--){var g=p?a.value[h]:H,f=c(Math.random()*g);l.unshift(f),g>f&&(p=!1)}return l=s(l),i.add("number"==typeof l?new r(l):new t(l,!1))}function D(e){var t=e.value;return"number"==typeof t&&(t=[t]),1===t.length&&t[0]<=35?"0123456789abcdefghijklmnopqrstuvwxyz".charAt(t[0]):"<"+t+">"}function U(e,t){if(t=bigInt(t),t.isZero()){if(e.isZero())return"0";throw new Error("Cannot convert nonzero numbers to base 0.")}if(t.equals(-1))return e.isZero()?"0":e.isNegative()?new Array(1-e).join("10"):"1"+new Array(+e).join("01");var r="";if(e.isNegative()&&t.isPositive()&&(r="-",e=e.abs()),t.equals(1))return e.isZero()?"0":r+new Array(+e+1).join(1);for(var n,i=[],s=e;s.isNegative()||s.compareAbs(t)>=0;){n=s.divmod(t),s=n.quotient;var o=n.remainder;o.isNegative()&&(o=t.minus(o).abs(),s=s.next()),i.push(D(o))}return i.push(D(s)),r+i.reverse().join("")}function L(e){if(n(+e)){var i=+e;if(i===c(i))return new r(i);throw"Invalid integer: "+e}var s="-"===e[0];s&&(e=e.slice(1));var a=e.split(/e/i);if(a.length>2)throw new Error("Invalid integer: "+l.join("e"));if(2===a.length){var u=a[1];if("+"===u[0]&&(u=u.slice(1)),u=+u,u!==c(u)||!n(u))throw new Error("Invalid integer: "+u+" is not a valid exponent.");var l=a[0],p=l.indexOf(".");if(p>=0&&(u-=l.length-p-1,l=l.slice(0,p)+l.slice(p+1)),0>u)throw new Error("Cannot include negative exponent part for integers");l+=new Array(u+1).join("0"),e=l}var h=/^([0-9][0-9]*)$/.test(e);if(!h)throw new Error("Invalid integer: "+e);for(var g=[],f=e.length,m=V,_=f-m;f>0;)g.push(+e.slice(_,f)),_-=m,0>_&&(_=0),f-=m;return o(g),new t(g,s)}function G(e){return n(e)?new r(e):L(e.toString())}function B(e){return"number"==typeof e?G(e):"string"==typeof e?L(e):e}var H=1e7,V=7,F=9007199254740992,K=i(F),J=Math.log(F);t.prototype.add=function(e){var r=B(e);if(this.sign!==r.sign)return this.subtract(r.negate());var n=this.value,i=r.value;return r.isSmall?new t(p(n,Math.abs(i)),this.sign):new t(l(n,i),this.sign)},t.prototype.plus=t.prototype.add,r.prototype.add=function(e){var s=B(e),o=this.value;if(0>o!==s.sign)return this.subtract(s.negate());var a=s.value;if(s.isSmall){if(n(o+a))return new r(o+a);a=i(Math.abs(a))}return new t(p(a,Math.abs(o)),0>o)},r.prototype.plus=r.prototype.add,t.prototype.subtract=function(e){var t=B(e);if(this.sign!==t.sign)return this.add(t.negate());var r=this.value,n=t.value;return t.isSmall?f(r,Math.abs(n),this.sign):g(r,n,this.sign)},t.prototype.minus=t.prototype.subtract,r.prototype.subtract=function(e){var t=B(e),n=this.value;if(0>n!==t.sign)return this.add(t.negate());var i=t.value;return t.isSmall?new r(n-i):f(i,Math.abs(n),n>=0)},r.prototype.minus=r.prototype.subtract,t.prototype.negate=function(){return new t(this.value,!this.sign)},r.prototype.negate=function(){var e=this.sign,t=new r(-this.value);return t.sign=!e,t},t.prototype.abs=function(){return new t(this.value,!1)},r.prototype.abs=function(){return new r(Math.abs(this.value))},t.prototype.multiply=function(e){var r,n=B(e),s=this.value,o=n.value,a=this.sign!==n.sign;if(n.isSmall){if(0===o)return z[0];if(1===o)return this;if(-1===o)return this.negate();if(r=Math.abs(o),H>r)return new t(_(s,r),a);o=i(r)}return d(s.length,o.length)?new t(b(s,o),a):new t(m(s,o),a)},t.prototype.times=t.prototype.multiply,r.prototype._multiplyBySmall=function(e){return n(e.value*this.value)?new r(e.value*this.value):v(Math.abs(e.value),i(Math.abs(this.value)),this.sign!==e.sign)},t.prototype._multiplyBySmall=function(e){return 0===e.value?z[0]:1===e.value?this:-1===e.value?this.negate():v(Math.abs(e.value),this.value,this.sign!==e.sign)},r.prototype.multiply=function(e){return B(e)._multiplyBySmall(this)},r.prototype.times=r.prototype.multiply,t.prototype.square=function(){return new t(y(this.value),!1)},r.prototype.square=function(){var e=this.value*this.value;return n(e)?new r(e):new t(y(i(Math.abs(this.value))),!1)},t.prototype.divmod=function(e){var t=N(this,e);return{quotient:t[0],remainder:t[1]}},r.prototype.divmod=t.prototype.divmod,t.prototype.divide=function(e){return N(this,e)[0]},r.prototype.over=r.prototype.divide=t.prototype.over=t.prototype.divide,t.prototype.mod=function(e){return N(this,e)[1]},r.prototype.remainder=r.prototype.mod=t.prototype.remainder=t.prototype.mod,t.prototype.pow=function(e){var t,i,s,o=B(e),a=this.value,u=o.value;if(0===u)return z[1];if(0===a)return z[0];if(1===a)return z[1];if(-1===a)return o.isEven()?z[1]:z[-1];if(o.sign)return z[0];if(!o.isSmall)throw new Error("The exponent "+o.toString()+" is too large.");if(this.isSmall&&n(t=Math.pow(a,u)))return new r(c(t));for(i=this,s=z[1];u&!0&&(s=s.times(i),--u),0!==u;)u/=2,i=i.square();return s},r.prototype.pow=t.prototype.pow,t.prototype.modPow=function(e,t){if(e=B(e),t=B(t),t.isZero())throw new Error("Cannot take modPow with modulus 0");for(var r=z[1],n=this.mod(t);e.isPositive();){if(n.isZero())return z[0];e.isOdd()&&(r=r.multiply(n).mod(t)),e=e.divide(2),n=n.square().mod(t)}return r},r.prototype.modPow=t.prototype.modPow,t.prototype.compareAbs=function(e){var t=B(e),r=this.value,n=t.value;return t.isSmall?1:A(r,n)},r.prototype.compareAbs=function(e){var t=B(e),r=Math.abs(this.value),n=t.value;return t.isSmall?(n=Math.abs(n),r===n?0:r>n?1:-1):-1},t.prototype.compare=function(e){if(e===1/0)return-1;if(e===-(1/0))return 1;var t=B(e),r=this.value,n=t.value;return this.sign!==t.sign?t.sign?1:-1:t.isSmall?this.sign?-1:1:A(r,n)*(this.sign?-1:1)},t.prototype.compareTo=t.prototype.compare,r.prototype.compare=function(e){if(e===1/0)return-1;if(e===-(1/0))return 1;var t=B(e),r=this.value,n=t.value;return t.isSmall?r==n?0:r>n?1:-1:0>r!==t.sign?0>r?-1:1:0>r?1:-1},r.prototype.compareTo=r.prototype.compare,t.prototype.equals=function(e){return 0===this.compare(e)},r.prototype.eq=r.prototype.equals=t.prototype.eq=t.prototype.equals,t.prototype.notEquals=function(e){return 0!==this.compare(e)},r.prototype.neq=r.prototype.notEquals=t.prototype.neq=t.prototype.notEquals,t.prototype.greater=function(e){return this.compare(e)>0},r.prototype.gt=r.prototype.greater=t.prototype.gt=t.prototype.greater,t.prototype.lesser=function(e){return this.compare(e)<0},r.prototype.lt=r.prototype.lesser=t.prototype.lt=t.prototype.lesser,t.prototype.greaterOrEquals=function(e){return this.compare(e)>=0},r.prototype.geq=r.prototype.greaterOrEquals=t.prototype.geq=t.prototype.greaterOrEquals,t.prototype.lesserOrEquals=function(e){return this.compare(e)<=0},r.prototype.leq=r.prototype.lesserOrEquals=t.prototype.leq=t.prototype.lesserOrEquals,t.prototype.isEven=function(){return 0===(1&this.value[0])},r.prototype.isEven=function(){return 0===(1&this.value)},t.prototype.isOdd=function(){return 1===(1&this.value[0])},r.prototype.isOdd=function(){return 1===(1&this.value)},t.prototype.isPositive=function(){return!this.sign},r.prototype.isPositive=function(){return this.value>0},t.prototype.isNegative=function(){return this.sign},r.prototype.isNegative=function(){return this.value<0},t.prototype.isUnit=function(){return!1},r.prototype.isUnit=function(){return 1===Math.abs(this.value)},t.prototype.isZero=function(){return!1},r.prototype.isZero=function(){return 0===this.value},t.prototype.isDivisibleBy=function(e){var t=B(e),r=t.value;return 0===r?!1:1===r?!0:2===r?this.isEven():this.mod(t).equals(z[0])},r.prototype.isDivisibleBy=t.prototype.isDivisibleBy,t.prototype.isPrime=function(){var t=w(this);if(t!==e)return t;for(var r,n,i,s,o=this.abs(),a=o.prev(),c=[2,3,5,7,11,13,17,19],u=a;u.isEven();)u=u.divide(2);for(i=0;i<c.length;i++)if(s=bigInt(c[i]).modPow(u,o),!s.equals(z[1])&&!s.equals(a)){for(n=!0,r=u;n&&r.lesser(a);r=r.multiply(2))s=s.square().mod(o),s.equals(a)&&(n=!1);if(n)return!1}return!0},r.prototype.isPrime=t.prototype.isPrime,t.prototype.isProbablePrime=function(t){var r=w(this);if(r!==e)return r;for(var n=this.abs(),i=t===e?5:t,s=0;i>s;s++){var o=bigInt.randBetween(2,n.minus(2));if(!o.modPow(n.prev(),n).isUnit())return!1}return!0},r.prototype.isProbablePrime=t.prototype.isProbablePrime,t.prototype.next=function(){var e=this.value;return this.sign?f(e,1,this.sign):new t(p(e,1),this.sign)},r.prototype.next=function(){var e=this.value;return F>e+1?new r(e+1):new t(K,!1)},t.prototype.prev=function(){var e=this.value;return this.sign?new t(p(e,1),!0):f(e,1,this.sign)},r.prototype.prev=function(){var e=this.value;return e-1>-F?new r(e-1):new t(K,!0)};for(var Y=[1];Y[Y.length-1]<=H;)Y.push(2*Y[Y.length-1]);var X=Y.length,q=Y[X-1];t.prototype.shiftLeft=function(e){if(!j(e))throw new Error(String(e)+" is too large for shifting.");if(e=+e,0>e)return this.shiftRight(-e);for(var t=this;e>=X;)t=t.multiply(q),e-=X-1;return t.multiply(Y[e])},r.prototype.shiftLeft=t.prototype.shiftLeft,t.prototype.shiftRight=function(e){var t;if(!j(e))throw new Error(String(e)+" is too large for shifting.");if(e=+e,0>e)return this.shiftLeft(-e);for(var r=this;e>=X;){if(r.isZero())return r;t=N(r,q),r=t[1].isNegative()?t[0].prev():t[0],e-=X-1}return t=N(r,Y[e]),t[1].isNegative()?t[0].prev():t[0]},r.prototype.shiftRight=t.prototype.shiftRight,t.prototype.not=function(){return this.negate().prev()},r.prototype.not=t.prototype.not,t.prototype.and=function(e){return C(this,e,function(e,t){return e&t})},r.prototype.and=t.prototype.and,t.prototype.or=function(e){return C(this,e,function(e,t){return e|t})},r.prototype.or=t.prototype.or,t.prototype.xor=function(e){return C(this,e,function(e,t){return e^t})},r.prototype.xor=t.prototype.xor;var Q=1<<30,W=(H&-H)*(H&-H)|Q,Z=function(e,t){var n=z[0],i=z[1],s=e.length;if(t>=2&&36>=t&&s<=J/Math.log(t))return new r(parseInt(e,t));t=B(t);var o,a=[],c="-"===e[0];for(o=c?1:0;o<e.length;o++){var u=e[o].toLowerCase(),l=u.charCodeAt(0);if(l>=48&&57>=l)a.push(B(u));else if(l>=97&&122>=l)a.push(B(u.charCodeAt(0)-87));else{if("<"!==u)throw new Error(u+" is not a valid character");var p=o;do o++;while(">"!==e[o]);a.push(B(e.slice(p+1,o)))}}for(a.reverse(),o=0;o<a.length;o++)n=n.add(a[o].times(i)),i=i.times(t);return c?n.negate():n};t.prototype.toString=function(t){if(t===e&&(t=10),10!==t)return U(this,t);for(var r,n=this.value,i=n.length,s=String(n[--i]),o="0000000";--i>=0;)r=String(n[i]),s+=o.slice(r.length)+r;var a=this.sign?"-":"";return a+s},r.prototype.toString=function(t){return t===e&&(t=10),10!=t?U(this,t):String(this.value)},t.prototype.valueOf=function(){return+this.toString()},t.prototype.toJSNumber=t.prototype.valueOf,r.prototype.valueOf=function(){return this.value},r.prototype.toJSNumber=r.prototype.valueOf;for(var z=function(e,t){return"undefined"==typeof e?z[0]:"undefined"!=typeof t?10===+t?B(e):Z(e,t):B(e)},$=0;1e3>$;$++)z[$]=new r($),$>0&&(z[-$]=new r(-$));return z.one=z[1],z.zero=z[0],z.minusOne=z[-1],z.max=R,z.min=O,z.gcd=x,z.lcm=P,z.isInstance=function(e){return e instanceof t||e instanceof r},z.randBetween=M,z}();"undefined"!=typeof module&&module.hasOwnProperty("exports")&&(module.exports=bigInt),function(){function set_constantValues(){cadesplugin.CAPICOM_LOCAL_MACHINE_STORE=1,cadesplugin.CAPICOM_CURRENT_USER_STORE=2,cadesplugin.CAPICOM_MY_STORE="My",cadesplugin.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPED=0,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_ENVELOPING=1,cadesplugin.CADESCOM_XML_SIGNATURE_TYPE_TEMPLATE=2,cadesplugin.XmlDsigGost3410UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411UrlObsolete="http://www.w3.org/2001/04/xmldsig-more#gostr3411",cadesplugin.XmlDsigGost3410Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411",cadesplugin.XmlDsigGost3411Url="urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411",cadesplugin.CADESCOM_CADES_DEFAULT=0,cadesplugin.CADESCOM_CADES_BES=1,cadesplugin.CADESCOM_CADES_T=5,cadesplugin.CADESCOM_CADES_X_LONG_TYPE_1=93,cadesplugin.CADESCOM_ENCODE_BASE64=0,cadesplugin.CADESCOM_ENCODE_BINARY=1,cadesplugin.CADESCOM_ENCODE_ANY=-1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_CHAIN_EXCEPT_ROOT=0,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_WHOLE_CHAIN=1,cadesplugin.CAPICOM_CERTIFICATE_INCLUDE_END_ENTITY_ONLY=2,cadesplugin.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0,cadesplugin.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0,cadesplugin.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1,cadesplugin.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2,cadesplugin.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3,cadesplugin.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENSION=5,cadesplugin.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6,cadesplugin.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7,cadesplugin.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10,cadesplugin.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11,cadesplugin.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12,cadesplugin.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128,cadesplugin.CAPICOM_PROPID_ENHKEY_USAGE=9,cadesplugin.CAPICOM_OID_OTHER=0,cadesplugin.CAPICOM_OID_KEY_USAGE_EXTENSION=10,cadesplugin.CAPICOM_EKU_CLIENT_AUTH=2,cadesplugin.CAPICOM_EKU_SMARTCARD_LOGON=5,cadesplugin.CAPICOM_EKU_OTHER=0,cadesplugin.CAPICOM_AUTHENTICATED_ATTRIBUTE_SIGNING_TIME=0,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_NAME=1,cadesplugin.CADESCOM_AUTHENTICATED_ATTRIBUTE_DOCUMENT_DESCRIPTION=2,cadesplugin.CADESCOM_ATTRIBUTE_OTHER=-1,cadesplugin.CADESCOM_STRING_TO_UCS2LE=0,cadesplugin.CADESCOM_BASE64_TO_BINARY=1,cadesplugin.CADESCOM_DISPLAY_DATA_NONE=0,cadesplugin.CADESCOM_DISPLAY_DATA_CONTENT=1,cadesplugin.CADESCOM_DISPLAY_DATA_ATTRIBUTE=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC2=0,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_RC4=1,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_DES=2,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_3DES=3,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_AES=4,cadesplugin.CADESCOM_ENCRYPTION_ALGORITHM_GOST_28147_89=25,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA1=0,cadesplugin.CADESCOM_HASH_ALGORITHM_MD2=1,cadesplugin.CADESCOM_HASH_ALGORITHM_MD4=2,cadesplugin.CADESCOM_HASH_ALGORITHM_MD5=3,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_256=4,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_384=5,cadesplugin.CADESCOM_HASH_ALGORITHM_SHA_512=6,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411=100,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_256=101,cadesplugin.CADESCOM_HASH_ALGORITHM_CP_GOST_3411_2012_512=102}function async_spawn(e){function t(e,t){var s;try{s=r[e](t)}catch(o){return Promise.reject(o)}return s.done?s.value:Promise.resolve(s.value).then(n,i)}var r=e(Array.prototype.slice.call(arguments,1)),n=t.bind(t,"next"),i=t.bind(t,"throw");return n()}function isIE(){var e="Microsoft Internet Explorer"==navigator.appName||navigator.userAgent.match(/Trident\/./i);return e}function isIOS(){var e=navigator.userAgent.match(/ipod/i)||navigator.userAgent.match(/ipad/i)||navigator.userAgent.match(/iphone/i);return e}function isChromiumBased(){var e=navigator.userAgent.match(/chrome/i);return navigator.userAgent.match(/chromeframe/i),isOpera=navigator.userAgent.match(/opr/i),null==e?!1:e.length>0||null!=isOpera}function CreateObject(e){if(isIOS())return call_ru_cryptopro_npcades_10_native_bridge("CreateObject",[e]);if(isIE()){if(e.match(/X509Enrollment/i))try{var t=document.getElementById("certEnrollClassFactory");return t.CreateObject(e)}catch(r){throw"Для создания обьектов X509Enrollment следует настроить веб-узел на использование проверки подлинности по протоколу HTTPS"}return new ActiveXObject(e)}return pluginObject.CreateObject(e)}function CreateObjectAsync(e){return pluginObject.CreateObjectAsync(e)}function call_ru_cryptopro_npcades_10_native_bridge(functionName,array){var tmpobj,ex;if(ru_cryptopro_npcades_10_native_bridge.call(functionName,array,function(e,response){ex=e;var str="tmpobj="+response;eval(str),"string"==typeof tmpobj&&(tmpobj=tmpobj.replace(/\\\n/gm,"\n"),tmpobj=tmpobj.replace(/\\\r/gm,"\r"))}),ex)throw ex;return tmpobj}function install_opera_extension(){window.cadesplugin_skip_extension_install?plugin_loaded_error("Плагин недоступен"):document.addEventListener("DOMContentLoaded",function(){var e=document.createElement("div");e.id="cadesplugin_ovr",e.style="visibility: hidden; position: fixed; left: 0px; top: 0px; width:100%; height:100%; background-color: rgba(0,0,0,0.7)",e.innerHTML="<div id='cadesplugin_ovr_item' style='position:relative; width:400px; margin:100px auto; background-color:#fff; border:2px solid #000; padding:10px; text-align:center; opacity: 1; z-index: 1500'><button id='cadesplugin_close_install' style='float: right; font-size: 10px; background: transparent; border: 1; margin: -5px'>X</button><p>Для работы КриптоПро ЭЦП Browser plugin на данном сайте необходимо установить расширение из каталога дополнений Opera.<p><button id='cadesplugin_install' style='font:12px Arial'>Установить расширение</button></p></div>",document.getElementsByTagName("Body")[0].appendChild(e);var t=document.getElementById("cadesplugin_install");t.addEventListener("click",function(e){opr.addons.installExtension("epebfcehmdedogndhlcacafjaacknbcm",function(){document.getElementById("cadesplugin_ovr").style.visibility="hidden",location.reload()},function(){})}),document.getElementById("cadesplugin_close_install").addEventListener("click",function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),e.addEventListener("click",function(){plugin_loaded_error("Плагин недоступен"),document.getElementById("cadesplugin_ovr").style.visibility="hidden"}),e.style.visibility="visible",document.getElementById("cadesplugin_ovr_item").addEventListener("click",function(e){e.stopPropagation()})})}function load_chrome_extension(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://iifchhfnnmpdbibifmljnfjhpififfog/nmcades_plugin_api.js"),e.onerror=plugin_loaded_error,document.getElementsByTagName("head")[0].appendChild(e)}function load_opera_extension(){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src","chrome-extension://epebfcehmdedogndhlcacafjaacknbcm/nmcades_plugin_api.js"),e.onerror=install_opera_extension,document.getElementsByTagName("head")[0].appendChild(e)}function load_npapi_plugin(){var e=document.createElement("object");if(e.setAttribute("id","cadesplugin_object"),e.setAttribute("type","application/x-cades"),e.setAttribute("style","visibility=hidden"),document.getElementsByTagName("body")[0].appendChild(e),pluginObject=document.getElementById("cadesplugin_object"),isIE()){var t=document.createElement("object");t.setAttribute("id","certEnrollClassFactory"),t.setAttribute("classid","clsid:884e2049-217d-11da-b2a4-000e7bbb2b09"),t.setAttribute("style","visibility=hidden"),document.getElementsByTagName("body")[0].appendChild(t)}}function plugin_loaded(){plugin_resolved=1,canPromise?plugin_resolve():window.postMessage("cadesplugin_loaded","*")}function plugin_loaded_error(e){"undefined"!=typeof e&&"object"!=typeof e||(e="Плагин недоступен"),plugin_resolved=1,canPromise?plugin_reject(e):window.postMessage("cadesplugin_load_error","*")}function check_load_timeout(){1!=plugin_resolved&&(plugin_resolved=1,canPromise?plugin_reject("Истекло время ожидания загрузки плагина"):window.postMessage("cadesplugin_load_error","*"))}function createPromise(e){return new Promise(e)}function check_npapi_plugin(){try{CreateObject("CAdESCOM.About"),plugin_loaded()}catch(e){document.getElementById("cadesplugin_object").style.display="none";var t=navigator.mimeTypes["application/x-cades"];if(t){var r=t.enabledPlugin;plugin_loaded_error(r?"Плагин загружен, но не создаются обьекты":"Ошибка при загрузке плагина")}else plugin_loaded_error("Плагин недоступен")}}function check_plugin_working(){isChromiumBased()?(null!=isOpera?load_opera_extension():load_chrome_extension(),window.postMessage("cadesplugin_echo_request","*"),window.addEventListener("message",function(e){"cadesplugin_loaded"==e.data&&cpcsp_chrome_nmcades.check_chrome_plugin(plugin_loaded,plugin_loaded_error)},!1)):canPromise?window.addEventListener("load",function(e){load_npapi_plugin(),check_npapi_plugin()},!1):window.addEventListener("message",function(e){"cadesplugin_echo_request"==e.data&&(load_npapi_plugin(),check_npapi_plugin())},!1)}function set_pluginObject(e){pluginObject=e}var pluginObject,plugin_resolved=0,plugin_reject,plugin_resolve,isOpera=0,canPromise=!!window.Promise,cadesplugin;cadesplugin=canPromise?new Promise(function(e,t){plugin_resolve=e,plugin_reject=t}):{};var ru_cryptopro_npcades_10_native_bridge={callbacksCount:1,callbacks:{},resultForCallback:function(e,t){var r=ru_cryptopro_npcades_10_native_bridge.callbacks[e];r&&r.apply(null,t)},call:function(e,t,r){var n=r&&"function"==typeof r,i=n?ru_cryptopro_npcades_10_native_bridge.callbacksCount++:0;n&&(ru_cryptopro_npcades_10_native_bridge.callbacks[i]=r);var s=document.createElement("IFRAME"),o=new Array("_CPNP_handle");try{s.setAttribute("src","cpnp-js-call:"+e+":"+i+":"+encodeURIComponent(JSON.stringify(t,o)))}catch(a){alert(a)}document.documentElement.appendChild(s),s.parentNode.removeChild(s),s=null}};cadesplugin.JSModuleVersion="2.0.1",cadesplugin.async_spawn=async_spawn,cadesplugin.set=set_pluginObject,isChromiumBased()&&(cadesplugin.CreateObjectAsync=CreateObjectAsync),isChromiumBased()||(cadesplugin.CreateObject=CreateObject),window.cadesplugin_load_timeout?setTimeout(check_load_timeout,window.cadesplugin_load_timeout):setTimeout(check_load_timeout,2e4),set_constantValues(),window.cadesplugin=cadesplugin,check_plugin_working()}(),window.Promise||function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function r(e){return"object"==typeof e&&null!==e}function n(e){H=e}function i(e){J=e}function s(){return function(){process.nextTick(l)}}function o(){return function(){B(l)}}function a(){var e=0,t=new q(l),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function c(){var e=new MessageChannel;return e.port1.onmessage=l,function(){e.port2.postMessage(0)}}function u(){return function(){setTimeout(l,1)}}function l(){for(var e=0;K>e;e+=2){var t=Z[e],r=Z[e+1];t(r),Z[e]=void 0,Z[e+1]=void 0}K=0}function p(){try{var e=require,t=e("vertx");return B=t.runOnLoop||t.runOnContext,o()}catch(r){return u()}}function h(){}function g(){return new TypeError("You cannot resolve a promise with itself")}function f(){return new TypeError("A promises callback cannot return that same promise.")}function m(e){try{return e.then}catch(t){return te.error=t,te}}function _(e,t,r,n){try{e.call(t,r,n)}catch(i){return i}}function k(e,t,r){J(function(e){var n=!1,i=_(r,t,function(r){n||(n=!0,t!==r?v(e,r):E(e,r))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,S(e,i))},e)}function b(e,t){t._state===$?E(e,t._result):t._state===ee?S(e,t._result):I(t,void 0,function(t){v(e,t)},function(t){S(e,t)})}function d(e,r){if(r.constructor===e.constructor)b(e,r);else{var n=m(r);n===te?S(e,te.error):void 0===n?E(e,r):t(n)?k(e,r,n):E(e,r)}}function v(t,r){t===r?S(t,g()):e(r)?d(t,r):E(t,r)}function y(e){e._onerror&&e._onerror(e._result),N(e)}function E(e,t){e._state===z&&(e._result=t,e._state=$,0!==e._subscribers.length&&J(N,e))}function S(e,t){e._state===z&&(e._state=ee,e._result=t,J(y,e))}function I(e,t,r,n){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+$]=r,i[s+ee]=n,0===s&&e._state&&J(N,e)}function N(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n,i,s=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?j(r,n,i,s):i(s);e._subscribers.length=0}}function A(){this.error=null}function w(e,t){try{return e(t)}catch(r){return re.error=r,re}}function j(e,r,n,i){var s,o,a,c,u=t(n);if(u){if(s=w(n,i),s===re?(c=!0,
o=s.error,s=null):a=!0,r===s)return void S(r,f())}else s=i,a=!0;r._state!==z||(u&&a?v(r,s):c?S(r,o):e===$?E(r,s):e===ee&&S(r,s))}function C(e,t){try{t(function(t){v(e,t)},function(t){S(e,t)})}catch(r){S(e,r)}}function T(e,t){var r=this;r._instanceConstructor=e,r.promise=new e(h),r._validateInput(t)?(r._input=t,r.length=t.length,r._remaining=t.length,r._init(),0===r.length?E(r.promise,r._result):(r.length=r.length||0,r._enumerate(),0===r._remaining&&E(r.promise,r._result))):S(r.promise,r._validationError())}function R(e){return new ne(this,e).promise}function O(e){function t(e){v(i,e)}function r(e){S(i,e)}var n=this,i=new n(h);if(!F(e))return S(i,new TypeError("You must pass an array to race.")),i;for(var s=e.length,o=0;i._state===z&&s>o;o++)I(n.resolve(e[o]),void 0,t,r);return i}function x(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(h);return v(r,e),r}function P(e){var t=this,r=new t(h);return S(r,e),r}function M(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function D(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function U(e){this._id=ce++,this._state=void 0,this._result=void 0,this._subscribers=[],h!==e&&(t(e)||M(),this instanceof U||D(),C(this,e))}function L(){var e;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var r=e.Promise;r&&"[object Promise]"===Object.prototype.toString.call(r.resolve())&&!r.cast||(e.Promise=ue)}var G;G=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var B,H,V,F=G,K=0,J=({}.toString,function(e,t){Z[K]=e,Z[K+1]=t,K+=2,2===K&&(H?H(l):V())}),Y="undefined"!=typeof window?window:void 0,X=Y||{},q=X.MutationObserver||X.WebKitMutationObserver,Q="undefined"!=typeof process&&"[object process]"==={}.toString.call(process),W="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Z=new Array(1e3);V=Q?s():q?a():W?c():void 0===Y&&"function"==typeof require?p():u();var z=void 0,$=1,ee=2,te=new A,re=new A;T.prototype._validateInput=function(e){return F(e)},T.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},T.prototype._init=function(){this._result=new Array(this.length)};var ne=T;T.prototype._enumerate=function(){for(var e=this,t=e.length,r=e.promise,n=e._input,i=0;r._state===z&&t>i;i++)e._eachEntry(n[i],i)},T.prototype._eachEntry=function(e,t){var n=this,i=n._instanceConstructor;r(e)?e.constructor===i&&e._state!==z?(e._onerror=null,n._settledAt(e._state,t,e._result)):n._willSettleAt(i.resolve(e),t):(n._remaining--,n._result[t]=e)},T.prototype._settledAt=function(e,t,r){var n=this,i=n.promise;i._state===z&&(n._remaining--,e===ee?S(i,r):n._result[t]=r),0===n._remaining&&E(i,n._result)},T.prototype._willSettleAt=function(e,t){var r=this;I(e,void 0,function(e){r._settledAt($,t,e)},function(e){r._settledAt(ee,t,e)})};var ie=R,se=O,oe=x,ae=P,ce=0,ue=U;U.all=ie,U.race=se,U.resolve=oe,U.reject=ae,U._setScheduler=n,U._setAsap=i,U._asap=J,U.prototype={constructor:U,then:function(e,t){var r=this,n=r._state;if(n===$&&!e||n===ee&&!t)return this;var i=new this.constructor(h),s=r._result;if(n){var o=arguments[n-1];J(function(){j(n,i,o,s)})}else I(r,i,e,t);return i},"catch":function(e){return this.then(null,e)}};var le=L,pe={Promise:ue,polyfill:le};"function"==typeof define&&define.amd?define(function(){return pe}):"undefined"!=typeof module&&module.exports?module.exports=pe:"undefined"!=typeof this&&(this.ES6Promise=pe),le()}.call(this),!function(e){"use strict";function t(e,t,r,i){var s=Object.create((t||n).prototype),o=new h(i||[]);return s._invoke=u(e,r,o),s}function r(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(n){return{type:"throw",arg:n}}}function n(){}function i(){}function s(){}function o(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function a(e){this.arg=e}function c(e){function t(n,i,s,o){var c=r(e[n],e,i);if("throw"!==c.type){var u=c.arg,l=u.value;return l instanceof a?Promise.resolve(l.arg).then(function(e){t("next",e,s,o)},function(e){t("throw",e,s,o)}):Promise.resolve(l).then(function(e){u.value=e,s(u)},o)}o(c.arg)}function n(e,r){function n(){return new Promise(function(n,i){t(e,r,n,i)})}return i=i?i.then(n,n):n()}"object"==typeof process&&process.domain&&(t=process.domain.bind(t));var i;this._invoke=n}function u(e,t,n){var i=E;return function(s,o){if(i===I)throw new Error("Generator is already running");if(i===N){if("throw"===s)throw o;return f()}for(;;){var a=n.delegate;if(a){if("return"===s||"throw"===s&&a.iterator[s]===m){n.delegate=null;var c=a.iterator["return"];if(c){var u=r(c,a.iterator,o);if("throw"===u.type){s="throw",o=u.arg;continue}}if("return"===s)continue}var u=r(a.iterator[s],a.iterator,o);if("throw"===u.type){n.delegate=null,s="throw",o=u.arg;continue}s="next",o=m;var l=u.arg;if(!l.done)return i=S,l;n[a.resultName]=l.value,n.next=a.nextLoc,n.delegate=null}if("next"===s)i===S?n.sent=o:n.sent=m;else if("throw"===s){if(i===E)throw i=N,o;n.dispatchException(o)&&(s="next",o=m)}else"return"===s&&n.abrupt("return",o);i=I;var u=r(e,t,n);if("normal"===u.type){i=n.done?N:S;var l={value:u.arg,done:n.done};if(u.arg!==A)return l;n.delegate&&"next"===s&&(o=m)}else"throw"===u.type&&(i=N,s="throw",o=u.arg)}}}function l(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function p(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function h(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(l,this),this.reset(!0)}function g(e){if(e){var t=e[b];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function i(){for(;++r<e.length;)if(_.call(e,r))return i.value=e[r],i.done=!1,i;return i.value=m,i.done=!0,i};return n.next=n}}return{next:f}}function f(){return{value:m,done:!0}}var m,_=Object.prototype.hasOwnProperty,k="function"==typeof Symbol?Symbol:{},b=k.iterator||"@@iterator",d=k.toStringTag||"@@toStringTag",v="object"==typeof module,y=e.regeneratorRuntime;if(y)return void(v&&(module.exports=y));y=e.regeneratorRuntime=v?module.exports:{},y.wrap=t;var E="suspendedStart",S="suspendedYield",I="executing",N="completed",A={},w=s.prototype=n.prototype;i.prototype=w.constructor=s,s.constructor=i,s[d]=i.displayName="GeneratorFunction",y.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return t?t===i||"GeneratorFunction"===(t.displayName||t.name):!1},y.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,s):(e.__proto__=s,d in e||(e[d]="GeneratorFunction")),e.prototype=Object.create(w),e},y.awrap=function(e){return new a(e)},o(c.prototype),y.async=function(e,r,n,i){var s=new c(t(e,r,n,i));return y.isGeneratorFunction(r)?s:s.next().then(function(e){return e.done?e.value:s.next()})},o(w),w[b]=function(){return this},w[d]="Generator",w.toString=function(){return"[object Generator]"},y.keys=function(e){var t=[];for(var r in e)t.push(r);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},y.values=g,h.prototype={constructor:h,reset:function(e){if(this.prev=0,this.next=0,this.sent=m,this.done=!1,this.delegate=null,this.tryEntries.forEach(p),!e)for(var t in this)"t"===t.charAt(0)&&_.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=m)},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,n){return s.type="throw",s.arg=e,r.next=t,!!n}if(this.done)throw e;for(var r=this,n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n],s=i.completion;if("root"===i.tryLoc)return t("end");if(i.tryLoc<=this.prev){var o=_.call(i,"catchLoc"),a=_.call(i,"finallyLoc");if(o&&a){if(this.prev<i.catchLoc)return t(i.catchLoc,!0);if(this.prev<i.finallyLoc)return t(i.finallyLoc)}else if(o){if(this.prev<i.catchLoc)return t(i.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return t(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&_.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var i=n;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var s=i?i.completion:{};return s.type=e,s.arg=t,i?this.next=i.finallyLoc:this.complete(s),A},complete:function(e,t){if("throw"===e.type)throw e.arg;"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t)},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),p(r),A}},"catch":function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;p(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:g(e),resultName:t,nextLoc:r},A}}}("object"==typeof global?global:"object"==typeof window?window:"object"==typeof self?self:this),function(){function e(e){return function(){return this[e]}}function t(e){return function(){return e}}function r(e){var t=typeof e;if("object"==t){if(!e)return"null";if(e instanceof Array)return"array";if(e instanceof Object)return t;var r=Object.prototype.toString.call(e);if("[object Window]"==r)return"object";if("[object Array]"==r||"number"==typeof e.length&&"undefined"!=typeof e.splice&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("splice"))return"array";if("[object Function]"==r||"undefined"!=typeof e.call&&"undefined"!=typeof e.propertyIsEnumerable&&!e.propertyIsEnumerable("call"))return"function"}else if("function"==t&&"undefined"==typeof e.call)return"object";return t}function n(e){return"string"==typeof e}function i(e,t,r){return e.call.apply(e.bind,arguments)}function s(e,t,r){if(!e)throw Error();if(2<arguments.length){var n=Array.prototype.slice.call(arguments,2);return function(){var r=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(r,n),e.apply(t,r)}}return function(){return e.apply(t,arguments)}}function o(e,t,r){return o=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:s,o.apply(null,arguments)}function a(e,t){var r=Array.prototype.slice.call(arguments,1);return function(){var t=r.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function c(e){function t(){}var r=Z;t.prototype=r.prototype,e.G=r.prototype,e.prototype=new t,e.F=function(e,t,n){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return r.prototype[t].apply(e,i)}}function u(e,t,r){this.a=e,this.b=t||1,this.f=r||1}function l(e,t){return-1!=e.indexOf(t)}function p(e,t){return t>e?-1:e>t?1:0}function h(e,t){var r;e:{r=e.length;for(var i=n(e)?e.split(""):e,s=0;r>s;s++)if(s in i&&t.call(void 0,i[s],s,e)){r=s;break e}r=-1}return 0>r?null:n(e)?e.charAt(r):e[r]}function g(e){return Ye.concat.apply(Ye,arguments)}function f(e,t,r){return 2>=arguments.length?Ye.slice.call(e,t):Ye.slice.call(e,t,r)}function m(){var e=Fe;return nt?/rv\:([^\);]+)(\)|;)/.exec(e):rt?/Edge\/([\d\.]+)/.exec(e):tt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):it?/WebKit\/(\S+)/.exec(e):void 0}function _(){var e=Ke.document;return e?e.documentMode:void 0}function k(e){if(!ot[e]){for(var t=0,r=Je(String(st)).split("."),n=Je(String(e)).split("."),i=Math.max(r.length,n.length),s=0;0==t&&i>s;s++){var o=r[s]||"",a=n[s]||"",c=RegExp("(\\d*)(\\D*)","g"),u=RegExp("(\\d*)(\\D*)","g");do{var l=c.exec(o)||["","",""],h=u.exec(a)||["","",""];if(0==l[0].length&&0==h[0].length)break;t=p(0==l[1].length?0:parseInt(l[1],10),0==h[1].length?0:parseInt(h[1],10))||p(0==l[2].length,0==h[2].length)||p(l[2],h[2])}while(0==t)}ot[e]=t>=0}}function b(e,t,r,n){this.a=e,this.nodeName=r,this.nodeValue=n,this.nodeType=2,this.parentNode=this.ownerElement=t}function d(e,t){var r=lt&&"href"==t.nodeName?e.getAttribute(t.nodeName,2):t.nodeValue;return new b(t,e,t.nodeName,r)}function v(e){this.b=e,this.a=0}function y(e){e=e.match(pt);for(var t=0;t<e.length;t++)ht.test(e[t])&&e.splice(t,1);return new v(e)}function E(e,t){return e.b[e.a+(t||0)]}function S(e){return e.b[e.a++]}function I(e){return e.b.length<=e.a}function N(e,t){if(e.contains&&1==t.nodeType)return e==t||e.contains(t);if("undefined"!=typeof e.compareDocumentPosition)return e==t||Boolean(16&e.compareDocumentPosition(t));for(;t&&e!=t;)t=t.parentNode;return t==e}function A(e,t){if(e==t)return 0;if(e.compareDocumentPosition)return 2&e.compareDocumentPosition(t)?1:-1;if(tt&&!(ct>=9)){if(9==e.nodeType)return-1;if(9==t.nodeType)return 1}if("sourceIndex"in e||e.parentNode&&"sourceIndex"in e.parentNode){var r=1==e.nodeType,n=1==t.nodeType;if(r&&n)return e.sourceIndex-t.sourceIndex;var i=e.parentNode,s=t.parentNode;return i==s?j(e,t):!r&&N(i,t)?-1*w(e,t):!n&&N(s,e)?w(t,e):(r?e.sourceIndex:i.sourceIndex)-(n?t.sourceIndex:s.sourceIndex)}return n=9==e.nodeType?e:e.ownerDocument||e.document,r=n.createRange(),r.selectNode(e),r.collapse(!0),n=n.createRange(),n.selectNode(t),n.collapse(!0),r.compareBoundaryPoints(Ke.Range.START_TO_END,n)}function w(e,t){var r=e.parentNode;if(r==t)return-1;for(var n=t;n.parentNode!=r;)n=n.parentNode;return j(n,e)}function j(e,t){for(var r=t;r=r.previousSibling;)if(r==e)return-1;return 1}function C(e){var t=null,r=e.nodeType;if(1==r&&(t=e.textContent,t=void 0==t||null==t?e.innerText:t,t=void 0==t||null==t?"":t),"string"!=typeof t)if(ut&&"title"==e.nodeName.toLowerCase()&&1==r)t=e.text;else if(9==r||1==r){e=9==r?e.documentElement:e.firstChild;for(var r=0,n=[],t="";e;){do 1!=e.nodeType&&(t+=e.nodeValue),ut&&"title"==e.nodeName.toLowerCase()&&(t+=e.text),n[r++]=e;while(e=e.firstChild);for(;r&&!(e=n[--r].nextSibling););}}else t=e.nodeValue;return""+t}function T(e,t,r){if(null===t)return!0;try{if(!e.getAttribute)return!1}catch(n){return!1}return lt&&"class"==t&&(t="className"),null==r?!!e.getAttribute(t):e.getAttribute(t,2)==r}function R(e,t,r,i,s){return(ut?O:x).call(null,e,t,n(r)?r:null,n(i)?i:null,s||new L)}function O(e,t,r,n,i){if(e instanceof me||8==e.b||r&&null===e.b){var s=t.all;if(!s)return i;if(e=U(e),"*"!=e&&(s=t.getElementsByTagName(e),!s))return i;if(r){for(var o=[],a=0;t=s[a++];)T(t,r,n)&&o.push(t);s=o}for(a=0;t=s[a++];)"*"==e&&"!"==t.tagName||V(i,t);return i}return D(e,t,r,n,i),i}function x(e,t,r,n,i){return t.getElementsByName&&n&&"name"==r&&!tt?(t=t.getElementsByName(n),qe(t,function(t){e.a(t)&&V(i,t)})):t.getElementsByClassName&&n&&"class"==r?(t=t.getElementsByClassName(n),qe(t,function(t){t.className==n&&e.a(t)&&V(i,t)})):e instanceof he?D(e,t,r,n,i):t.getElementsByTagName&&(t=t.getElementsByTagName(e.f()),qe(t,function(e){T(e,r,n)&&V(i,e)})),i}function P(e,t,r,n,i){var s;if((e instanceof me||8==e.b||r&&null===e.b)&&(s=t.childNodes)){var o=U(e);return"*"==o||(s=Qe(s,function(e){return e.tagName&&e.tagName.toLowerCase()==o}))?(r&&(s=Qe(s,function(e){return T(e,r,n)})),qe(s,function(e){"*"==o&&("!"==e.tagName||"*"==o&&1!=e.nodeType)||V(i,e)}),i):i}return M(e,t,r,n,i)}function M(e,t,r,n,i){for(t=t.firstChild;t;t=t.nextSibling)T(t,r,n)&&e.a(t)&&V(i,t);return i}function D(e,t,r,n,i){for(t=t.firstChild;t;t=t.nextSibling)T(t,r,n)&&e.a(t)&&V(i,t),D(e,t,r,n,i)}function U(e){if(e instanceof he){if(8==e.b)return"!";if(null===e.b)return"*"}return e.f()}function L(){this.b=this.a=null,this.l=0}function G(e){this.node=e,this.a=this.b=null}function B(e,t){if(!e.a)return t;if(!t.a)return e;for(var r=e.a,n=t.a,i=null,s=null,o=0;r&&n;){var s=r.node,a=n.node;s==a||s instanceof b&&a instanceof b&&s.a==a.a?(s=r,r=r.a,n=n.a):0<A(r.node,n.node)?(s=n,n=n.a):(s=r,r=r.a),(s.b=i)?i.a=s:e.a=s,i=s,o++}for(s=r||n;s;)s.b=i,i=i.a=s,o++,s=s.a;return e.b=i,e.l=o,e}function H(e,t){var r=new G(t);r.a=e.a,e.b?e.a.b=r:e.a=e.b=r,e.a=r,e.l++}function V(e,t){var r=new G(t);r.b=e.b,e.a?e.b.a=r:e.a=e.b=r,e.b=r,e.l++}function F(e){return(e=e.a)?e.node:null}function K(e){return(e=F(e))?C(e):""}function J(e,t){return new Y(e,!!t)}function Y(e,t){this.f=e,this.b=(this.c=t)?e.b:e.a,this.a=null}function X(e){var t=e.b;if(null==t)return null;var r=e.a=t;return e.b=e.c?t.b:t.a,r.node}function q(e){switch(e.nodeType){case 1:return a(W,e);case 9:return q(e.documentElement);case 11:case 10:case 6:case 12:return Q;default:return e.parentNode?q(e.parentNode):Q}}function Q(){return null}function W(e,t){if(e.prefix==t)return e.namespaceURI||"http://www.w3.org/1999/xhtml";var r=e.getAttributeNode("xmlns:"+t);return r&&r.specified?r.value||null:e.parentNode&&9!=e.parentNode.nodeType?W(e.parentNode,t):null}function Z(e){this.i=e,this.b=this.g=!1,this.f=null}function z(e){return"\n  "+e.toString().split("\n").join("\n  ")}function $(e,t){e.g=t}function ee(e,t){e.b=t}function te(e,t){var r=e.a(t);return r instanceof L?+K(r):+r}function re(e,t){var r=e.a(t);return r instanceof L?K(r):""+r}function ne(e,t){var r=e.a(t);return r instanceof L?!!r.l:!!r}function ie(e,t,r){Z.call(this,e.i),this.c=e,this.h=t,this.o=r,this.g=t.g||r.g,this.b=t.b||r.b,this.c==ft&&(r.b||r.g||4==r.i||0==r.i||!t.f?t.b||t.g||4==t.i||0==t.i||!r.f||(this.f={name:r.f.name,s:t}):this.f={name:t.f.name,s:r})}function se(e,t,r,n,i){t=t.a(n),r=r.a(n);var s;if(t instanceof L&&r instanceof L){for(i=J(t),n=X(i);n;n=X(i))for(t=J(r),s=X(t);s;s=X(t))if(e(C(n),C(s)))return!0;return!1}if(t instanceof L||r instanceof L){for(t instanceof L?i=t:(i=r,r=t),i=J(i),t=typeof r,n=X(i);n;n=X(i)){switch(t){case"number":n=+C(n);break;case"boolean":n=!!C(n);break;case"string":n=C(n);break;default:throw Error("Illegal primitive type for comparison.")}if(e(n,r))return!0}return!1}return i?"boolean"==typeof t||"boolean"==typeof r?e(!!t,!!r):"number"==typeof t||"number"==typeof r?e(+t,+r):e(t,r):e(+t,+r)}function oe(e,t,r,n){this.a=e,this.w=t,this.i=r,this.m=n}function ae(e,t,r,n){if(gt.hasOwnProperty(e))throw Error("Binary operator already created: "+e);return e=new oe(e,t,r,n),gt[e.toString()]=e}function ce(e,t){if(t.a.length&&4!=e.i)throw Error("Primary expression must evaluate to nodeset if filter has predicate(s).");Z.call(this,e.i),this.c=e,this.h=t,this.g=e.g,this.b=e.b}function ue(e,t){if(t.length<e.A)throw Error("Function "+e.j+" expects at least"+e.A+" arguments, "+t.length+" given");if(null!==e.v&&t.length>e.v)throw Error("Function "+e.j+" expects at most "+e.v+" arguments, "+t.length+" given");e.B&&qe(t,function(t,r){if(4!=t.i)throw Error("Argument "+r+" to function "+e.j+" is not of type Nodeset: "+t)}),Z.call(this,e.i),this.h=e,this.c=t,$(this,e.g||Ze(t,function(e){return e.g})),ee(this,e.D&&!t.length||e.C&&!!t.length||Ze(t,function(e){return e.b}))}function le(e,t,r,n,i,s,o,a,c){this.j=e,this.i=t,this.g=r,this.D=n,this.C=i,this.m=s,this.A=o,this.v=void 0!==a?a:o,this.B=!!c}function pe(e,t,r,n,i,s,o,a){if(mt.hasOwnProperty(e))throw Error("Function already created: "+e+".");mt[e]=new le(e,t,r,n,!1,i,s,o,a)}function he(e,t){switch(this.h=e,this.c=void 0!==t?t:null,this.b=null,e){case"comment":this.b=8;break;case"text":this.b=3;break;case"processing-instruction":this.b=7;break;case"node":break;default:throw Error("Unexpected argument")}}function ge(e){return"comment"==e||"text"==e||"processing-instruction"==e||"node"==e}function fe(e){Z.call(this,3),this.c=e.substring(1,e.length-1)}function me(e,t){this.j=e.toLowerCase(),this.c=t?t.toLowerCase():"http://www.w3.org/1999/xhtml"}function _e(e){Z.call(this,1),this.c=e}function ke(e,t){if(Z.call(this,e.i),this.h=e,this.c=t,this.g=e.g,this.b=e.b,1==this.c.length){var r=this.c[0];r.u||r.c!=kt||(r=r.o,"*"!=r.f()&&(this.f={name:r.f(),s:null}))}}function be(){Z.call(this,4)}function de(){Z.call(this,4)}function ve(e){return"/"==e||"//"==e}function ye(e,t){this.a=e,this.b=!!t}function Ee(e,t,r){for(r=r||0;r<e.a.length;r++)for(var n,i=e.a[r],s=J(t),o=t.l,a=0;n=X(s);a++){var c=e.b?o-a:a+1;if(n=i.a(new u(n,c,o)),"number"==typeof n)c=c==n;else if("string"==typeof n||"boolean"==typeof n)c=!!n;else{if(!(n instanceof L))throw Error("Predicate.evaluate returned an unexpected type.");c=0<n.l}if(!c){c=s,n=c.f;var l=c.a;if(!l)throw Error("Next must be called at least once before remove.");var p=l.b,l=l.a;p?p.a=l:n.a=l,l?l.b=p:n.b=p,n.l--,c.a=null}}return t}function Se(e,t,r,n){Z.call(this,4),this.c=e,this.o=t,this.h=r||new ye([]),this.u=!!n,t=this.h,t=0<t.a.length?t.a[0].f:null,e.b&&t&&(e=t.name,e=ut?e.toLowerCase():e,this.f={name:e,s:t.s});e:{for(e=this.h,t=0;t<e.a.length;t++)if(r=e.a[t],r.g||1==r.i||0==r.i){e=!0;break e}e=!1}this.g=e}function Ie(e,t,r,n){this.j=e,this.f=t,this.a=r,this.b=n}function Ne(e,t,r,n){if(_t.hasOwnProperty(e))throw Error("Axis already created: "+e);return t=new Ie(e,t,r,!!n),_t[e]=t}function Ae(e){Z.call(this,1),this.c=e,this.g=e.g,this.b=e.b}function we(e){Z.call(this,4),this.c=e,$(this,Ze(this.c,function(e){return e.g})),ee(this,Ze(this.c,function(e){return e.b}))}function je(e,t){this.a=e,this.b=t}function Ce(e){for(var t,r=[];;){Te(e,"Missing right hand side of binary expression."),t=Le(e);var n=S(e.a);if(!n)break;var i=(n=gt[n]||null)&&n.w;if(!i){e.a.a--;break}for(;r.length&&i<=r[r.length-1].w;)t=new ie(r.pop(),r.pop(),t);r.push(t,n)}for(;r.length;)t=new ie(r.pop(),r.pop(),t);return t}function Te(e,t){if(I(e.a))throw Error(t)}function Re(e,t){var r=S(e.a);if(r!=t)throw Error("Bad token, expected: "+t+" got: "+r)}function Oe(e){if(e=S(e.a),")"!=e)throw Error("Bad token: "+e)}function xe(e){if(e=S(e.a),2>e.length)throw Error("Unclosed literal string");return new fe(e)}function Pe(e){var t=S(e.a),r=t.indexOf(":");if(-1==r)return new me(t);var n=t.substring(0,r);if(e=e.b(n),!e)throw Error("Namespace prefix not declared: "+n);return t=t.substr(r+1),new me(t,e)}function Me(e){var t,r,n=[];if(ve(E(e.a))){if(t=S(e.a),r=E(e.a),"/"==t&&(I(e.a)||"."!=r&&".."!=r&&"@"!=r&&"*"!=r&&!/(?![0-9])[\w]/.test(r)))return new be;r=new be,Te(e,"Missing next location step."),t=De(e,t),n.push(t)}else{e:{switch(t=E(e.a),r=t.charAt(0)){case"$":throw Error("Variable reference not allowed in HTML XPath");case"(":S(e.a),t=Ce(e),Te(e,'unclosed "("'),Re(e,")");break;case'"':case"'":t=xe(e);break;default:if(isNaN(+t)){if(ge(t)||!/(?![0-9])[\w]/.test(r)||"("!=E(e.a,1)){t=null;break e}for(t=S(e.a),t=mt[t]||null,S(e.a),r=[];")"!=E(e.a)&&(Te(e,"Missing function argument list."),r.push(Ce(e)),","==E(e.a));)S(e.a);Te(e,"Unclosed function argument list."),Oe(e),t=new ue(t,r)}else t=new _e(+S(e.a))}"["==E(e.a)&&(r=new ye(Ue(e)),t=new ce(t,r))}if(t){if(!ve(E(e.a)))return t;r=t}else t=De(e,"/"),r=new de,n.push(t)}for(;ve(E(e.a));)t=S(e.a),Te(e,"Missing next location step."),t=De(e,t),n.push(t);return new ke(r,n)}function De(e,t){var r,n,i;if("/"!=t&&"//"!=t)throw Error('Step op should be "/" or "//"');if("."==E(e.a))return n=new Se(St,new he("node")),S(e.a),n;if(".."==E(e.a))return n=new Se(yt,new he("node")),S(e.a),n;var s;if("@"==E(e.a))s=kt,S(e.a),Te(e,"Missing attribute name");else if("::"==E(e.a,1)){if(!/(?![0-9])[\w]/.test(E(e.a).charAt(0)))throw Error("Bad token: "+S(e.a));if(r=S(e.a),s=_t[r]||null,!s)throw Error("No axis with name: "+r);S(e.a),Te(e,"Missing node name")}else s=bt;if(r=E(e.a),/(?![0-9])[\w]/.test(r.charAt(0)))if("("==E(e.a,1)){if(!ge(r))throw Error("Invalid node type: "+r);if(r=S(e.a),!ge(r))throw Error("Invalid type name: "+r);Re(e,"("),Te(e,"Bad nodetype"),i=E(e.a).charAt(0);var o=null;'"'!=i&&"'"!=i||(o=xe(e)),Te(e,"Bad nodetype"),Oe(e),r=new he(r,o)}else r=Pe(e);else{if("*"!=r)throw Error("Bad token: "+S(e.a));r=Pe(e)}return i=new ye(Ue(e),s.a),n||new Se(s,r,i,"//"==t)}function Ue(e){for(var t=[];"["==E(e.a);){S(e.a),Te(e,"Missing predicate expression.");var r=Ce(e);t.push(r),Te(e,"Unclosed predicate expression."),Re(e,"]")}return t}function Le(e){if("-"==E(e.a))return S(e.a),new Ae(Le(e));var t=Me(e);if("|"!=E(e.a))e=t;else{for(t=[t];"|"==S(e.a);)Te(e,"Missing next union location path."),t.push(Me(e));e.a.a--,e=new we(t)}return e}function Ge(e,n){if(!e.length)throw Error("Empty XPath expression.");var i=y(e);if(I(i))throw Error("Invalid XPath expression.");n?"function"==r(n)||(n=o(n.lookupNamespaceURI,n)):n=t(null);var s=Ce(new je(i,n));if(!I(i))throw Error("Bad token: "+S(i));this.evaluate=function(e,t){var r=s.a(new u(e));return new Be(r,t)}}function Be(e,t){if(0==t)if(e instanceof L)t=4;else if("string"==typeof e)t=2;else if("number"==typeof e)t=1;else{if("boolean"!=typeof e)throw Error("Unexpected evaluation result.");t=3}if(2!=t&&1!=t&&3!=t&&!(e instanceof L))throw Error("value could not be converted to the specified type");this.resultType=t;var r;switch(t){case 2:this.stringValue=e instanceof L?K(e):""+e;break;case 1:this.numberValue=e instanceof L?+K(e):+e;break;case 3:this.booleanValue=e instanceof L?0<e.l:!!e;break;case 4:case 5:case 6:case 7:var n=J(e);r=[];for(var i=X(n);i;i=X(n))r.push(i instanceof b?i.a:i);this.snapshotLength=e.l,this.invalidIteratorState=!1;break;case 8:case 9:n=F(e),this.singleNodeValue=n instanceof b?n.a:n;break;default:throw Error("Unknown XPathResult type.")}var s=0;this.iterateNext=function(){if(4!=t&&5!=t)throw Error("iterateNext called with wrong result type");return s>=r.length?null:r[s++]},this.snapshotItem=function(e){if(6!=t&&7!=t)throw Error("snapshotItem called with wrong result type");return e>=r.length||0>e?null:r[e]}}function He(e){this.lookupNamespaceURI=q(e)}function Ve(e){e=e||Ke;var t=e.document;t.evaluate||(e.XPathResult=Be,t.evaluate=function(e,t,r,n){return new Ge(e,r).evaluate(t,n)},t.createExpression=function(e,t){return new Ge(e,t)},t.createNSResolver=function(e){return new He(e)})}var Fe,Ke=this,Je=String.prototype.trim?function(e){return e.trim()}:function(e){return e.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},Ye=Array.prototype,Xe=Ye.indexOf?function(e,t,r){return Ye.indexOf.call(e,t,r)}:function(e,t,r){if(r=null==r?0:0>r?Math.max(0,e.length+r):r,n(e))return n(t)&&1==t.length?e.indexOf(t,r):-1;for(;r<e.length;r++)if(r in e&&e[r]===t)return r;return-1},qe=Ye.forEach?function(e,t,r){Ye.forEach.call(e,t,r)}:function(e,t,r){for(var i=e.length,s=n(e)?e.split(""):e,o=0;i>o;o++)o in s&&t.call(r,s[o],o,e)},Qe=Ye.filter?function(e,t,r){return Ye.filter.call(e,t,r)}:function(e,t,r){for(var i=e.length,s=[],o=0,a=n(e)?e.split(""):e,c=0;i>c;c++)if(c in a){var u=a[c];t.call(r,u,c,e)&&(s[o++]=u)}return s},We=Ye.reduce?function(e,t,r,n){return n&&(t=o(t,n)),Ye.reduce.call(e,t,r)}:function(e,t,r,n){var i=r;return qe(e,function(r,s){i=t.call(n,i,r,s,e)}),i},Ze=Ye.some?function(e,t,r){return Ye.some.call(e,t,r)}:function(e,t,r){for(var i=e.length,s=n(e)?e.split(""):e,o=0;i>o;o++)if(o in s&&t.call(r,s[o],o,e))return!0;return!1};e:{var ze=Ke.navigator;if(ze){var $e=ze.userAgent;if($e){Fe=$e;break e}}Fe=""}var et=l(Fe,"Opera")||l(Fe,"OPR"),tt=l(Fe,"Trident")||l(Fe,"MSIE"),rt=l(Fe,"Edge"),nt=l(Fe,"Gecko")&&!(l(Fe.toLowerCase(),"webkit")&&!l(Fe,"Edge"))&&!(l(Fe,"Trident")||l(Fe,"MSIE"))&&!l(Fe,"Edge"),it=l(Fe.toLowerCase(),"webkit")&&!l(Fe,"Edge"),st=function(){if(et&&Ke.opera){var e=Ke.opera.version;return"function"==r(e)?e():e}var e="",t=m();return t&&(e=t?t[1]:""),tt&&(t=_(),t>parseFloat(e))?String(t):e}(),ot={},at=Ke.document,ct=at&&tt?_()||("CSS1Compat"==at.compatMode?parseInt(st,10):5):void 0,ut=tt&&!(ct>=9),lt=tt&&!(ct>=8),pt=RegExp("\\$?(?:(?![0-9-])[\\w-]+:)?(?![0-9-])[\\w-]+|\\/\\/|\\.\\.|::|\\d+(?:\\.\\d*)?|\\.\\d+|\"[^\"]*\"|'[^']*'|[!<>]=|\\s+|.","g"),ht=/^\s/;!nt&&!tt||tt&&ct>=9||nt&&k("1.9.1"),tt&&k("9"),c(ie),ie.prototype.a=function(e){return this.c.m(this.h,this.o,e)},ie.prototype.toString=function(){var e="Binary Expression: "+this.c,e=e+z(this.h);return e+=z(this.o)},oe.prototype.toString=e("a");var gt={};ae("div",6,1,function(e,t,r){return te(e,r)/te(t,r)}),ae("mod",6,1,function(e,t,r){return te(e,r)%te(t,r)}),ae("*",6,1,function(e,t,r){return te(e,r)*te(t,r)}),ae("+",5,1,function(e,t,r){return te(e,r)+te(t,r)}),ae("-",5,1,function(e,t,r){return te(e,r)-te(t,r)}),ae("<",4,2,function(e,t,r){return se(function(e,t){return t>e},e,t,r)}),ae(">",4,2,function(e,t,r){return se(function(e,t){return e>t},e,t,r)}),ae("<=",4,2,function(e,t,r){return se(function(e,t){return t>=e},e,t,r)}),ae(">=",4,2,function(e,t,r){return se(function(e,t){return e>=t},e,t,r)});var ft=ae("=",3,2,function(e,t,r){return se(function(e,t){return e==t},e,t,r,!0)});ae("!=",3,2,function(e,t,r){return se(function(e,t){return e!=t},e,t,r,!0)}),ae("and",2,2,function(e,t,r){return ne(e,r)&&ne(t,r)}),ae("or",1,2,function(e,t,r){return ne(e,r)||ne(t,r)}),c(ce),ce.prototype.a=function(e){return e=this.c.a(e),Ee(this.h,e)},ce.prototype.toString=function(){var e;return e="Filter:"+z(this.c),e+=z(this.h)},c(ue),ue.prototype.a=function(e){return this.h.m.apply(null,g(e,this.c))},ue.prototype.toString=function(){var e="Function: "+this.h;if(this.c.length)var t=We(this.c,function(e,t){return e+z(t)},"Arguments:"),e=e+z(t);return e},le.prototype.toString=e("j");var mt={};pe("boolean",2,!1,!1,function(e,t){return ne(t,e)},1),pe("ceiling",1,!1,!1,function(e,t){return Math.ceil(te(t,e))},1),pe("concat",3,!1,!1,function(e,t){var r=f(arguments,1);return We(r,function(t,r){return t+re(r,e)},"")},2,null),pe("contains",2,!1,!1,function(e,t,r){return l(re(t,e),re(r,e))},2),pe("count",1,!1,!1,function(e,t){return t.a(e).l},1,1,!0),pe("false",2,!1,!1,t(!1),0),pe("floor",1,!1,!1,function(e,t){return Math.floor(te(t,e))},1),pe("id",4,!1,!1,function(e,t){function r(e){if(ut){var t=i.all[e];if(t){if(t.nodeType&&e==t.id)return t;if(t.length)return h(t,function(t){return e==t.id})}return null}return i.getElementById(e)}var n=e.a,i=9==n.nodeType?n:n.ownerDocument,n=re(t,e).split(/\s+/),s=[];qe(n,function(e){e=r(e),!e||0<=Xe(s,e)||s.push(e)}),s.sort(A);var o=new L;return qe(s,function(e){V(o,e)}),o},1),pe("lang",2,!1,!1,t(!1),1),pe("last",1,!0,!1,function(e){if(1!=arguments.length)throw Error("Function last expects ()");return e.f},0),pe("local-name",3,!1,!0,function(e,t){var r=t?F(t.a(e)):e.a;return r?r.localName||r.nodeName.toLowerCase():""},0,1,!0),pe("name",3,!1,!0,function(e,t){var r=t?F(t.a(e)):e.a;return r?r.nodeName.toLowerCase():""},0,1,!0),pe("namespace-uri",3,!0,!1,t(""),0,1,!0),pe("normalize-space",3,!1,!0,function(e,t){return(t?re(t,e):C(e.a)).replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"")},0,1),pe("not",2,!1,!1,function(e,t){return!ne(t,e)},1),pe("number",1,!1,!0,function(e,t){return t?te(t,e):+C(e.a)},0,1),pe("position",1,!0,!1,function(e){return e.b},0),pe("round",1,!1,!1,function(e,t){return Math.round(te(t,e))},1),pe("starts-with",2,!1,!1,function(e,t,r){return t=re(t,e),e=re(r,e),0==t.lastIndexOf(e,0)},2),pe("string",3,!1,!0,function(e,t){return t?re(t,e):C(e.a)},0,1),pe("string-length",1,!1,!0,function(e,t){return(t?re(t,e):C(e.a)).length},0,1),pe("substring",3,!1,!1,function(e,t,r,n){if(r=te(r,e),isNaN(r)||1/0==r||-(1/0)==r)return"";if(n=n?te(n,e):1/0,isNaN(n)||-(1/0)===n)return"";r=Math.round(r)-1;var i=Math.max(r,0);return e=re(t,e),1/0==n?e.substring(i):(t=Math.round(n),e.substring(i,r+t))},2,3),pe("substring-after",3,!1,!1,function(e,t,r){return t=re(t,e),e=re(r,e),r=t.indexOf(e),-1==r?"":t.substring(r+e.length)},2),pe("substring-before",3,!1,!1,function(e,t,r){return t=re(t,e),e=re(r,e),e=t.indexOf(e),-1==e?"":t.substring(0,e)},2),pe("sum",1,!1,!1,function(e,t){for(var r=J(t.a(e)),n=0,i=X(r);i;i=X(r))n+=+C(i);return n},1,1,!0),pe("translate",3,!1,!1,function(e,t,r,n){t=re(t,e),r=re(r,e);var i=re(n,e);for(e=[],n=0;n<r.length;n++){var s=r.charAt(n);s in e||(e[s]=i.charAt(n))}for(r="",n=0;n<t.length;n++)s=t.charAt(n),r+=s in e?e[s]:s;return r},3),pe("true",2,!1,!1,t(!0),0),he.prototype.a=function(e){return null===this.b||this.b==e.nodeType},he.prototype.f=e("h"),he.prototype.toString=function(){var e="Kind Test: "+this.h;
return null===this.c||(e+=z(this.c)),e},c(fe),fe.prototype.a=e("c"),fe.prototype.toString=function(){return"Literal: "+this.c},me.prototype.a=function(e){var t=e.nodeType;return 1!=t&&2!=t?!1:"*"!=this.j&&this.j!=e.nodeName.toLowerCase()?!1:this.c==(e.namespaceURI?e.namespaceURI.toLowerCase():"http://www.w3.org/1999/xhtml")},me.prototype.f=e("j"),me.prototype.toString=function(){return"Name Test: "+("http://www.w3.org/1999/xhtml"==this.c?"":this.c+":")+this.j},c(_e),_e.prototype.a=e("c"),_e.prototype.toString=function(){return"Number: "+this.c},c(ke),c(be),be.prototype.a=function(e){var t=new L;return e=e.a,9==e.nodeType?V(t,e):V(t,e.ownerDocument),t},be.prototype.toString=t("Root Helper Expression"),c(de),de.prototype.a=function(e){var t=new L;return V(t,e.a),t},de.prototype.toString=t("Context Helper Expression"),ke.prototype.a=function(e){var t=this.h.a(e);if(!(t instanceof L))throw Error("Filter expression must evaluate to nodeset.");e=this.c;for(var r=0,n=e.length;n>r&&t.l;r++){var i,s=e[r],o=J(t,s.c.a);if(s.g||s.c!=vt)if(s.g||s.c!=Et)for(i=X(o),t=s.a(new u(i));null!=(i=X(o));)i=s.a(new u(i)),t=B(t,i);else i=X(o),t=s.a(new u(i));else{for(i=X(o);(t=X(o))&&(!i.contains||i.contains(t))&&8&t.compareDocumentPosition(i);i=t);t=s.a(new u(i))}}return t},ke.prototype.toString=function(){var e;if(e="Path Expression:"+z(this.h),this.c.length){var t=We(this.c,function(e,t){return e+z(t)},"Steps:");e+=z(t)}return e},ye.prototype.toString=function(){return We(this.a,function(e,t){return e+z(t)},"Predicates:")},c(Se),Se.prototype.a=function(e){var t=e.a,r=null,r=this.f,n=null,i=null,s=0;if(r&&(n=r.name,i=r.s?re(r.s,e):null,s=1),this.u)if(this.g||this.c!=bt)if(e=J(new Se(dt,new he("node")).a(e)),t=X(e))for(r=this.m(t,n,i,s);null!=(t=X(e));)r=B(r,this.m(t,n,i,s));else r=new L;else r=R(this.o,t,n,i),r=Ee(this.h,r,s);else r=this.m(e.a,n,i,s);return r},Se.prototype.m=function(e,t,r,n){return e=this.c.f(this.o,e,t,r),e=Ee(this.h,e,n)},Se.prototype.toString=function(){var e;if(e="Step:"+z("Operator: "+(this.u?"//":"/")),this.c.j&&(e+=z("Axis: "+this.c)),e+=z(this.o),this.h.a.length){var t=We(this.h.a,function(e,t){return e+z(t)},"Predicates:");e+=z(t)}return e},Ie.prototype.toString=e("j");var _t={};Ne("ancestor",function(e,t){for(var r=new L,n=t;n=n.parentNode;)e.a(n)&&H(r,n);return r},!0),Ne("ancestor-or-self",function(e,t){var r=new L,n=t;do e.a(n)&&H(r,n);while(n=n.parentNode);return r},!0);var kt=Ne("attribute",function(e,t){var r=new L,n=e.f();if("style"==n&&t.style&&ut)return V(r,new b(t.style,t,"style",t.style.cssText)),r;var i=t.attributes;if(i)if(e instanceof he&&null===e.b||"*"==n)for(var s,n=0;s=i[n];n++)ut?s.nodeValue&&V(r,d(t,s)):V(r,s);else(s=i.getNamedItem(n))&&(ut?s.nodeValue&&V(r,d(t,s)):V(r,s));return r},!1),bt=Ne("child",function(e,t,r,i,s){return(ut?P:M).call(null,e,t,n(r)?r:null,n(i)?i:null,s||new L)},!1,!0);Ne("descendant",R,!1,!0);var dt=Ne("descendant-or-self",function(e,t,r,n){var i=new L;return T(t,r,n)&&e.a(t)&&V(i,t),R(e,t,r,n,i)},!1,!0),vt=Ne("following",function(e,t,r,n){var i=new L;do for(var s=t;s=s.nextSibling;)T(s,r,n)&&e.a(s)&&V(i,s),i=R(e,s,r,n,i);while(t=t.parentNode);return i},!1,!0);Ne("following-sibling",function(e,t){for(var r=new L,n=t;n=n.nextSibling;)e.a(n)&&V(r,n);return r},!1),Ne("namespace",function(){return new L},!1);var yt=Ne("parent",function(e,t){var r=new L;if(9==t.nodeType)return r;if(2==t.nodeType)return V(r,t.ownerElement),r;var n=t.parentNode;return e.a(n)&&V(r,n),r},!1),Et=Ne("preceding",function(e,t,r,n){var i=new L,s=[];do s.unshift(t);while(t=t.parentNode);for(var o=1,a=s.length;a>o;o++){var c=[];for(t=s[o];t=t.previousSibling;)c.unshift(t);for(var u=0,l=c.length;l>u;u++)t=c[u],T(t,r,n)&&e.a(t)&&V(i,t),i=R(e,t,r,n,i)}return i},!0,!0);Ne("preceding-sibling",function(e,t){for(var r=new L,n=t;n=n.previousSibling;)e.a(n)&&H(r,n);return r},!0);var St=Ne("self",function(e,t){var r=new L;return e.a(t)&&V(r,t),r},!1);c(Ae),Ae.prototype.a=function(e){return-te(this.c,e)},Ae.prototype.toString=function(){return"Unary Expression: -"+z(this.c)},c(we),we.prototype.a=function(e){var t=new L;return qe(this.c,function(r){if(r=r.a(e),!(r instanceof L))throw Error("Path expression must evaluate to NodeSet.");t=B(t,r)}),t},we.prototype.toString=function(){return We(this.c,function(e,t){return e+z(t)},"Union Expression:")},Be.ANY_TYPE=0,Be.NUMBER_TYPE=1,Be.STRING_TYPE=2,Be.BOOLEAN_TYPE=3,Be.UNORDERED_NODE_ITERATOR_TYPE=4,Be.ORDERED_NODE_ITERATOR_TYPE=5,Be.UNORDERED_NODE_SNAPSHOT_TYPE=6,Be.ORDERED_NODE_SNAPSHOT_TYPE=7,Be.ANY_UNORDERED_NODE_TYPE=8,Be.FIRST_ORDERED_NODE_TYPE=9;var It=["wgxpath","install"],Nt=Ke;It[0]in Nt||!Nt.execScript||Nt.execScript("var "+It[0]);for(var At;It.length&&(At=It.shift());)It.length||void 0===Ve?Nt=Nt[At]?Nt[At]:Nt[At]={}:Nt[At]=Ve}(),function(e){function t(e,t){for(var r=0,n=e.length-1;n>=0;n--)r+=e[e.length-1-n]*Math.pow(2,t*n);return r}function r(e,t,r){r=r||-1;for(var n=0,i=Math.pow(2,t),s=1;8>s;s++){if(i>e){var o;if(0>r)o=new ArrayBuffer(s),n=s;else{if(s>r)return new ArrayBuffer(0);o=new ArrayBuffer(r),n=r}for(var a=new Uint8Array(o),c=s-1;c>=0;c--){var u=Math.pow(2,c*t);a[n-c-1]=Math.floor(e/u),e-=a[n-c-1]*u}return o}i*=Math.pow(2,t)}}function n(e){for(var t=0>e?-1*e:e,n=128,i=1;8>i;i++){if(n>=t){if(0>e){var o=n-t,a=r(o,8,i),c=new Uint8Array(a);return c[0]|=128,a}var a=r(t,8,i),c=new Uint8Array(a);if(128&c[0]){var u=s(a),l=new Uint8Array(u);a=new ArrayBuffer(a.byteLength+1),c=new Uint8Array(a);for(var p=0;p<u.byteLength;p++)c[p+1]=l[p];c[0]=0}return a}n*=Math.pow(2,8)}return new ArrayBuffer(0)}function i(){var e=new Uint8Array(this.value_hex);if(this.value_hex.byteLength>=2){var r=255==e[0]&&128&e[1],n=0==e[0]&&0==(128&e[1]);(r||n)&&this.warnings.push("Needlessly long format")}for(var i=new ArrayBuffer(this.value_hex.byteLength),s=new Uint8Array(i),o=0;o<this.value_hex.byteLength;o++)s[o]=0;s[0]=128&e[0];for(var a=t(s,8),c=new ArrayBuffer(this.value_hex.byteLength),u=new Uint8Array(c),l=0;l<this.value_hex.byteLength;l++)u[l]=e[l];u[0]&=127;var p=t(u,8);return p-a}function s(e){if(c(e,0,e.byteLength)===!1)return new ArrayBuffer(0);for(var t=new Uint8Array(e),r=new ArrayBuffer(e.byteLength),n=new Uint8Array(r),i=0;i<e.byteLength;i++)n[i]=t[i];return r}function o(e,t,r){if(c(e,t,r)===!1)return new ArrayBuffer(0);for(var n=new Uint8Array(e,t,r),i=new ArrayBuffer(r),s=new Uint8Array(i),o=0;r>o;o++)s[o]=n[o];return i}function a(e,t){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=new ArrayBuffer(e.byteLength+t.byteLength),s=new Uint8Array(i),o=0;o<e.byteLength;o++)s[o]=r[o];for(var a=0;a<t.byteLength;a++)s[e.byteLength+a]=n[a];return i}function c(e,t,r){return e instanceof ArrayBuffer==0?(this.error='Wrong parameter: input_buffer must be "ArrayBuffer"',!1):0===e.byteLength?(this.error="Wrong parameter: input_buffer has zero length",!1):0>t?(this.error="Wrong parameter: input_offset less than zero",!1):0>r?(this.error="Wrong parameter: input_length less than zero",!1):e.byteLength-t-r<0?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0}function u(e,t,r){if(c(e,t,r)===!1)return"";for(var n="",i=new Uint8Array(e,t,r),s=0;s<i.length;s++){var o=i[s].toString(16).toUpperCase();n=n+(1===o.length?" 0":" ")+o}return n}function l(t,r,n){function i(e,t){if(e instanceof t)return e;var r=new t;return r.id_block=e.id_block,r.len_block=e.len_block,r.warnings=e.warnings,r.value_before_decode=s(e.value_before_decode),r}var a=r,u=new e.org.pkijs.asn1.ASN1_block;if(c(t,r,n)===!1)return u.error="Wrong input parameters",{offset:-1,result:u};var l=new Uint8Array(t,r,n);if(0==l.length)return this.error="Zero buffer length",{offset:-1,result:u};var p=u.id_block.fromBER(t,r,n);if(u.warnings.concat(u.id_block.warnings),-1==p)return u.error=u.id_block.error,{offset:-1,result:u};if(r=p,n-=u.id_block.block_length,p=u.len_block.fromBER(t,r,n),u.warnings.concat(u.len_block.warnings),-1==p)return u.error=u.len_block.error,{offset:-1,result:u};if(r=p,n-=u.len_block.block_length,0==u.id_block.is_constructed&&1==u.len_block.is_indefinite_form)return u.error=new String("Indefinite length form used for primitive encoding form"),{offset:-1,result:u};var h=e.org.pkijs.asn1.ASN1_block;switch(u.id_block.tag_class){case 1:if(u.id_block.tag_number>=37&&0==u.id_block.is_hex_only)return u.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:u};switch(u.id_block.tag_number){case 0:if(1==u.id_block.is_constructed&&u.len_block.length>0)return u.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:u};h=e.org.pkijs.asn1.EOC;break;case 1:h=e.org.pkijs.asn1.BOOLEAN;break;case 2:h=e.org.pkijs.asn1.INTEGER;break;case 3:h=e.org.pkijs.asn1.BITSTRING;break;case 4:h=e.org.pkijs.asn1.OCTETSTRING;break;case 5:h=e.org.pkijs.asn1.NULL;break;case 6:h=e.org.pkijs.asn1.OID;break;case 10:h=e.org.pkijs.asn1.ENUMERATED;break;case 12:h=e.org.pkijs.asn1.UTF8STRING;break;case 14:h=e.org.pkijs.asn1.TIME;break;case 15:return u.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:u};case 16:h=e.org.pkijs.asn1.SEQUENCE;break;case 17:h=e.org.pkijs.asn1.SET;break;case 18:h=e.org.pkijs.asn1.NUMERICSTRING;break;case 19:h=e.org.pkijs.asn1.PRINTABLESTRING;break;case 20:h=e.org.pkijs.asn1.TELETEXSTRING;break;case 21:h=e.org.pkijs.asn1.VIDEOTEXSTRING;break;case 22:h=e.org.pkijs.asn1.IA5STRING;break;case 23:h=e.org.pkijs.asn1.UTCTIME;break;case 24:h=e.org.pkijs.asn1.GENERALIZEDTIME;break;case 25:h=e.org.pkijs.asn1.GRAPHICSTRING;break;case 26:h=e.org.pkijs.asn1.VISIBLESTRING;break;case 27:h=e.org.pkijs.asn1.GENERALSTRING;break;case 28:h=e.org.pkijs.asn1.UNIVERSALSTRING;break;case 29:h=e.org.pkijs.asn1.CHARACTERSTRING;break;case 30:h=e.org.pkijs.asn1.BMPSTRING;break;case 31:h=e.org.pkijs.asn1.DATE;break;case 32:h=e.org.pkijs.asn1.TIMEOFDAY;break;case 33:h=e.org.pkijs.asn1.DATETIME;break;case 34:h=e.org.pkijs.asn1.DURATION;break;default:var g;g=1==u.id_block.is_constructed?new e.org.pkijs.asn1.ASN1_CONSTRUCTED:new e.org.pkijs.asn1.ASN1_PRIMITIVE,g.id_block=u.id_block,g.len_block=u.len_block,g.warnings=u.warnings,u=g,p=u.fromBER(t,r,n)}break;case 2:case 3:case 4:default:h=1==u.id_block.is_constructed?e.org.pkijs.asn1.ASN1_CONSTRUCTED:e.org.pkijs.asn1.ASN1_PRIMITIVE}return u=i(u,h),p=u.fromBER(t,r,1==u.len_block.is_indefinite_form?n:u.len_block.length),u.value_before_decode=o(t,a,u.block_length),{offset:p,result:u}}if("undefined"==typeof e.org)e.org={};else if("object"!=typeof e.org)throw new Error("Name org already exists and it's not an object");if("undefined"==typeof e.org.pkijs)e.org.pkijs={};else if("object"!=typeof e.org.pkijs)throw new Error("Name org.pkijs already exists and it's not an object but "+typeof e.org.pkijs);if("undefined"==typeof e.org.pkijs.asn1)e.org.pkijs.asn1={};else if("object"!=typeof e.org.pkijs.asn1)throw new Error("Name org.pkijs.asn1 already exists and it's not an object but "+typeof e.org.pkijs.asn1);var p={};p.base_block=function(){arguments[0]instanceof Object?(this.block_length=e.org.pkijs.getValue(arguments[0],"block_length",0),this.error=e.org.pkijs.getValue(arguments[0],"error",new String),this.warnings=e.org.pkijs.getValue(arguments[0],"warnings",new Array),"value_before_decode"in arguments[0]?this.value_before_decode=s(arguments[0].value_before_decode):this.value_before_decode=new ArrayBuffer(0)):(this.block_length=0,this.error=new String,this.warnings=new Array,this.value_before_decode=new ArrayBuffer(0))},p.base_block.prototype.block_name=function(){return"base_block"},p.base_block.prototype.toJSON=function(){return{block_name:p.base_block.prototype.block_name.call(this),block_length:this.block_length,error:this.error,warnings:this.warnings,value_before_decode:e.org.pkijs.bufferToHexCodes(this.value_before_decode,0,this.value_before_decode.byteLength)}},p.hex_block=function(){p.base_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!1),"value_hex"in arguments[0]?this.value_hex=s(arguments[0].value_hex):this.value_hex=new ArrayBuffer(0)):(this.is_hex_only=!1,this.value_hex=new ArrayBuffer(0))},p.hex_block.prototype=new p.base_block,p.hex_block.constructor=p.hex_block,p.hex_block.prototype.block_name=function(){return"hex_block"},p.hex_block.prototype.fromBER=function(e,t,r){if(c.call(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0==n.length)return this.warnings.push("Zero buffer length"),t;this.value_hex=new ArrayBuffer(r);for(var i=new Uint8Array(this.value_hex),s=0;s<n.length;s++)i[s]=n[s];return this.block_length=r,t+r},p.hex_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.is_hex_only!==!0)return this.error='Flag "is_hex_only" is not set, abort',new ArrayBuffer(0);var t=new ArrayBuffer(this.value_hex.byteLength);if(e===!0)return t;for(var r=new Uint8Array(t),n=new Uint8Array(this.value_hex),i=0;i<n.length;i++)r[i]=n[i];return t},p.hex_block.prototype.toJSON=function(){var t=p.base_block.prototype.toJSON.call(this);return t.block_name=p.hex_block.prototype.block_name.call(this),t.is_hex_only=this.is_hex_only,t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t},p.identification_block=function(){p.hex_block.call(this,arguments[0]),this.tag_class=-1,this.tag_number=-1,this.is_constructed=!1,arguments[0]instanceof Object&&"id_block"in arguments[0]&&(this.is_hex_only=e.org.pkijs.getValue(arguments[0].id_block,"is_hex_only",!1),this.value_hex=e.org.pkijs.getValue(arguments[0].id_block,"value_hex",new ArrayBuffer(0)),this.tag_class=e.org.pkijs.getValue(arguments[0].id_block,"tag_class",-1),this.tag_number=e.org.pkijs.getValue(arguments[0].id_block,"tag_number",-1),this.is_constructed=e.org.pkijs.getValue(arguments[0].id_block,"is_constructed",!1))},p.identification_block.prototype=new p.hex_block,p.identification_block.constructor=p.identification_block,p.identification_block.prototype.block_name=function(){return"identification_block"},p.identification_block.prototype.toBER=function(e){"undefined"==typeof e&&(e=!1);var t=0;switch(this.tag_class){case 1:t|=0;break;case 2:t|=64;break;case 3:t|=128;break;case 4:t|=192;break;default:return this.error="Unknown tag class",new ArrayBuffer(0)}if(this.is_constructed&&(t|=32),this.tag_number<31&&!this.is_hex_only){var n=new ArrayBuffer(1),i=new Uint8Array(n);if(!e){var s=this.tag_number;s&=31,t|=s,i[0]=t}return n}if(this.is_hex_only===!1){var o=r(this.tag_number,7),a=new Uint8Array(o),c=o.byteLength,n=new ArrayBuffer(c+1),i=new Uint8Array(n);if(i[0]=31|t,!e){for(var u=0;c-1>u;u++)i[u+1]=128|a[u];i[c]=a[c-1]}return n}var n=new ArrayBuffer(this.value_hex.byteLength+1),i=new Uint8Array(n);if(i[0]=31|t,e===!1){for(var l=new Uint8Array(this.value_hex),u=0;u<l.length-1;u++)i[u+1]=128|l[u];i[this.value_hex.byteLength]=l[l.length-1]}return n},p.identification_block.prototype.fromBER=function(e,r,n){if(c.call(this,e,r,n)===!1)return-1;var i=new Uint8Array(e,r,n);if(0==i.length)return this.error="Zero buffer length",-1;var s=192&i[0];switch(s){case 0:this.tag_class=1;break;case 64:this.tag_class=2;break;case 128:this.tag_class=3;break;case 192:this.tag_class=4;break;default:return this.error="Unknown tag class",-1}this.is_constructed=32==(32&i[0]),this.is_hex_only=!1;var o=31&i[0];if(31!=o)this.tag_number=o,this.block_length=1;else{var a=1;this.value_hex=new ArrayBuffer(255);for(var u=255,l=new Uint8Array(this.value_hex);128&i[a];){if(l[a-1]=127&i[a],a++,a>=i.length)return this.error="End of input reached before message was fully decoded",-1;if(a==u){u+=255;for(var p=new ArrayBuffer(u),h=new Uint8Array(p),g=0;g<l.length;g++)h[g]=l[g];this.value_hex=new ArrayBuffer(u),l=new Uint8Array(this.value_hex)}}this.block_length=a+1,l[a-1]=127&i[a];for(var p=new ArrayBuffer(a),h=new Uint8Array(p),g=0;a>g;g++)h[g]=l[g];this.value_hex=new ArrayBuffer(a),l=new Uint8Array(this.value_hex),l.set(h),this.block_length<=9?this.tag_number=t(l,7):(this.is_hex_only=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(1==this.tag_class&&this.is_constructed)switch(this.tag_number){case 1:case 2:case 5:case 6:case 9:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.block_length},p.identification_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.identification_block.prototype.block_name.call(this),e.tag_class=this.tag_class,e.tag_number=this.tag_number,e.is_constructed=this.is_constructed,e},p.length_block=function(){p.base_block.call(this,arguments[0]),this.is_indefinite_form=!1,this.long_form_used=!1,this.length=0,arguments[0]instanceof Object&&"len_block"in arguments[0]&&(this.is_indefinite_form=e.org.pkijs.getValue(arguments[0].len_block,"is_indefinite_form",!1),this.long_form_used=e.org.pkijs.getValue(arguments[0].len_block,"long_form_used",!1),this.length=e.org.pkijs.getValue(arguments[0].len_block,"length",0))},p.length_block.prototype=new p.base_block,p.length_block.constructor=p.length_block,p.length_block.prototype.block_name=function(){return"length_block"},p.length_block.prototype.fromBER=function(e,r,n){if(c.call(this,e,r,n)===!1)return-1;var i=new Uint8Array(e,r,n);if(0==i.length)return this.error="Zero buffer length",-1;if(255==i[0])return this.error="Length block 0xFF is reserved by standard",-1;if(this.is_indefinite_form=128==i[0],1==this.is_indefinite_form)return this.block_length=1,r+this.block_length;if(this.long_form_used=!!(128&i[0]),0==this.long_form_used)return this.length=i[0],this.block_length=1,r+this.block_length;var s=127&i[0];if(s>8)return this.error="Too big integer",-1;if(s+1>i.length)return this.error="End of input reached before message was fully decoded",-1;for(var o=new Uint8Array(s),a=0;s>a;a++)o[a]=i[a+1];return 0==o[s-1]&&this.warnings.push("Needlessly long encoded length"),this.length=t(o,8),this.long_form_used&&this.length<=127&&this.warnings.push("Unneccesary usage of long length form"),this.block_length=s+1,r+this.block_length},p.length_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.length>127&&(this.long_form_used=!0),this.is_indefinite_form){var t=new ArrayBuffer(1);if(e===!1){var n=new Uint8Array(t);n[0]=128}return t}if(this.long_form_used===!0){var i=r(this.length,8);if(i.byteLength>127)return this.error="Too big length",new ArrayBuffer(0);var t=new ArrayBuffer(i.byteLength+1);if(e===!0)return t;var s=new Uint8Array(i),n=new Uint8Array(t);n[0]=128|i.byteLength;for(var o=0;o<i.byteLength;o++)n[o+1]=s[o];return t}var t=new ArrayBuffer(1);if(e===!1){var n=new Uint8Array(t);n[0]=this.length}return t},p.length_block.prototype.toJSON=function(){var e=p.base_block.prototype.toJSON.call(this);return e.block_name=p.length_block.prototype.block_name.call(this),e.is_indefinite_form=this.is_indefinite_form,e.long_form_used=this.long_form_used,e.length=this.length,e},p.value_block=function(){p.base_block.call(this,arguments[0])},p.value_block.prototype=new p.base_block,p.value_block.constructor=p.value_block,p.value_block.prototype.block_name=function(){return"value_block"},p.value_block.prototype.toJSON=function(){var e=p.base_block.prototype.toJSON.call(this);return e.block_name=p.value_block.prototype.block_name.call(this),e},e.org.pkijs.asn1.ASN1_block=function(){p.base_block.call(this,arguments[0]),arguments[0]instanceof Object&&(this.name=e.org.pkijs.getValue(arguments[0],"name",""),this.optional=e.org.pkijs.getValue(arguments[0],"optional",!1),"primitive_schema"in arguments[0]&&(this.primitive_schema=arguments[0].primitive_schema)),this.id_block=new p.identification_block(arguments[0]),this.len_block=new p.length_block(arguments[0]),this.value_block=new p.value_block(arguments[0])},e.org.pkijs.asn1.ASN1_block.prototype=new p.base_block,e.org.pkijs.asn1.ASN1_block.constructor=e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.ASN1_block.prototype.block_name=function(){return"ASN1_block"},e.org.pkijs.asn1.ASN1_block.prototype.fromBER=function(e,t,r){var n=this.value_block.fromBER(e,t,1==this.len_block.is_indefinite_form?r:this.len_block.length);return-1==n?(this.error=this.value_block.error,n):(0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),n)},e.org.pkijs.asn1.ASN1_block.prototype.toBER=function(e){"undefined"==typeof e&&(e=!1);var t,r=this.id_block.toBER(e),n=this.value_block.toBER(!0);this.len_block.length=n.byteLength;var i=this.len_block.toBER(e);t=a(r,i);var s;if(s=e===!1?this.value_block.toBER(e):new ArrayBuffer(this.len_block.length),t=a(t,s),this.len_block.is_indefinite_form===!0){var o=new ArrayBuffer(2);if(e===!1){var c=new Uint8Array(o);c[0]=0,c[1]=0}t=a(t,o)}return t},e.org.pkijs.asn1.ASN1_block.prototype.toJSON=function(){var t=p.base_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.ASN1_block.prototype.block_name.call(this),t.id_block=this.id_block.toJSON(),t.len_block=this.len_block.toJSON(),t.value_block=this.value_block.toJSON(),"name"in this&&(t.name=this.name),"optional"in this&&(t.optional=this.optional),"primitive_schema"in this&&(t.primitive_schema=this.primitive_schema.toJSON()),t},p.ASN1_PRIMITIVE_value_block=function(){p.value_block.call(this,arguments[0]),arguments[0]instanceof Object?("value_hex"in arguments[0]?this.value_hex=s(arguments[0].value_hex):this.value_hex=new ArrayBuffer(0),this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!0)):(this.value_hex=new ArrayBuffer(0),this.is_hex_only=!0)},p.ASN1_PRIMITIVE_value_block.prototype=new p.value_block,p.ASN1_PRIMITIVE_value_block.constructor=p.ASN1_PRIMITIVE_value_block,p.ASN1_PRIMITIVE_value_block.prototype.fromBER=function(e,t,r){if(c.call(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);if(0==n.length)return this.warnings.push("Zero buffer length"),t;this.value_hex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.value_hex),s=0;s<n.length;s++)i[s]=n[s];return this.block_length=r,t+r},p.ASN1_PRIMITIVE_value_block.prototype.toBER=function(e){return s(this.value_hex)},p.ASN1_PRIMITIVE_value_block.prototype.block_name=function(){return"ASN1_PRIMITIVE_value_block"},p.ASN1_PRIMITIVE_value_block.prototype.toJSON=function(){var t=p.value_block.prototype.toJSON.call(this);return t.block_name=p.ASN1_PRIMITIVE_value_block.prototype.block_name.call(this),t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t.is_hex_only=this.is_hex_only,t},e.org.pkijs.asn1.ASN1_PRIMITIVE=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.id_block.is_constructed=!1,this.value_block=new p.ASN1_PRIMITIVE_value_block(arguments[0])},e.org.pkijs.asn1.ASN1_PRIMITIVE.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.ASN1_PRIMITIVE.constructor=e.org.pkijs.asn1.ASN1_PRIMITIVE,e.org.pkijs.asn1.ASN1_PRIMITIVE.prototype.block_name=function(){return"PRIMITIVE"},e.org.pkijs.asn1.ASN1_PRIMITIVE.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.ASN1_PRIMITIVE.prototype.block_name.call(this),t},p.ASN1_CONSTRUCTED_value_block=function(){p.value_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.value=e.org.pkijs.getValue(arguments[0],"value",new Array),this.is_indefinite_form=e.org.pkijs.getValue(arguments[0],"is_indefinite_form",!1)):(this.value=new Array,this.is_indefinite_form=!1)},p.ASN1_CONSTRUCTED_value_block.prototype=new p.value_block,p.ASN1_CONSTRUCTED_value_block.constructor=p.ASN1_CONSTRUCTED_value_block,p.ASN1_CONSTRUCTED_value_block.prototype.fromBER=function(t,r,n){function i(e,t){return 1==e?1:t}var s=r,a=n;if(c.call(this,t,r,n)===!1)return-1;var u=new Uint8Array(t,r,n);if(0==u.length)return this.warnings.push("Zero buffer length"),r;for(var p=r;i(this.is_indefinite_form,n)>0;){var h=l(t,p,n);if(-1==h.offset)return this.error=h.result.error,this.warnings.concat(h.result.warnings),-1;if(p=h.offset,this.block_length+=h.result.block_length,n-=h.result.block_length,this.value.push(h.result),1==this.is_indefinite_form&&h.result.block_name()==e.org.pkijs.asn1.EOC.prototype.block_name())break}return 1==this.is_indefinite_form&&(this.value[this.value.length-1].block_name()==e.org.pkijs.asn1.EOC.prototype.block_name()?this.value.pop():this.warnings.push("No EOC block encoded")),this.value_before_decode=o(t,s,a),p},p.ASN1_CONSTRUCTED_value_block.prototype.toBER=function(e){"undefined"==typeof e&&(e=!1);for(var t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);t=a(t,n)}return t},p.ASN1_CONSTRUCTED_value_block.prototype.block_name=function(){return"ASN1_CONSTRUCTED_value_block"},p.ASN1_CONSTRUCTED_value_block.prototype.toJSON=function(){var e=p.value_block.prototype.toJSON.call(this);e.block_name=p.ASN1_CONSTRUCTED_value_block.prototype.block_name.call(this),e.is_indefinite_form=this.is_indefinite_form,e.value=new Array;for(var t=0;t<this.value.length;t++)e.value.push(this.value[t].toJSON());return e},e.org.pkijs.asn1.ASN1_CONSTRUCTED=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.id_block.is_constructed=!0,this.value_block=new p.ASN1_CONSTRUCTED_value_block(arguments[0])},e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.ASN1_CONSTRUCTED.constructor=e.org.pkijs.asn1.ASN1_CONSTRUCTED,e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.block_name=function(){return"CONSTRUCTED"},e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.fromBER=function(e,t,r){this.value_block.is_indefinite_form=this.len_block.is_indefinite_form;var n=this.value_block.fromBER(e,t,1==this.len_block.is_indefinite_form?r:this.len_block.length);return-1==n?(this.error=this.value_block.error,n):(0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),n)},e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.block_name.call(this),t},p.EOC_value_block=function(){p.value_block.call(this,arguments[0])},p.EOC_value_block.prototype=new p.value_block,p.EOC_value_block.constructor=p.EOC_value_block,p.EOC_value_block.prototype.fromBER=function(e,t,r){return t},p.EOC_value_block.prototype.toBER=function(e){return new ArrayBuffer(0)},p.EOC_value_block.prototype.block_name=function(){return"EOC_value_block"},p.EOC_value_block.prototype.toJSON=function(){var e=p.value_block.prototype.toJSON.call(this);return e.block_name=p.EOC_value_block.prototype.block_name.call(this),e},e.org.pkijs.asn1.EOC=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.EOC_value_block,this.id_block.tag_class=1,this.id_block.tag_number=0},e.org.pkijs.asn1.EOC.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.EOC.constructor=p.EOC_value_block,e.org.pkijs.asn1.EOC.prototype.block_name=function(){return"END_OF_CONTENT"},e.org.pkijs.asn1.EOC.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.EOC.prototype.block_name.call(this),t},p.BOOLEAN_value_block=function(){if(p.value_block.call(this,arguments[0]),arguments[0]instanceof Object){if(this.value=e.org.pkijs.getValue(arguments[0],"value",!1),this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!1),"value_hex"in arguments[0])this.value_hex=s(arguments[0].value_hex);else if(this.value_hex=new ArrayBuffer(1),this.value===!0){var t=new Uint8Array(this.value_hex);t[0]=255}}else this.value=!1,this.is_hex_only=!1,this.value_hex=new ArrayBuffer(1)},p.BOOLEAN_value_block.prototype=new p.value_block,p.BOOLEAN_value_block.constructor=p.BOOLEAN_value_block,p.BOOLEAN_value_block.prototype.fromBER=function(e,t,r){if(c.call(this,e,t,r)===!1)return-1;var n=new Uint8Array(e,t,r);r>1&&this.warnings.push("BOOLEAN value encoded in more then 1 octet"),this.value=0!=n[0],this.is_hex_only=!0,this.value_hex=new ArrayBuffer(n.length);for(var i=new Uint8Array(this.value_hex),s=0;s<n.length;s++)i[s]=n[s];return this.block_length=r,t+r},p.BOOLEAN_value_block.prototype.toBER=function(e){return"undefined"==typeof e&&(e=!1),this.value_hex},p.BOOLEAN_value_block.prototype.block_name=function(){return"BOOLEAN_value_block"},p.BOOLEAN_value_block.prototype.toJSON=function(){var t=p.value_block.prototype.toJSON.call(this);return t.block_name=p.BOOLEAN_value_block.prototype.block_name.call(this),t.value=this.value,t.is_hex_only=this.is_hex_only,t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t},e.org.pkijs.asn1.BOOLEAN=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.BOOLEAN_value_block(arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=1},e.org.pkijs.asn1.BOOLEAN.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.BOOLEAN.constructor=p.BOOLEAN_value_block,e.org.pkijs.asn1.BOOLEAN.prototype.block_name=function(){return"BOOLEAN"},e.org.pkijs.asn1.BOOLEAN.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.BOOLEAN.prototype.block_name.call(this),t},e.org.pkijs.asn1.SEQUENCE=function(){e.org.pkijs.asn1.ASN1_CONSTRUCTED.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=16},e.org.pkijs.asn1.SEQUENCE.prototype=new e.org.pkijs.asn1.ASN1_CONSTRUCTED,e.org.pkijs.asn1.SEQUENCE.constructor=e.org.pkijs.asn1.SEQUENCE,e.org.pkijs.asn1.SEQUENCE.prototype.block_name=function(){return"SEQUENCE"},e.org.pkijs.asn1.SEQUENCE.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.SEQUENCE.prototype.block_name.call(this),t},e.org.pkijs.asn1.SET=function(){e.org.pkijs.asn1.ASN1_CONSTRUCTED.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=17},e.org.pkijs.asn1.SET.prototype=new e.org.pkijs.asn1.ASN1_CONSTRUCTED,e.org.pkijs.asn1.SET.constructor=e.org.pkijs.asn1.SET,e.org.pkijs.asn1.SET.prototype.block_name=function(){return"SET"},e.org.pkijs.asn1.SET.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_CONSTRUCTED.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.SET.prototype.block_name.call(this),t},e.org.pkijs.asn1.NULL=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=5},e.org.pkijs.asn1.NULL.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.NULL.constructor=e.org.pkijs.asn1.NULL,e.org.pkijs.asn1.NULL.prototype.block_name=function(){return"NULL"},e.org.pkijs.asn1.NULL.prototype.fromBER=function(e,t,r){return this.len_block.length>0&&this.warnings.push("Non-zero length of value block for NULL type"),0===this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0===this.len_block.error.length&&(this.block_length+=this.len_block.block_length),this.block_length+=r,t+r},e.org.pkijs.asn1.NULL.prototype.toBER=function(e){"undefined"==typeof e&&(e=!1);var t=new ArrayBuffer(2);if(e===!0)return t;var r=new Uint8Array(t);return r[0]=5,r[1]=0,t},e.org.pkijs.asn1.NULL.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.NULL.prototype.block_name.call(this),t},p.OCTETSTRING_value_block=function(){p.ASN1_CONSTRUCTED_value_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.is_constructed=e.org.pkijs.getValue(arguments[0],"is_constructed",!1),this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!1),"value_hex"in arguments[0]?this.value_hex=s(arguments[0].value_hex):this.value_hex=new ArrayBuffer(0)):(this.is_constructed=!1,this.is_hex_only=!1,this.value_hex=new ArrayBuffer(0));
},p.OCTETSTRING_value_block.prototype=new p.ASN1_CONSTRUCTED_value_block,p.OCTETSTRING_value_block.constructor=p.OCTETSTRING_value_block,p.OCTETSTRING_value_block.prototype.fromBER=function(t,r,n){var i=0;if(1==this.is_constructed){if(this.is_hex_only=!1,i=p.ASN1_CONSTRUCTED_value_block.prototype.fromBER.call(this,t,r,n),-1==i)return i;for(var s=0;s<this.value.length;s++){var o=this.value[s].block_name();if(o==e.org.pkijs.asn1.EOC.prototype.block_name()){if(1==this.is_indefinite_form)break;return this.error="EOC is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(o!=e.org.pkijs.asn1.OCTETSTRING.prototype.block_name())return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.is_hex_only=!0,i=p.hex_block.prototype.fromBER.call(this,t,r,n),this.block_length=n;return i},p.OCTETSTRING_value_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.is_constructed===!0)return p.ASN1_CONSTRUCTED_value_block.prototype.toBER.call(this,e);var t=new ArrayBuffer(this.value_hex.byteLength);return e===!0?t:0==this.value_hex.byteLength?t:t=s(this.value_hex)},p.OCTETSTRING_value_block.prototype.block_name=function(){return"OCTETSTRING_value_block"},p.OCTETSTRING_value_block.prototype.toJSON=function(){var t=p.ASN1_CONSTRUCTED_value_block.prototype.toJSON.call(this);return t.block_name=p.OCTETSTRING_value_block.prototype.block_name.call(this),t.is_constructed=this.is_constructed,t.is_hex_only=this.is_hex_only,t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t},e.org.pkijs.asn1.OCTETSTRING=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.OCTETSTRING_value_block(arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=4},e.org.pkijs.asn1.OCTETSTRING.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.OCTETSTRING.constructor=e.org.pkijs.asn1.OCTETSTRING,e.org.pkijs.asn1.OCTETSTRING.prototype.fromBER=function(t,r,n){return this.value_block.is_constructed=this.id_block.is_constructed,this.value_block.is_indefinite_form=this.len_block.is_indefinite_form,0==n?(0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),r):e.org.pkijs.asn1.ASN1_block.prototype.fromBER.call(this,t,r,n)},e.org.pkijs.asn1.OCTETSTRING.prototype.block_name=function(){return"OCTETSTRING"},e.org.pkijs.asn1.OCTETSTRING.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.OCTETSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.OCTETSTRING.prototype.isEqual=function(t){return t instanceof e.org.pkijs.asn1.OCTETSTRING==0?!1:JSON.stringify(this)==JSON.stringify(t)},p.BITSTRING_value_block=function(){p.ASN1_CONSTRUCTED_value_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.unused_bits=e.org.pkijs.getValue(arguments[0],"unused_bits",0),this.is_constructed=e.org.pkijs.getValue(arguments[0],"is_constructed",!1),this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!1),"value_hex"in arguments[0]?this.value_hex=s(arguments[0].value_hex):this.value_hex=new ArrayBuffer(0),this.block_length=this.value_hex.byteLength):(this.unused_bits=0,this.is_constructed=!1,this.is_hex_only=!1,this.value_hex=new ArrayBuffer(0))},p.BITSTRING_value_block.prototype=new p.ASN1_CONSTRUCTED_value_block,p.BITSTRING_value_block.constructor=p.BITSTRING_value_block,p.BITSTRING_value_block.prototype.fromBER=function(t,r,n){if(0==n)return r;var i=-1;if(1==this.is_constructed){if(i=p.ASN1_CONSTRUCTED_value_block.prototype.fromBER.call(this,t,r,n),-1==i)return i;for(var s=0;s<this.value.length;s++){var o=this.value[s].block_name();if(o==e.org.pkijs.asn1.EOC.prototype.block_name()){if(1==this.is_indefinite_form)break;return this.error="EOC is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(o!=e.org.pkijs.asn1.BITSTRING.prototype.block_name())return this.error="BIT STRING may consists of BIT STRINGs only",-1;if(this.unused_bits>0&&this.value[s].unused_bits>0)return this.error='Usign of "unused bits" inside constructive BIT STRING allowed for least one only',-1;if(this.unused_bits=this.value[s].unused_bits,this.unused_bits>7)return this.error="Unused bits for BITSTRING must be in range 0-7",-1}return i}if(c.call(this,t,r,n)===!1)return-1;var a=new Uint8Array(t,r,n);if(this.unused_bits=a[0],this.unused_bits>7)return this.error="Unused bits for BITSTRING must be in range 0-7",-1;this.value_hex=new ArrayBuffer(a.length-1);for(var u=new Uint8Array(this.value_hex),s=0;n-1>s;s++)u[s]=a[s+1];return this.block_length=a.length,r+n},p.BITSTRING_value_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.is_constructed===!0)return p.ASN1_CONSTRUCTED_value_block.prototype.toBER.call(this,e);if(e===!0)return new ArrayBuffer(this.value_hex.byteLength+1);if(0==this.value_hex.byteLength)return new ArrayBuffer(0);var t=new Uint8Array(this.value_hex),r=new ArrayBuffer(this.value_hex.byteLength+1),n=new Uint8Array(r);n[0]=this.unused_bits;for(var i=0;i<this.value_hex.byteLength;i++)n[i+1]=t[i];return r},p.BITSTRING_value_block.prototype.block_name=function(){return"BITSTRING_value_block"},p.BITSTRING_value_block.prototype.toJSON=function(){var t=p.ASN1_CONSTRUCTED_value_block.prototype.toJSON.call(this);return t.block_name=p.BITSTRING_value_block.prototype.block_name.call(this),t.unused_bits=this.unused_bits,t.is_constructed=this.is_constructed,t.is_hex_only=this.is_hex_only,t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t},e.org.pkijs.asn1.BITSTRING=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.BITSTRING_value_block(arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=3},e.org.pkijs.asn1.BITSTRING.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.BITSTRING.constructor=e.org.pkijs.asn1.BITSTRING,e.org.pkijs.asn1.BITSTRING.prototype.block_name=function(){return"BITSTRING"},e.org.pkijs.asn1.BITSTRING.prototype.fromBER=function(t,r,n){return 0==n?r:(this.value_block.is_constructed=this.id_block.is_constructed,this.value_block.is_indefinite_form=this.len_block.is_indefinite_form,e.org.pkijs.asn1.ASN1_block.prototype.fromBER.call(this,t,r,n))},e.org.pkijs.asn1.BITSTRING.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.BITSTRING.prototype.block_name.call(this),t},p.INTEGER_value_block=function(){p.value_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.value_dec=e.org.pkijs.getValue(arguments[0],"value",0),this.is_hex_only=e.org.pkijs.getValue(arguments[0],"is_hex_only",!1),"value_hex"in arguments[0]?(this.value_hex=s(arguments[0].value_hex),this.value_hex.byteLength>=4?this.is_hex_only=!0:this.value_dec=i.call(this)):this.value_hex=n(this.value_dec)):(this.value_dec=0,this.is_hex_only=!1,this.value_hex=new ArrayBuffer(0))},p.INTEGER_value_block.prototype=new p.value_block,p.INTEGER_value_block.constructor=p.INTEGER_value_block,p.INTEGER_value_block.prototype.fromBER=function(e,t,r){var n=p.hex_block.prototype.fromBER.call(this,e,t,r);return-1==n?n:(this.value_hex.byteLength>4?(this.warnings.push("Too big INTEGER for decoding, hex only"),this.is_hex_only=!0):this.value_dec=i.call(this),this.block_length=r,t+r)},p.INTEGER_value_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.is_hex_only===!1){var t=n(this.value_dec);return 0==t.byteLength?(this.error="Error during encoding INTEGER value",new ArrayBuffer(0)):s(t)}return s(this.value_hex)},p.INTEGER_value_block.prototype.block_name=function(){return"INTEGER_value_block"},p.INTEGER_value_block.prototype.toJSON=function(){var t=p.value_block.prototype.toJSON.call(this);return t.block_name=p.INTEGER_value_block.prototype.block_name.call(this),t.value_dec=this.value_dec,t.is_hex_only=this.is_hex_only,t.value_hex=e.org.pkijs.bufferToHexCodes(this.value_hex,0,this.value_hex.byteLength),t},e.org.pkijs.asn1.INTEGER=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.INTEGER_value_block(arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=2},e.org.pkijs.asn1.INTEGER.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.INTEGER.constructor=e.org.pkijs.asn1.INTEGER,e.org.pkijs.asn1.INTEGER.prototype.block_name=function(){return"INTEGER"},e.org.pkijs.asn1.INTEGER.prototype.isEqual=function(){return arguments[0]instanceof e.org.pkijs.asn1.INTEGER?this.value_block.is_hex_only&&arguments[0].value_block.is_hex_only?e.org.pkijs.isEqual_buffer(this.value_block.value_hex,arguments[0].value_block.value_hex):this.value_block.is_hex_only===arguments[0].value_block.is_hex_only?this.value_block.value_dec==arguments[0].value_block.value_dec:!1:arguments[0]instanceof ArrayBuffer?e.org.pkijs.isEqual_buffer(this.value_block.value_hex,arguments[0]):!1},e.org.pkijs.asn1.INTEGER.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.INTEGER.prototype.block_name.call(this),t},e.org.pkijs.asn1.ENUMERATED=function(){e.org.pkijs.asn1.INTEGER.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=10},e.org.pkijs.asn1.ENUMERATED.prototype=new e.org.pkijs.asn1.INTEGER,e.org.pkijs.asn1.ENUMERATED.constructor=e.org.pkijs.asn1.ENUMERATED,e.org.pkijs.asn1.ENUMERATED.prototype.block_name=function(){return"ENUMERATED"},e.org.pkijs.asn1.ENUMERATED.prototype.toJSON=function(){var t=e.org.pkijs.asn1.INTEGER.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.ENUMERATED.prototype.block_name.call(this),t},p.SID_value_block=function(){p.hex_block.call(this,arguments[0]),arguments[0]instanceof Object?(this.value_dec=e.org.pkijs.getValue(arguments[0],"value_dec",-1),this.is_first_sid=e.org.pkijs.getValue(arguments[0],"is_first_sid",!1)):(this.value_dec=-1,this.is_first_sid=!1)},p.SID_value_block.prototype=new p.hex_block,p.SID_value_block.constructor=p.SID_value_block,p.SID_value_block.prototype.block_name=function(){return"sid_block"},p.SID_value_block.prototype.fromBER=function(e,r,n){if(0==n)return r;if(c.call(this,e,r,n)===!1)return-1;var i=new Uint8Array(e,r,n);this.value_hex=new ArrayBuffer(n);for(var o=new Uint8Array(this.value_hex),a=0;n>a&&(o[a]=127&i[a],this.block_length++,0!=(128&i[a]));a++);for(var u=new ArrayBuffer(this.block_length),l=new Uint8Array(u),a=0;a<this.block_length;a++)l[a]=o[a];return this.value_hex=s(u),o=new Uint8Array(this.value_hex),0!=(128&i[this.block_length-1])?(this.error="End of input reached before message was fully decoded",-1):(0==o[0]&&this.warnings.push("Needlessly long format of SID encoding"),this.block_length<=8?this.value_dec=t(o,7):(this.is_hex_only=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.block_length)},p.SID_value_block.prototype.toBER=function(e){if("undefined"==typeof e&&(e=!1),this.is_hex_only){if(e===!0)return new ArrayBuffer(this.value_hex.byteLength);for(var t=new Uint8Array(this.value_hex),n=new ArrayBuffer(this.block_length),i=new Uint8Array(n),s=0;s<this.block_length-1;s++)i[s]=128|t[s];return i[this.block_length-1]=t[this.block_length-1],n}var o=r(this.value_dec,7);if(0===o.byteLength)return this.error="Error during encoding SID value",new ArrayBuffer(0);var n=new ArrayBuffer(o.byteLength);if(e===!1){for(var a=new Uint8Array(o),i=new Uint8Array(n),s=0;s<o.byteLength-1;s++)i[s]=128|a[s];i[o.byteLength-1]=a[o.byteLength-1]}return n},p.SID_value_block.prototype.toString=function(){var e="";if(this.is_hex_only===!0)e=u(this.value_hex);else if(this.is_first_sid){var t=this.value_dec;this.value_dec<=39?e="0.":this.value_dec<=79?(e="1.",t-=40):(e="2.",t-=80),e+=t.toString()}else e=this.value_dec.toString();return e},p.SID_value_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.SID_value_block.prototype.block_name.call(this),e.value_dec=this.value_dec,e.is_first_sid=this.is_first_sid,e},p.OID_value_block=function(){p.value_block.call(this,arguments[0]),this.value=new Array,arguments[0]instanceof Object&&this.fromString(e.org.pkijs.getValue(arguments[0],"value",""))},p.OID_value_block.prototype=new p.value_block,p.OID_value_block.constructor=p.OID_value_block,p.OID_value_block.prototype.fromBER=function(e,t,r){for(var n=t;r>0;){var i=new p.SID_value_block;if(n=i.fromBER(e,n,r),-1==n)return this.block_length=0,this.error=i.error,n;0==this.value.length&&(i.is_first_sid=!0),this.block_length+=i.block_length,r-=i.block_length,this.value.push(i)}return n},p.OID_value_block.prototype.toBER=function(e){"undefined"==typeof e&&(e=!1);for(var t=new ArrayBuffer(0),r=0;r<this.value.length;r++){var n=this.value[r].toBER(e);if(0===n.byteLength)return this.error=this.value[r].error,new ArrayBuffer(0);t=a(t,n)}return t},p.OID_value_block.prototype.fromString=function(e){this.value=new Array;var t=0,r=0,n="",i=!1;do if(r=e.indexOf(".",t),n=-1===r?e.substr(t):e.substr(t,r-t),t=r+1,i){var s=this.value[0],o=0;switch(s.value_dec){case 0:break;case 1:o=40;break;case 2:o=80;break;default:return this.value=new Array,!1}var a=parseInt(n,10);if(isNaN(a))return!0;s.value_dec=a+o,i=!1}else{var s=new p.SID_value_block;if(s.value_dec=parseInt(n,10),isNaN(s.value_dec))return!0;0===this.value.length&&(s.is_first_sid=!0,i=!0),this.value.push(s)}while(-1!==r);return!0},p.OID_value_block.prototype.toString=function(){for(var e="",t=!1,r=0;r<this.value.length;r++){t=this.value[r].is_hex_only;var n=this.value[r].toString();0!==r&&(e+="."),t?(n="{"+n+"}",this.value[r].is_first_sid?e="2.{"+n+" - 80}":e+=n):e+=n}return e},p.OID_value_block.prototype.block_name=function(){return"OID_value_block"},p.OID_value_block.prototype.toJSON=function(){var e=p.value_block.prototype.toJSON.call(this);e.block_name=p.OID_value_block.prototype.block_name.call(this),e.value=p.OID_value_block.prototype.toString.call(this),e.sid_array=new Array;for(var t=0;t<this.value.length;t++)e.sid_array.push(this.value[t].toJSON());return e},e.org.pkijs.asn1.OID=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.OID_value_block(arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=6},e.org.pkijs.asn1.OID.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.OID.constructor=e.org.pkijs.asn1.OID,e.org.pkijs.asn1.OID.prototype.block_name=function(){return"OID"},e.org.pkijs.asn1.OID.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.OID.prototype.block_name.call(this),t},p.UTF8STRING_value_block=function(){p.hex_block.call(this,arguments[0]),this.is_hex_only=!0,this.value=""},p.UTF8STRING_value_block.prototype=new p.hex_block,p.UTF8STRING_value_block.constructor=p.UTF8STRING_value_block,p.UTF8STRING_value_block.prototype.block_name=function(){return"UTF8STRING_value_block"},p.UTF8STRING_value_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.UTF8STRING_value_block.prototype.block_name.call(this),e.value=this.value,e},e.org.pkijs.asn1.UTF8STRING=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.UTF8STRING_value_block,arguments[0]instanceof Object&&"value"in arguments[0]&&e.org.pkijs.asn1.UTF8STRING.prototype.fromString.call(this,arguments[0].value),this.id_block.tag_class=1,this.id_block.tag_number=12},e.org.pkijs.asn1.UTF8STRING.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.UTF8STRING.constructor=e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.UTF8STRING.prototype.block_name=function(){return"UTF8STRING"},e.org.pkijs.asn1.UTF8STRING.prototype.fromBER=function(t,r,n){var i=this.value_block.fromBER(t,r,1==this.len_block.is_indefinite_form?n:this.len_block.length);return-1==i?(this.error=this.value_block.error,i):(e.org.pkijs.asn1.UTF8STRING.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),i)},e.org.pkijs.asn1.UTF8STRING.prototype.fromBuffer=function(e){this.value_block.value=String.fromCharCode.apply(null,new Uint8Array(e));try{this.value_block.value=decodeURIComponent(escape(this.value_block.value))}catch(t){this.warnings.push('Error during "decodeURIComponent": '+t+", using raw string")}},e.org.pkijs.asn1.UTF8STRING.prototype.fromString=function(e){var t=unescape(encodeURIComponent(e)),r=t.length;this.value_block.value_hex=new ArrayBuffer(r);for(var n=new Uint8Array(this.value_block.value_hex),i=0;r>i;i++)n[i]=t.charCodeAt(i);this.value_block.value=e},e.org.pkijs.asn1.UTF8STRING.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.UTF8STRING.prototype.block_name.call(this),t},p.BMPSTRING_value_block=function(){p.hex_block.call(this,arguments[0]),this.is_hex_only=!0,this.value=""},p.BMPSTRING_value_block.prototype=new p.hex_block,p.BMPSTRING_value_block.constructor=p.BMPSTRING_value_block,p.BMPSTRING_value_block.prototype.block_name=function(){return"BMPSTRING_value_block"},p.BMPSTRING_value_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.BMPSTRING_value_block.prototype.block_name.call(this),e.value=this.value,e},e.org.pkijs.asn1.BMPSTRING=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.BMPSTRING_value_block,arguments[0]instanceof Object&&"value"in arguments[0]&&e.org.pkijs.asn1.BMPSTRING.prototype.fromString.call(this,arguments[0].value),this.id_block.tag_class=1,this.id_block.tag_number=30},e.org.pkijs.asn1.BMPSTRING.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.BMPSTRING.constructor=e.org.pkijs.asn1.BMPSTRING,e.org.pkijs.asn1.BMPSTRING.prototype.block_name=function(){return"BMPSTRING"},e.org.pkijs.asn1.BMPSTRING.prototype.fromBER=function(t,r,n){var i=this.value_block.fromBER(t,r,1==this.len_block.is_indefinite_form?n:this.len_block.length);return-1==i?(this.error=this.value_block.error,i):(e.org.pkijs.asn1.BMPSTRING.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),i)},e.org.pkijs.asn1.BMPSTRING.prototype.fromBuffer=function(t){for(var r=e.org.pkijs.copyBuffer(t),n=new Uint8Array(r),i=0;i<n.length;i+=2){var s=n[i];n[i]=n[i+1],n[i+1]=s}this.value_block.value=String.fromCharCode.apply(null,new Uint16Array(r))},e.org.pkijs.asn1.BMPSTRING.prototype.fromString=function(e){var t=e.length;this.value_block.value_hex=new ArrayBuffer(2*t);for(var n=new Uint8Array(this.value_block.value_hex),i=0;t>i;i++){var s=r(e.charCodeAt(i),8),o=new Uint8Array(s);if(!(o.length>2))for(var a=2-o.length,c=o.length-1;c>=0;c--)n[2*i+c+a]=o[c]}this.value_block.value=e},e.org.pkijs.asn1.BMPSTRING.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.BMPSTRING.prototype.block_name.call(this),t},p.UNIVERSALSTRING_value_block=function(){p.hex_block.call(this,arguments[0]),this.is_hex_only=!0,this.value=""},p.UNIVERSALSTRING_value_block.prototype=new p.hex_block,p.UNIVERSALSTRING_value_block.constructor=p.UNIVERSALSTRING_value_block,p.UNIVERSALSTRING_value_block.prototype.block_name=function(){return"UNIVERSALSTRING_value_block"},p.UNIVERSALSTRING_value_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.UNIVERSALSTRING_value_block.prototype.block_name.call(this),e.value=this.value,e},e.org.pkijs.asn1.UNIVERSALSTRING=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.UNIVERSALSTRING_value_block,arguments[0]instanceof Object&&"value"in arguments[0]&&e.org.pkijs.asn1.UNIVERSALSTRING.prototype.fromString.call(this,arguments[0].value),this.id_block.tag_class=1,this.id_block.tag_number=28},e.org.pkijs.asn1.UNIVERSALSTRING.prototype=new e.org.pkijs.asn1.ASN1_block,e.org.pkijs.asn1.UNIVERSALSTRING.constructor=e.org.pkijs.asn1.UNIVERSALSTRING,e.org.pkijs.asn1.UNIVERSALSTRING.prototype.block_name=function(){return"UNIVERSALSTRING"},e.org.pkijs.asn1.UNIVERSALSTRING.prototype.fromBER=function(t,r,n){var i=this.value_block.fromBER(t,r,1==this.len_block.is_indefinite_form?n:this.len_block.length);return-1==i?(this.error=this.value_block.error,i):(e.org.pkijs.asn1.UNIVERSALSTRING.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),i)},e.org.pkijs.asn1.UNIVERSALSTRING.prototype.fromBuffer=function(t){for(var r=e.org.pkijs.copyBuffer(t),n=new Uint8Array(r),i=0;i<n.length;i+=4)n[i]=n[i+3],n[i+1]=n[i+2],n[i+2]=0,n[i+3]=0;this.value_block.value=String.fromCharCode.apply(null,new Uint32Array(r))},e.org.pkijs.asn1.UNIVERSALSTRING.prototype.fromString=function(e){var t=e.length;this.value_block.value_hex=new ArrayBuffer(4*t);for(var n=new Uint8Array(this.value_block.value_hex),i=0;t>i;i++){var s=r(e.charCodeAt(i),8),o=new Uint8Array(s);if(!(o.length>4))for(var a=4-o.length,c=o.length-1;c>=0;c--)n[4*i+c+a]=o[c]}this.value_block.value=e},e.org.pkijs.asn1.UNIVERSALSTRING.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.UNIVERSALSTRING.prototype.block_name.call(this),t},p.SIMPLESTRING_value_block=function(){p.hex_block.call(this,arguments[0]),this.value="",this.is_hex_only=!0},p.SIMPLESTRING_value_block.prototype=new p.hex_block,p.SIMPLESTRING_value_block.constructor=p.SIMPLESTRING_value_block,p.SIMPLESTRING_value_block.prototype.block_name=function(){return"SIMPLESTRING_value_block"},p.SIMPLESTRING_value_block.prototype.toJSON=function(){var e=p.hex_block.prototype.toJSON.call(this);return e.block_name=p.SIMPLESTRING_value_block.prototype.block_name.call(this),e.value=this.value,e},p.SIMPLESTRING_block=function(){e.org.pkijs.asn1.ASN1_block.call(this,arguments[0]),this.value_block=new p.SIMPLESTRING_value_block,arguments[0]instanceof Object&&"value"in arguments[0]&&p.SIMPLESTRING_block.prototype.fromString.call(this,arguments[0].value)},p.SIMPLESTRING_block.prototype=new e.org.pkijs.asn1.ASN1_block,p.SIMPLESTRING_block.constructor=p.SIMPLESTRING_block,p.SIMPLESTRING_block.prototype.block_name=function(){return"SIMPLESTRING"},p.SIMPLESTRING_block.prototype.fromBER=function(e,t,r){var n=this.value_block.fromBER(e,t,1==this.len_block.is_indefinite_form?r:this.len_block.length);return-1==n?(this.error=this.value_block.error,n):(p.SIMPLESTRING_block.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),n)},p.SIMPLESTRING_block.prototype.fromBuffer=function(e){this.value_block.value=String.fromCharCode.apply(null,new Uint8Array(e))},p.SIMPLESTRING_block.prototype.fromString=function(e){var t=e.length;this.value_block.value_hex=new ArrayBuffer(t);for(var r=new Uint8Array(this.value_block.value_hex),n=0;t>n;n++)r[n]=e.charCodeAt(n);this.value_block.value=e},p.SIMPLESTRING_block.prototype.toJSON=function(){var t=e.org.pkijs.asn1.ASN1_block.prototype.toJSON.call(this);return t.block_name=p.SIMPLESTRING_block.prototype.block_name.call(this),t},e.org.pkijs.asn1.NUMERICSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=18},e.org.pkijs.asn1.NUMERICSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.NUMERICSTRING.constructor=e.org.pkijs.asn1.NUMERICSTRING,e.org.pkijs.asn1.NUMERICSTRING.prototype.block_name=function(){return"NUMERICSTRING"},e.org.pkijs.asn1.NUMERICSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.NUMERICSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.PRINTABLESTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=19},e.org.pkijs.asn1.PRINTABLESTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.PRINTABLESTRING.constructor=e.org.pkijs.asn1.PRINTABLESTRING,e.org.pkijs.asn1.PRINTABLESTRING.prototype.block_name=function(){return"PRINTABLESTRING"},e.org.pkijs.asn1.PRINTABLESTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.PRINTABLESTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.TELETEXSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=20},e.org.pkijs.asn1.TELETEXSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.TELETEXSTRING.constructor=e.org.pkijs.asn1.TELETEXSTRING,e.org.pkijs.asn1.TELETEXSTRING.prototype.block_name=function(){return"TELETEXSTRING"},e.org.pkijs.asn1.TELETEXSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.TELETEXSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.VIDEOTEXSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=21},e.org.pkijs.asn1.VIDEOTEXSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.VIDEOTEXSTRING.constructor=e.org.pkijs.asn1.VIDEOTEXSTRING,e.org.pkijs.asn1.VIDEOTEXSTRING.prototype.block_name=function(){return"VIDEOTEXSTRING"},e.org.pkijs.asn1.VIDEOTEXSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.VIDEOTEXSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.IA5STRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=22},e.org.pkijs.asn1.IA5STRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.IA5STRING.constructor=e.org.pkijs.asn1.IA5STRING,e.org.pkijs.asn1.IA5STRING.prototype.block_name=function(){return"IA5STRING"},e.org.pkijs.asn1.IA5STRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.IA5STRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.GRAPHICSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=25},e.org.pkijs.asn1.GRAPHICSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.GRAPHICSTRING.constructor=e.org.pkijs.asn1.GRAPHICSTRING,e.org.pkijs.asn1.GRAPHICSTRING.prototype.block_name=function(){return"GRAPHICSTRING"},e.org.pkijs.asn1.GRAPHICSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.GRAPHICSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.VISIBLESTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=26},e.org.pkijs.asn1.VISIBLESTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.VISIBLESTRING.constructor=e.org.pkijs.asn1.VISIBLESTRING,e.org.pkijs.asn1.VISIBLESTRING.prototype.block_name=function(){return"VISIBLESTRING"},e.org.pkijs.asn1.VISIBLESTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.VISIBLESTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.GENERALSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=27},e.org.pkijs.asn1.GENERALSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.GENERALSTRING.constructor=e.org.pkijs.asn1.GENERALSTRING,e.org.pkijs.asn1.GENERALSTRING.prototype.block_name=function(){return"GENERALSTRING"},e.org.pkijs.asn1.GENERALSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.GENERALSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.CHARACTERSTRING=function(){p.SIMPLESTRING_block.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=29},e.org.pkijs.asn1.CHARACTERSTRING.prototype=new p.SIMPLESTRING_block,e.org.pkijs.asn1.CHARACTERSTRING.constructor=e.org.pkijs.asn1.CHARACTERSTRING,e.org.pkijs.asn1.CHARACTERSTRING.prototype.block_name=function(){return"CHARACTERSTRING"},e.org.pkijs.asn1.CHARACTERSTRING.prototype.toJSON=function(){var t=p.SIMPLESTRING_block.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.CHARACTERSTRING.prototype.block_name.call(this),t},e.org.pkijs.asn1.UTCTIME=function(){if(e.org.pkijs.asn1.VISIBLESTRING.call(this,arguments[0]),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,arguments[0]instanceof Object&&"value"in arguments[0]){e.org.pkijs.asn1.UTCTIME.prototype.fromString.call(this,arguments[0].value),this.value_block.value_hex=new ArrayBuffer(arguments[0].value.length);for(var t=new Uint8Array(this.value_block.value_hex),r=0;r<arguments[0].value.length;r++)t[r]=arguments[0].value.charCodeAt(r)}arguments[0]instanceof Object&&"value_date"in arguments[0]&&(e.org.pkijs.asn1.UTCTIME.prototype.fromDate.call(this,arguments[0].value_date),this.value_block.value_hex=e.org.pkijs.asn1.UTCTIME.prototype.toBuffer.call(this)),this.id_block.tag_class=1,this.id_block.tag_number=23},e.org.pkijs.asn1.UTCTIME.prototype=new e.org.pkijs.asn1.VISIBLESTRING,e.org.pkijs.asn1.UTCTIME.constructor=e.org.pkijs.asn1.UTCTIME,e.org.pkijs.asn1.UTCTIME.prototype.fromBER=function(t,r,n){var i=this.value_block.fromBER(t,r,1==this.len_block.is_indefinite_form?n:this.len_block.length);return-1==i?(this.error=this.value_block.error,i):(e.org.pkijs.asn1.UTCTIME.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),i)},e.org.pkijs.asn1.UTCTIME.prototype.fromBuffer=function(t){e.org.pkijs.asn1.UTCTIME.prototype.fromString.call(this,String.fromCharCode.apply(null,new Uint8Array(t)))},e.org.pkijs.asn1.UTCTIME.prototype.toBuffer=function(){for(var t=e.org.pkijs.asn1.UTCTIME.prototype.toString.call(this),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return r},e.org.pkijs.asn1.UTCTIME.prototype.fromDate=function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()},e.org.pkijs.asn1.UTCTIME.prototype.toDate=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))},e.org.pkijs.asn1.UTCTIME.prototype.fromString=function(e){var t=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/gi,r=t.exec(e);if(null===r)return void(this.error="Wrong input string for convertion");var n=parseInt(r[1],10);n>=50?this.year=1900+n:this.year=2e3+n,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)},e.org.pkijs.asn1.UTCTIME.prototype.toString=function(){var t=new Array(7);return t[0]=e.org.pkijs.padNumber(this.year<2e3?this.year-1900:this.year-2e3,2),t[1]=e.org.pkijs.padNumber(this.month,2),t[2]=e.org.pkijs.padNumber(this.day,2),t[3]=e.org.pkijs.padNumber(this.hour,2),t[4]=e.org.pkijs.padNumber(this.minute,2),t[5]=e.org.pkijs.padNumber(this.second,2),
t[6]="Z",t.join("")},e.org.pkijs.asn1.UTCTIME.prototype.block_name=function(){return"UTCTIME"},e.org.pkijs.asn1.UTCTIME.prototype.toJSON=function(){var t=e.org.pkijs.asn1.VISIBLESTRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.UTCTIME.prototype.block_name.call(this),t.year=this.year,t.month=this.month,t.day=this.day,t.hour=this.hour,t.minute=this.minute,t.second=this.second,t},e.org.pkijs.asn1.GENERALIZEDTIME=function(){if(e.org.pkijs.asn1.VISIBLESTRING.call(this,arguments[0]),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,this.millisecond=0,arguments[0]instanceof Object&&"value"in arguments[0]){e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromString.call(this,arguments[0].value),this.value_block.value_hex=new ArrayBuffer(arguments[0].value.length);for(var t=new Uint8Array(this.value_block.value_hex),r=0;r<arguments[0].value.length;r++)t[r]=arguments[0].value.charCodeAt(r)}arguments[0]instanceof Object&&"value_date"in arguments[0]&&(e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromDate.call(this,arguments[0].value_date),this.value_block.value_hex=e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toBuffer.call(this)),this.id_block.tag_class=1,this.id_block.tag_number=24},e.org.pkijs.asn1.GENERALIZEDTIME.prototype=new e.org.pkijs.asn1.VISIBLESTRING,e.org.pkijs.asn1.GENERALIZEDTIME.constructor=e.org.pkijs.asn1.GENERALIZEDTIME,e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromBER=function(t,r,n){var i=this.value_block.fromBER(t,r,1==this.len_block.is_indefinite_form?n:this.len_block.length);return-1==i?(this.error=this.value_block.error,i):(e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromBuffer.call(this,this.value_block.value_hex),0==this.id_block.error.length&&(this.block_length+=this.id_block.block_length),0==this.len_block.error.length&&(this.block_length+=this.len_block.block_length),0==this.value_block.error.length&&(this.block_length+=this.value_block.block_length),i)},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromBuffer=function(t){e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromString.call(this,String.fromCharCode.apply(null,new Uint8Array(t)))},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toBuffer=function(){for(var t=e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toString.call(this),r=new ArrayBuffer(t.length),n=new Uint8Array(r),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return r},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromDate=function(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth(),this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds(),this.millisecond=e.getUTCMilliseconds()},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toDate=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.fromString=function(e){var t,r=!1,n="",i="",s=0,o=0,a=0;if("Z"==e[e.length-1])n=e.substr(0,e.length-1),r=!0;else{var c=new Number(e[e.length-1]);if(isNaN(c.valueOf()))throw new Error("Wrong input string for convertion");n=e}if(r){if(-1!=n.indexOf("+"))throw new Error("Wrong input string for convertion");if(-1!=n.indexOf("-"))throw new Error("Wrong input string for convertion")}else{var u=1,l=n.indexOf("+"),p="";if(-1==l&&(l=n.indexOf("-"),u=-1),-1!=l){if(p=n.substr(l+1),n=n.substr(0,l),2!=p.length&&4!=p.length)throw new Error("Wrong input string for convertion");var c=new Number(p.substr(0,2));if(isNaN(c.valueOf()))throw new Error("Wrong input string for convertion");if(o=u*c,4==p.length){if(c=new Number(p.substr(2,2)),isNaN(c.valueOf()))throw new Error("Wrong input string for convertion");a=u*c}}}var h=n.indexOf(".");if(-1==h&&(h=n.indexOf(",")),-1!=h){var g=new Number("0"+n.substr(h));if(isNaN(g.valueOf()))throw new Error("Wrong input string for convertion");s=g.valueOf(),i=n.substr(0,h)}else i=n;switch(!0){case 8==i.length:if(t=/(\d{4})(\d{2})(\d{2})/gi,-1!==h)throw new Error("Wrong input string for convertion");break;case 10==i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})/gi,-1!==h){var f=60*s;this.minute=Math.floor(f),f=60*(f-this.minute),this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case 12==i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==h){var f=60*s;this.second=Math.floor(f),f=1e3*(f-this.second),this.millisecond=Math.floor(f)}break;case 14==i.length:if(t=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/gi,-1!==h){var f=1e3*s;this.millisecond=Math.floor(f)}break;default:throw new Error("Wrong input string for convertion")}var m=t.exec(i);if(null==m)throw new Error("Wrong input string for convertion");for(var _=1;_<m.length;_++)switch(_){case 1:this.year=parseInt(m[_],10);break;case 2:this.month=parseInt(m[_],10)-1;break;case 3:this.day=parseInt(m[_],10);break;case 4:this.hour=parseInt(m[_],10)+o;break;case 5:this.minute=parseInt(m[_],10)+a;break;case 6:this.second=parseInt(m[_],10);break;default:throw new Error("Wrong input string for convertion")}if(0==r){var k=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=k.getUTCFullYear(),this.month=k.getUTCMonth(),this.day=k.getUTCDay(),this.hour=k.getUTCHours(),this.minute=k.getUTCMinutes(),this.second=k.getUTCSeconds(),this.millisecond=k.getUTCMilliseconds()}},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toString=function(){var t=new Array;return t.push(e.org.pkijs.padNumber(this.year,4)),t.push(e.org.pkijs.padNumber(this.month,2)),t.push(e.org.pkijs.padNumber(this.day,2)),t.push(e.org.pkijs.padNumber(this.hour,2)),t.push(e.org.pkijs.padNumber(this.minute,2)),t.push(e.org.pkijs.padNumber(this.second,2)),0!=this.millisecond&&(t.push("."),t.push(e.org.pkijs.padNumber(this.millisecond,3))),t.push("Z"),t.join("")},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.block_name=function(){return"GENERALIZEDTIME"},e.org.pkijs.asn1.GENERALIZEDTIME.prototype.toJSON=function(){var t=e.org.pkijs.asn1.VISIBLESTRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.GENERALIZEDTIME.prototype.block_name.call(this),t.year=this.year,t.month=this.month,t.day=this.day,t.hour=this.hour,t.minute=this.minute,t.second=this.second,t.millisecond=this.millisecond,t},e.org.pkijs.asn1.DATE=function(){e.org.pkijs.asn1.UTF8STRING.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=31},e.org.pkijs.asn1.DATE.prototype=new e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.DATE.constructor=e.org.pkijs.asn1.DATE,e.org.pkijs.asn1.DATE.prototype.block_name=function(){return"DATE"},e.org.pkijs.asn1.DATE.prototype.toJSON=function(){var t=e.org.pkijs.asn1.UTF8STRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.DATE.prototype.block_name.call(this),t},e.org.pkijs.asn1.TIMEOFDAY=function(){e.org.pkijs.asn1.UTF8STRING.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=32},e.org.pkijs.asn1.TIMEOFDAY.prototype=new e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.TIMEOFDAY.constructor=e.org.pkijs.asn1.TIMEOFDAY,e.org.pkijs.asn1.TIMEOFDAY.prototype.block_name=function(){return"TIMEOFDAY"},e.org.pkijs.asn1.TIMEOFDAY.prototype.toJSON=function(){var t=e.org.pkijs.asn1.UTF8STRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.TIMEOFDAY.prototype.block_name.call(this),t},e.org.pkijs.asn1.DATETIME=function(){e.org.pkijs.asn1.UTF8STRING.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=33},e.org.pkijs.asn1.DATETIME.prototype=new e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.DATETIME.constructor=e.org.pkijs.asn1.DATETIME,e.org.pkijs.asn1.DATETIME.prototype.block_name=function(){return"DATETIME"},e.org.pkijs.asn1.DATETIME.prototype.toJSON=function(){var t=e.org.pkijs.asn1.UTF8STRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.DATETIME.prototype.block_name.call(this),t},e.org.pkijs.asn1.DURATION=function(){e.org.pkijs.asn1.UTF8STRING.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=34},e.org.pkijs.asn1.DURATION.prototype=new e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.DURATION.constructor=e.org.pkijs.asn1.DURATION,e.org.pkijs.asn1.DURATION.prototype.block_name=function(){return"DURATION"},e.org.pkijs.asn1.DURATION.prototype.toJSON=function(){var t=e.org.pkijs.asn1.UTF8STRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.DURATION.prototype.block_name.call(this),t},e.org.pkijs.asn1.TIME=function(){e.org.pkijs.asn1.UTF8STRING.call(this,arguments[0]),this.id_block.tag_class=1,this.id_block.tag_number=14},e.org.pkijs.asn1.TIME.prototype=new e.org.pkijs.asn1.UTF8STRING,e.org.pkijs.asn1.TIME.constructor=e.org.pkijs.asn1.TIME,e.org.pkijs.asn1.TIME.prototype.block_name=function(){return"TIME"},e.org.pkijs.asn1.TIME.prototype.toJSON=function(){var t=e.org.pkijs.asn1.UTF8STRING.prototype.toJSON.call(this);return t.block_name=e.org.pkijs.asn1.TIME.prototype.block_name.call(this),t},e.org.pkijs.asn1.CHOICE=function(){arguments[0]instanceof Object&&(this.value=e.org.pkijs.getValue(arguments[0],"value",new Array),this.optional=e.org.pkijs.getValue(arguments[0],"optional",!1))},e.org.pkijs.asn1.ANY=function(){arguments[0]instanceof Object&&(this.name=e.org.pkijs.getValue(arguments[0],"name",""),this.optional=e.org.pkijs.getValue(arguments[0],"optional",!1))},e.org.pkijs.asn1.REPEATED=function(){arguments[0]instanceof Object&&(this.name=e.org.pkijs.getValue(arguments[0],"name",""),this.optional=e.org.pkijs.getValue(arguments[0],"optional",!1),this.value=e.org.pkijs.getValue(arguments[0],"value",new e.org.pkijs.asn1.ANY),this.local=e.org.pkijs.getValue(arguments[0],"local",!1))},e.org.pkijs.fromBER=function(t){if(0==t.byteLength){var r=new e.org.pkijs.asn1.ASN1_block;return r.error="Input buffer has zero length",{offset:-1,result:r}}return l(t,0,t.byteLength)},e.org.pkijs.compareSchema=function(t,r,n){if(n instanceof e.org.pkijs.asn1.CHOICE){for(var i=!1,s=0;s<n.value.length;s++){var o=e.org.pkijs.compareSchema(t,r,n.value[s]);if(o.verified===!0)return{verified:!0,result:t}}if(i===!1){var a={verified:!1,result:{error:"Wrong values for CHOICE type"}};return n.hasOwnProperty("name")&&(a.name=n.name),a}}if(n instanceof e.org.pkijs.asn1.ANY)return n.hasOwnProperty("name")&&(t[n.name]=r),{verified:!0,result:t};if(t instanceof Object==0)return{verified:!1,result:{error:"Wrong root object"}};if(r instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(n instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("id_block"in n==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("fromBER"in n.id_block==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if("toBER"in n.id_block==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var c=n.id_block.toBER(!1);if(0===c.byteLength)return{verified:!1,result:{error:"Error encoding id_block for ASN.1 schema"}};var u=n.id_block.fromBER(c,0,c.byteLength);if(-1===u)return{verified:!1,result:{error:"Error decoding id_block for ASN.1 schema"}};if(n.id_block.hasOwnProperty("tag_class")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.id_block.tag_class!==r.id_block.tag_class)return{verified:!1,result:t};if(n.id_block.hasOwnProperty("tag_number")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.id_block.tag_number!==r.id_block.tag_number)return{verified:!1,result:t};if(n.id_block.hasOwnProperty("is_constructed")===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.id_block.is_constructed!==r.id_block.is_constructed)return{verified:!1,result:t};if("is_hex_only"in n.id_block==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(n.id_block.is_hex_only!==r.id_block.is_hex_only)return{verified:!1,result:t};if(n.id_block.is_hex_only===!0){if("value_hex"in n.id_block==0)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};var l=new Uint8Array(n.id_block.value_hex),p=new Uint8Array(r.id_block.value_hex);if(l.length!==p.length)return{verified:!1,result:t};for(var h=0;h<l.length;h++)if(l[h]!==p[1])return{verified:!1,result:t}}if(n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&(t[n.name]=r)),n.id_block.is_constructed===!0){var g=0,o={verified:!1},f=n.value_block.value.length;if(f>0&&n.value_block.value[0]instanceof e.org.pkijs.asn1.REPEATED&&(f=r.value_block.value.length),0===f)return{verified:!0,result:t};if(0===r.value_block.value.length&&0!==n.value_block.value.length){for(var m=!0,h=0;h<n.value_block.value.length;h++)m=m&&(n.value_block.value[h].optional||!1);return m===!0?{verified:!0,result:t}:(n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&delete t[n.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(var h=0;f>h;h++)if(h-g>=r.value_block.value.length){if(n.value_block.value[h].optional===!1){var a={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&(delete t[n.name],a.name=n.name)),a}}else if(n.value_block.value[0]instanceof e.org.pkijs.asn1.REPEATED){if(o=e.org.pkijs.compareSchema(t,r.value_block.value[h],n.value_block.value[0].value),o.verified===!1){if(n.value_block.value[0].optional!==!0)return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&delete t[n.name]),o;g++}if("name"in n.value_block.value[0]&&n.value_block.value[0].name.length>0){var _={};_="local"in n.value_block.value[0]&&n.value_block.value[0].local===!0?r:t,"undefined"==typeof _[n.value_block.value[0].name]&&(_[n.value_block.value[0].name]=new Array),_[n.value_block.value[0].name].push(r.value_block.value[h])}}else if(o=e.org.pkijs.compareSchema(t,r.value_block.value[h-g],n.value_block.value[h]),o.verified===!1){if(n.value_block.value[h].optional!==!0)return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&delete t[n.name]),o;g++}if(o.verified===!1){var a={verified:!1,result:t};return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&(delete t[n.name],a.name=n.name)),a}return{verified:!0,result:t}}if("primitive_schema"in n&&"value_hex"in r.value_block){var k=e.org.pkijs.fromBER(r.value_block.value_hex);if(-1===k.offset){var a={verified:!1,result:k.result};return n.hasOwnProperty("name")&&(n.name=n.name.replace(/^\s+|\s+$/g,""),""!==n.name&&(delete t[n.name],a.name=n.name)),a}return e.org.pkijs.compareSchema(t,k.result,n.primitive_schema)}return{verified:!0,result:t}},e.org.pkijs.verifySchema=function(t,r){if(r instanceof Object==0)return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};var n=e.org.pkijs.fromBER(t);return-1===n.offset?{verified:!1,result:n.result}:e.org.pkijs.compareSchema(n.result,n.result,r)},e.org.pkijs.fromJSON=function(e){}}("undefined"!=typeof exports?exports:window),function(e){if("undefined"==typeof e.org)e.org={};else if("object"!=typeof e.org)throw new Error("Name org already exists and it's not an object");if("undefined"==typeof e.org.pkijs)e.org.pkijs={};else if("object"!=typeof e.org.pkijs)throw new Error("Name org.pkijs already exists and it's not an object but "+typeof e.org.pkijs);var t={};if(t.engine={name:"none",crypto:null,subtle:null},"undefined"!=typeof window&&"crypto"in window){var r="webcrypto",n=window.crypto,i=null;"webkitSubtle"in window.crypto&&(i=window.crypto.webkitSubtle),"subtle"in window.crypto&&(i=window.crypto.subtle),t.engine={name:r,crypto:n,subtle:i}}e.org.pkijs.setEngine=function(e,r,n){t.engine={name:e,crypto:r,subtle:n}},e.org.pkijs.getEngine=function(){return t.engine},e.org.pkijs.emptyObject=function(){this.toJSON=function(){return{}},this.toSchema=function(){return{}}},e.org.pkijs.getNames=function(e){var t={};return e instanceof Object&&(t=e.names||{}),t},e.org.pkijs.inheriteObjectFields=function(e){for(var t in e.prototype)"function"!=typeof e.prototype[t]&&(this[t]=e.prototype[t])},e.org.pkijs.getUTCDate=function(e){var t=e;return new Date(t.getTime()+6e4*t.getTimezoneOffset())},e.org.pkijs.padNumber=function(e,t){for(var r=e.toString(10),n=t-r.length,i=new Array(n),s=0;n>s;s++)i[s]="0";var o=i.join("");return o.concat(r)},e.org.pkijs.getValue=function(e,t,r){return t in e?e[t]:r},e.org.pkijs.isEqual_view=function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!=t[r])return!1;return!0},e.org.pkijs.isEqual_buffer=function(t,r){if(t.byteLength!=r.byteLength)return!1;var n=new Uint8Array(t),i=new Uint8Array(r);return e.org.pkijs.isEqual_view(n,i)},e.org.pkijs.concat_buffers=function(e,t){for(var r=new Uint8Array(e),n=new Uint8Array(t),i=new ArrayBuffer(e.byteLength+t.byteLength),s=new Uint8Array(i),o=0;o<e.byteLength;o++)s[o]=r[o];for(var a=0;a<t.byteLength;a++)s[e.byteLength+a]=n[a];return i},e.org.pkijs.copyBuffer=function(e){for(var t=new ArrayBuffer(e.byteLength),r=new Uint8Array(t),n=new Uint8Array(e),i=0;i<n.length;i++)r[i]=n[i];return t},e.org.pkijs.getCrypto=function(){var e;return null!==t.engine.subtle&&(e=t.engine.subtle),e},e.org.pkijs.stringPrep=function(e){var t=e.replace(/^\s+|\s+$/g,"");return t=t.replace(/\s+/g," "),t=t.toLowerCase()},e.org.pkijs.bufferToHexCodes=function(e,t,r){for(var n="",i=new Uint8Array(e,t,r),s=0;s<i.length;s++){var o=i[s].toString(16).toUpperCase();n=n+(1===o.length?"0":"")+o}return n},e.org.pkijs.bufferFromHexCodes=function(e){var t=e.length,r=new ArrayBuffer(t>>1),n=new Uint8Array(r),i={};i[0]=0,i[1]=1,i[2]=2,i[3]=3,i[4]=4,i[5]=5,i[6]=6,i[7]=7,i[8]=8,i[9]=9,i.A=10,i.a=10,i.B=11,i.b=11,i.C=12,i.c=12,i.D=13,i.d=13,i.E=14,i.e=14,i.F=15,i.f=15;for(var s=0,o=0,a=0;t>a;a++)a%2?(o|=i[e.charAt(a)],n[s]=o,s++):o=i[e.charAt(a)]<<4;return r},e.org.pkijs.getRandomValues=function(e){if(null!==t.engine.crypto)return t.engine.crypto.getRandomValues(e);throw new Error("No support for Web Cryptography API")},e.org.pkijs.getAlgorithmParameters=function(t,r){var n={algorithm:{},usages:[]};switch(t.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(r.toLowerCase()){case"generatekey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["sign","verify"]};break;case"verify":case"sign":case"importkey":n={algorithm:{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSASSA-PKCS1-v1_5"},usages:[]}}break;case"RSA-PSS":switch(r.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"},saltLength:20},usages:["sign","verify"]};break;case"generatekey":n={algorithm:{name:"RSA-PSS",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-1"}},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"RSA-PSS",hash:{name:"SHA-1"}},usages:["verify"]};break;case"exportkey":default:return{algorithm:{name:"RSA-PSS"},usages:[]}}break;case"RSA-OAEP":switch(r.toLowerCase()){case"encrypt":case"decrypt":n={algorithm:{name:"RSA-OAEP"},usages:["encrypt","decrypt"]};break;case"generatekey":n={algorithm:{name:"RSA-OAEP",modulusLength:2048,publicExponent:new Uint8Array([1,0,1]),hash:{name:"SHA-256"}},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"importkey":n={algorithm:{name:"RSA-OAEP",hash:{name:"SHA-256"}},usages:["encrypt"]};break;case"exportkey":default:return{algorithm:{name:"RSA-OAEP"},usages:[]}}break;case"ECDSA":switch(r.toLowerCase()){case"generatekey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["sign","verify"]};break;case"importkey":n={algorithm:{name:"ECDSA",namedCurve:"P-256"},usages:["verify"]};break;case"verify":case"sign":n={algorithm:{name:"ECDSA",hash:{name:"SHA-256"}},usages:["sign"]};break;default:return{algorithm:{name:"ECDSA"},usages:[]}}break;case"ECDH":switch(r.toLowerCase()){case"exportkey":case"importkey":case"generatekey":n={algorithm:{name:"ECDH",namedCurve:"P-256"},usages:["deriveKey","deriveBits"]};break;case"derivekey":case"derivebits":n={algorithm:{name:"ECDH",namedCurve:"P-256","public":[]},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"ECDH"},usages:[]}}break;case"AES-CTR":switch(r.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CTR",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CTR",counter:new Uint8Array(16),length:10},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CTR"},usages:[]}}break;case"AES-CBC":switch(r.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-CBC",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-CBC",iv:e.org.pkijs.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-CBC"},usages:[]}}break;case"AES-GCM":switch(r.toLowerCase()){case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"AES-GCM",length:256},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;case"decrypt":case"encrypt":n={algorithm:{name:"AES-GCM",iv:e.org.pkijs.getRandomValues(new Uint8Array(16))},usages:["encrypt","decrypt","wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-GCM"},usages:[]}}break;case"AES-KW":switch(r.toLowerCase()){case"importkey":case"exportkey":case"generatekey":case"wrapkey":case"unwrapkey":n={algorithm:{name:"AES-KW",length:256},usages:["wrapKey","unwrapKey"]};break;default:return{algorithm:{name:"AES-KW"},usages:[]}}break;case"HMAC":switch(r.toLowerCase()){case"sign":case"verify":n={algorithm:{name:"HMAC"},usages:["sign","verify"]};break;case"importkey":case"exportkey":case"generatekey":n={algorithm:{name:"HMAC",length:32,hash:{name:"SHA-256"}},usages:["sign","verify"]};break;default:return{algorithm:{name:"HMAC"},usages:[]}}break;case"HKDF":switch(r.toLowerCase()){case"derivekey":n={algorithm:{name:"HKDF",hash:"SHA-256",salt:new Uint8Array,info:new Uint8Array},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"HKDF"},usages:[]}}break;case"PBKDF2":switch(r.toLowerCase()){case"derivekey":n={algorithm:{name:"PBKDF2",hash:{name:"SHA-256"},salt:new Uint8Array,iterations:1e3},usages:["encrypt","decrypt"]};break;default:return{algorithm:{name:"PBKDF2"},usages:[]}}}return n},e.org.pkijs.getOIDByAlgorithm=function(e){var t="";switch(e.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.1.1.5";break;case"SHA-256":t="1.2.840.113549.1.1.11";break;case"SHA-384":t="1.2.840.113549.1.1.12";break;case"SHA-512":t="1.2.840.113549.1.1.13"}break;case"RSA-PSS":t="1.2.840.113549.1.1.10";break;case"RSA-OAEP":t="1.2.840.113549.1.1.7";break;case"ECDSA":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.10045.4.1";break;case"SHA-256":t="1.2.840.10045.4.3.2";break;case"SHA-384":t="1.2.840.10045.4.3.3";break;case"SHA-512":t="1.2.840.10045.4.3.4"}break;case"ECDH":switch(e.kdf.toUpperCase()){case"SHA-1":t="1.3.133.16.840.63.0.2";break;case"SHA-256":t="1.3.132.1.11.1";break;case"SHA-384":t="1.3.132.1.11.2";break;case"SHA-512":t="1.3.132.1.11.3"}break;case"AES-CTR":break;case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-CMAC":break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}break;case"AES-CFB":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.4";break;case 192:t="2.16.840.1.101.3.4.1.24";break;case 256:t="2.16.840.1.101.3.4.1.44"}break;case"AES-KW":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.5";break;case 192:t="2.16.840.1.101.3.4.1.25";break;case 256:t="2.16.840.1.101.3.4.1.45"}break;case"HMAC":switch(e.hash.name.toUpperCase()){case"SHA-1":t="1.2.840.113549.2.7";break;case"SHA-256":t="1.2.840.113549.2.9";break;case"SHA-384":t="1.2.840.113549.2.10";break;case"SHA-512":t="1.2.840.113549.2.11"}break;case"DH":t="1.2.840.113549.1.9.16.3.5";break;case"SHA-1":t="1.3.14.3.2.26";break;case"SHA-256":t="2.16.840.1.101.3.4.2.1";break;case"SHA-384":t="2.16.840.1.101.3.4.2.2";break;case"SHA-512":t="2.16.840.1.101.3.4.2.3";break;case"CONCAT":break;case"HKDF":break;case"PBKDF2":t="1.2.840.113549.1.5.12";break;case"P-256":t="1.2.840.10045.3.1.7";break;case"P-384":t="1.3.132.0.34";break;case"P-521":t="1.3.132.0.35"}return t},e.org.pkijs.getAlgorithmByOID=function(e){var t={};switch(e){case"1.2.840.113549.1.1.5":t={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};break;case"1.2.840.113549.1.1.11":t={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};break;case"1.2.840.113549.1.1.12":t={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};break;case"1.2.840.113549.1.1.13":t={name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}};break;case"1.2.840.113549.1.1.10":t={name:"RSA-PSS"};break;case"1.2.840.113549.1.1.7":t={name:"RSA-OAEP"};break;case"1.2.840.10045.4.1":t={name:"ECDSA",hash:{name:"SHA-1"}};break;case"1.2.840.10045.4.3.2":t={name:"ECDSA",hash:{name:"SHA-256"}};break;case"1.2.840.10045.4.3.3":t={name:"ECDSA",hash:{name:"SHA-384"}};break;case"1.2.840.10045.4.3.4":t={name:"ECDSA",hash:{name:"SHA-512"}};break;case"1.3.133.16.840.63.0.2":t={name:"ECDH",kdf:"SHA-1"};break;case"1.3.132.1.11.1":t={name:"ECDH",kdf:"SHA-256"};break;case"1.3.132.1.11.2":t={name:"ECDH",kdf:"SHA-384"};break;case"1.3.132.1.11.3":t={name:"ECDH",kdf:"SHA-512"};break;case"2.16.840.1.101.3.4.1.2":t={name:"AES-CBC",length:128};break;case"2.16.840.1.101.3.4.1.22":t={name:"AES-CBC",length:192};break;case"2.16.840.1.101.3.4.1.42":t={name:"AES-CBC",length:256};break;case"2.16.840.1.101.3.4.1.6":t={name:"AES-GCM",length:128};break;case"2.16.840.1.101.3.4.1.26":t={name:"AES-GCM",length:192};break;case"2.16.840.1.101.3.4.1.46":t={name:"AES-GCM",length:256};break;case"2.16.840.1.101.3.4.1.4":t={name:"AES-CFB",length:128};break;case"2.16.840.1.101.3.4.1.24":t={name:"AES-CFB",length:192};break;case"2.16.840.1.101.3.4.1.44":t={name:"AES-CFB",length:256};break;case"2.16.840.1.101.3.4.1.5":t={name:"AES-KW",length:128};break;case"2.16.840.1.101.3.4.1.25":t={name:"AES-KW",length:192};break;case"2.16.840.1.101.3.4.1.45":t={name:"AES-KW",length:256};break;case"1.2.840.113549.2.7":t={name:"HMAC",hash:{name:"SHA-1"}};break;case"1.2.840.113549.2.9":t={name:"HMAC",hash:{name:"SHA-256"}};break;case"1.2.840.113549.2.10":t={name:"HMAC",hash:{name:"SHA-384"}};break;case"1.2.840.113549.2.11":t={name:"HMAC",hash:{name:"SHA-512"}};break;case"1.2.840.113549.1.9.16.3.5":t={name:"DH"};break;case"1.3.14.3.2.26":t={name:"SHA-1"};break;case"2.16.840.1.101.3.4.2.1":t={name:"SHA-256"};break;case"2.16.840.1.101.3.4.2.2":t={name:"SHA-384"};break;case"2.16.840.1.101.3.4.2.3":t={name:"SHA-512"};break;case"1.2.840.113549.1.5.12":t={name:"PBKDF2"};break;case"1.2.840.10045.3.1.7":t={name:"P-256"};break;case"1.3.132.0.34":t={name:"P-384"};break;case"1.3.132.0.35":t={name:"P-521"}}return t},e.org.pkijs.getHashAlgorithm=function(t){var r="";switch(t.algorithm_id){case"1.2.840.10045.4.1":case"1.2.840.113549.1.1.5":r="SHA-1";break;case"1.2.840.10045.4.3.2":case"1.2.840.113549.1.1.11":r="SHA-256";break;case"1.2.840.10045.4.3.3":case"1.2.840.113549.1.1.12":r="SHA-384";break;case"1.2.840.10045.4.3.4":case"1.2.840.113549.1.1.13":r="SHA-512";break;case"1.2.840.113549.1.1.10":var n;try{if(n=new e.org.pkijs.simpl.x509.RSASSA_PSS_params({schema:t.algorithm_params}),"hashAlgorithm"in n){var i=e.org.pkijs.getAlgorithmByOID(n.hashAlgorithm.algorithm_id);if("name"in i==0)return"";r=i.name}else r="SHA-1"}catch(s){}}return r},e.org.pkijs.createCMSECDSASignature=function(t){if(t.byteLength%2!=0)return new ArrayBuffer(0);for(var r,n,i,s,o=0,a=t.byteLength/2,c=new Uint8Array(t),u=new ArrayBuffer(a),l=new Uint8Array(u),p=new ArrayBuffer(a),h=new Uint8Array(p);a>o;o++)l[o]=c[o];if(128&l[0]){r=new ArrayBuffer(a+1),n=new Uint8Array(r),n[0]=0;for(var g=0;a>g;g++)n[g+1]=l[g]}else r=u,n=l;for(;o<t.byteLength;o++)h[o-a]=c[o];if(128&h[0]){i=new ArrayBuffer(a+1),s=new Uint8Array(i),s[0]=0;for(var g=0;a>g;g++)s[g+1]=h[g]}else i=p,s=h;var f=new e.org.pkijs.asn1.INTEGER;f.value_block.is_hex_only=!0,f.value_block.value_hex=e.org.pkijs.copyBuffer(r);var m=new e.org.pkijs.asn1.INTEGER;m.value_block.is_hex_only=!0,m.value_block.value_hex=e.org.pkijs.copyBuffer(i);var _=new e.org.pkijs.asn1.SEQUENCE({value:[f,m]});return _.toBER(!1)},e.org.pkijs.createECDSASignatureFromCMS=function(e){var t=0,r=0,n=0,i=e.value_block.value[0].value_block.value_hex.byteLength,s=e.value_block.value[1].value_block.value_hex.byteLength,o=new Uint8Array(e.value_block.value[0].value_block.value_hex);0===o[0]&&128&o[1]?(t=i-1,r=1):t=i;var a=new Uint8Array(e.value_block.value[1].value_block.value_hex);0===a[0]&&128&a[1]?(t+=s-1,n=1):t+=s;for(var c=new ArrayBuffer(t),u=new Uint8Array(c),l=r;i>l;l++)u[l-r]=o[l];for(var l=n;s>l;l++)u[l-n+i-r]=a[l];return c},e.org.pkijs.getEncryptionAlgorithm=function(e){var t="";switch(e.name.toUpperCase()){case"AES-CBC":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.2";break;case 192:t="2.16.840.1.101.3.4.1.22";break;case 256:t="2.16.840.1.101.3.4.1.42"}break;case"AES-GCM":switch(e.length){case 128:t="2.16.840.1.101.3.4.1.6";break;case 192:t="2.16.840.1.101.3.4.1.26";break;case 256:t="2.16.840.1.101.3.4.1.46"}}return t},e.org.pkijs.getAlgorithmByEncryptionOID=function(e){var t="";switch(e){case"2.16.840.1.101.3.4.1.2":case"2.16.840.1.101.3.4.1.22":case"2.16.840.1.101.3.4.1.42":t="AES-CBC";break;case"2.16.840.1.101.3.4.1.6":case"2.16.840.1.101.3.4.1.26":case"2.16.840.1.101.3.4.1.46":t="AES-GCM"}return t}}("undefined"!=typeof exports?exports:window),function(e){if("undefined"==typeof e.org)e.org={};else if("object"!=typeof e.org)throw new Error("Name org already exists and it's not an object");if("undefined"==typeof e.org.pkijs)e.org.pkijs={};else if("object"!=typeof e.org.pkijs)throw new Error("Name org.pkijs already exists and it's not an object but "+typeof e.org.pkijs);if("undefined"==typeof e.org.pkijs.schema)e.org.pkijs.schema={};else if("object"!=typeof e.org.pkijs.schema)throw new Error("Name org.pkijs.schema already exists and it's not an object but "+typeof e.org.pkijs.schema);if("undefined"==typeof e.org.pkijs.schema.x509)e.org.pkijs.schema.x509={};else if("object"!=typeof e.org.pkijs.schema.x509)throw new Error("Name org.pkijs.schema.x509 already exists and it's not an object but "+typeof e.org.pkijs.schema.x509);var t={};e.org.pkijs.schema.TIME=function(t,r){var n=e.org.pkijs.getNames(arguments[0]),i=r||!1;return new e.org.pkijs.asn1.CHOICE({optional:i,value:[new e.org.pkijs.asn1.UTCTIME({name:n.utcTimeName||""}),new e.org.pkijs.asn1.GENERALIZEDTIME({name:n.generalTimeName||""})]})},t.tbsCertificate=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"tbsCertificate",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.INTEGER({name:t.tbsCertificate_version||"tbsCertificate.version"})]}),new e.org.pkijs.asn1.INTEGER({name:t.tbsCertificate_serialNumber||"tbsCertificate.serialNumber"}),e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.signature||{names:{block_name:"tbsCertificate.signature"}}),e.org.pkijs.schema.RDN(t.issuer||{names:{block_name:"tbsCertificate.issuer"}}),new e.org.pkijs.asn1.SEQUENCE({name:t.tbsCertificate_validity||"tbsCertificate.validity",value:[e.org.pkijs.schema.TIME(t.not_before||{names:{utcTimeName:"tbsCertificate.notBefore",generalTimeName:"tbsCertificate.notBefore"}}),e.org.pkijs.schema.TIME(t.not_after||{names:{utcTimeName:"tbsCertificate.notAfter",generalTimeName:"tbsCertificate.notAfter"}})]}),e.org.pkijs.schema.RDN(t.subject||{names:{block_name:"tbsCertificate.subject"}}),e.org.pkijs.schema.PUBLIC_KEY_INFO(t.subjectPublicKeyInfo||{names:{block_name:"tbsCertificate.subjectPublicKeyInfo"}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.tbsCertificate_issuerUniqueID||"tbsCertificate.issuerUniqueID",optional:!0,id_block:{tag_class:3,
tag_number:1}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.tbsCertificate_subjectUniqueID||"tbsCertificate.subjectUniqueID",optional:!0,id_block:{tag_class:3,tag_number:2}}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:3},value:[e.org.pkijs.schema.EXTENSIONS(t.extensions||{names:{block_name:"tbsCertificate.extensions"}})]})]})},e.org.pkijs.schema.CERT=function(){var r=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:r.block_name||"",value:[t.tbsCertificate(r.tbsCertificate),e.org.pkijs.schema.ALGORITHM_IDENTIFIER(r.signatureAlgorithm||{names:{block_name:"signatureAlgorithm"}}),new e.org.pkijs.asn1.BITSTRING({name:r.signatureValue||"signatureValue"})]})},t.tbsCertList=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"tbsCertList",value:[new e.org.pkijs.asn1.INTEGER({optional:!0,name:t.tbsCertList_version||"tbsCertList.version",value:2}),e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.signature||{names:{block_name:"tbsCertList.signature"}}),e.org.pkijs.schema.RDN(t.issuer||{names:{block_name:"tbsCertList.issuer"}}),e.org.pkijs.schema.TIME(t.tbsCertList_thisUpdate||{names:{utcTimeName:"tbsCertList.thisUpdate",generalTimeName:"tbsCertList.thisUpdate"}}),e.org.pkijs.schema.TIME(t.tbsCertList_thisUpdate||{names:{utcTimeName:"tbsCertList.nextUpdate",generalTimeName:"tbsCertList.nextUpdate"}},!0),new e.org.pkijs.asn1.SEQUENCE({optional:!0,value:[new e.org.pkijs.asn1.REPEATED({name:t.tbsCertList_revokedCertificates||"tbsCertList.revokedCertificates",value:new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.INTEGER,e.org.pkijs.schema.TIME(),e.org.pkijs.schema.EXTENSIONS({},!0)]})})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[e.org.pkijs.schema.EXTENSIONS(t.crlExtensions||{names:{block_name:"tbsCertList.extensions"}})]})]})},e.org.pkijs.schema.CRL=function(){var r=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:r.block_name||"CertificateList",value:[t.tbsCertList(arguments[0]),e.org.pkijs.schema.ALGORITHM_IDENTIFIER(r.signatureAlgorithm||{names:{block_name:"signatureAlgorithm"}}),new e.org.pkijs.asn1.BITSTRING({name:r.signatureValue||"signatureValue"})]})},t.CertificationRequestInfo=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.CertificationRequestInfo||"CertificationRequestInfo",value:[new e.org.pkijs.asn1.INTEGER({name:t.CertificationRequestInfo_version||"CertificationRequestInfo.version"}),new e.org.pkijs.schema.RDN(t.subject||{names:{block_name:"CertificationRequestInfo.subject"}}),new e.org.pkijs.schema.PUBLIC_KEY_INFO({names:{block_name:"CertificationRequestInfo.subjectPublicKeyInfo"}}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.REPEATED({optional:!0,name:t.CertificationRequestInfo_attributes||"CertificationRequestInfo.attributes",value:e.org.pkijs.schema.ATTRIBUTE(t.attributes||{})})]})]})},e.org.pkijs.schema.PKCS10=function(){var r=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({value:[t.CertificationRequestInfo(r.certificationRequestInfo||{}),new e.org.pkijs.asn1.SEQUENCE({name:r.signatureAlgorithm||"signatureAlgorithm",value:[new e.org.pkijs.asn1.OID,new e.org.pkijs.asn1.ANY({optional:!0})]}),new e.org.pkijs.asn1.BITSTRING({name:r.signatureValue||"signatureValue"})]})},e.org.pkijs.schema.PKCS8=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.INTEGER({name:t.version||""}),e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.privateKeyAlgorithm||""),new e.org.pkijs.asn1.OCTETSTRING({name:t.privateKey||""}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.REPEATED({name:t.attributes||"",value:e.org.pkijs.schema.ATTRIBUTE()})]})]})},t.BuiltInStandardAttributes=function(t){"undefined"==typeof t&&(t=!1);var r=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({optional:t,value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:2,tag_number:1},name:r.country_name||"",value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.NUMERICSTRING,new e.org.pkijs.asn1.PRINTABLESTRING]})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:2,tag_number:2},name:r.administration_domain_name||"",value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.NUMERICSTRING,new e.org.pkijs.asn1.PRINTABLESTRING]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:0},name:r.network_address||"",is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:1},name:r.terminal_identifier||"",is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:2},name:r.private_domain_name||"",value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.NUMERICSTRING,new e.org.pkijs.asn1.PRINTABLESTRING]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:3},name:r.organization_name||"",is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,name:r.numeric_user_identifier||"",id_block:{tag_class:3,tag_number:4},is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,name:r.personal_name||"",id_block:{tag_class:3,tag_number:5},value:[new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:0},is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:1},is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:2},is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:3},is_hex_only:!0})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,name:r.organizational_unit_names||"",id_block:{tag_class:3,tag_number:6},value:[new e.org.pkijs.asn1.REPEATED({value:new e.org.pkijs.asn1.PRINTABLESTRING})]})]})},t.BuiltInDomainDefinedAttributes=function(t){return"undefined"==typeof t&&(t=!1),new e.org.pkijs.asn1.SEQUENCE({optional:t,value:[new e.org.pkijs.asn1.PRINTABLESTRING,new e.org.pkijs.asn1.PRINTABLESTRING]})},t.ExtensionAttributes=function(t){return"undefined"==typeof t&&(t=!1),new e.org.pkijs.asn1.SET({optional:t,value:[new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:0},is_hex_only:!0}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.ANY]})]})},e.org.pkijs.schema.GENERAL_NAME=function(){var r=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},name:r.block_name||"",value:[new e.org.pkijs.asn1.OID,new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.ANY]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:r.block_name||"",id_block:{tag_class:3,tag_number:1}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:r.block_name||"",id_block:{tag_class:3,tag_number:2}}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:3},name:r.block_name||"",value:[t.BuiltInStandardAttributes(!1),t.BuiltInDomainDefinedAttributes(!0),t.ExtensionAttributes(!0)]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:4},name:r.block_name||"",value:[e.org.pkijs.schema.RDN(r.directoryName||{})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:5},name:r.block_name||"",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.TELETEXSTRING,new e.org.pkijs.asn1.PRINTABLESTRING,new e.org.pkijs.asn1.UNIVERSALSTRING,new e.org.pkijs.asn1.UTF8STRING,new e.org.pkijs.asn1.BMPSTRING]})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.TELETEXSTRING,new e.org.pkijs.asn1.PRINTABLESTRING,new e.org.pkijs.asn1.UNIVERSALSTRING,new e.org.pkijs.asn1.UTF8STRING,new e.org.pkijs.asn1.BMPSTRING]})]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:r.block_name||"",id_block:{tag_class:3,tag_number:6}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:r.block_name||"",id_block:{tag_class:3,tag_number:7}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:r.block_name||"",id_block:{tag_class:3,tag_number:8}})]})},e.org.pkijs.schema.ALGORITHM_IDENTIFIER=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",optional:t.optional||!1,value:[new e.org.pkijs.asn1.OID({name:t.algorithmIdentifier||""}),new e.org.pkijs.asn1.ANY({name:t.algorithmParams||"",optional:!0})]})},e.org.pkijs.schema.x509.RSAPublicKey=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.INTEGER({name:t.modulus||""}),new e.org.pkijs.asn1.INTEGER({name:t.publicExponent||""})]})},e.org.pkijs.schema.x509.OtherPrimeInfo=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.INTEGER({name:t.prime||""}),new e.org.pkijs.asn1.INTEGER({name:t.exponent||""}),new e.org.pkijs.asn1.INTEGER({name:t.coefficient||""})]})},e.org.pkijs.schema.x509.RSAPrivateKey=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.INTEGER({name:t.version||""}),new e.org.pkijs.asn1.INTEGER({name:t.modulus||""}),new e.org.pkijs.asn1.INTEGER({name:t.publicExponent||""}),new e.org.pkijs.asn1.INTEGER({name:t.privateExponent||""}),new e.org.pkijs.asn1.INTEGER({name:t.prime1||""}),new e.org.pkijs.asn1.INTEGER({name:t.prime2||""}),new e.org.pkijs.asn1.INTEGER({name:t.exponent1||""}),new e.org.pkijs.asn1.INTEGER({name:t.exponent2||""}),new e.org.pkijs.asn1.INTEGER({name:t.coefficient||""}),new e.org.pkijs.asn1.SEQUENCE({optional:!0,value:[new e.org.pkijs.asn1.REPEATED({name:t.otherPrimeInfos||"",value:e.org.pkijs.schema.x509.OtherPrimeInfo(t.otherPrimeInfo||{})})]})]})},e.org.pkijs.schema.x509.RSASSA_PSS_params=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},optional:!0,value:[e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.hashAlgorithm||{})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:1},optional:!0,value:[e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.maskGenAlgorithm||{})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:2},optional:!0,value:[new e.org.pkijs.asn1.INTEGER({name:t.saltLength||""})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:3},optional:!0,value:[new e.org.pkijs.asn1.INTEGER({name:t.trailerField||""})]})]})},e.org.pkijs.schema.PUBLIC_KEY_INFO=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[e.org.pkijs.schema.ALGORITHM_IDENTIFIER(t.algorithm||{}),new e.org.pkijs.asn1.BITSTRING({name:t.subjectPublicKey||""})]})},e.org.pkijs.schema.ATTRIBUTE=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.type||""}),new e.org.pkijs.asn1.SET({name:t.set_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.values||"",value:new e.org.pkijs.asn1.ANY})]})]})},e.org.pkijs.schema.ATTR_TYPE_AND_VALUE=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.type||""}),new e.org.pkijs.asn1.ANY({name:t.value||""})]})},e.org.pkijs.schema.RDN=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.repeated_sequence||"",value:new e.org.pkijs.asn1.SET({value:[new e.org.pkijs.asn1.REPEATED({name:t.repeated_set||"",value:e.org.pkijs.schema.ATTR_TYPE_AND_VALUE(t.attr_type_and_value||{})})]})})]})},e.org.pkijs.schema.EXTENSION=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.extnID||""}),new e.org.pkijs.asn1.BOOLEAN({name:t.critical||"",optional:!0}),new e.org.pkijs.asn1.OCTETSTRING({name:t.extnValue||""})]})},e.org.pkijs.schema.EXTENSIONS=function(t,r){var n=e.org.pkijs.getNames(arguments[0]),i=r||!1;return new e.org.pkijs.asn1.SEQUENCE({optional:i,name:n.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:n.extensions||"",value:e.org.pkijs.schema.EXTENSION(n.extension||{})})]})},e.org.pkijs.schema.x509.AuthorityKeyIdentifier=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.keyIdentifier||"",optional:!0,id_block:{tag_class:3,tag_number:0}}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.REPEATED({name:t.authorityCertIssuer||"",value:e.org.pkijs.schema.GENERAL_NAME()})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.authorityCertSerialNumber||"",optional:!0,id_block:{tag_class:3,tag_number:2}})]})},e.org.pkijs.schema.x509.PrivateKeyUsagePeriod=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.notBefore||"",optional:!0,id_block:{tag_class:3,tag_number:0}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.notAfter||"",optional:!0,id_block:{tag_class:3,tag_number:1}})]})},e.org.pkijs.schema.x509.AltName=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.altNames||"",value:e.org.pkijs.schema.GENERAL_NAME()})]})},e.org.pkijs.schema.x509.SubjectDirectoryAttributes=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.attributes||"",value:e.org.pkijs.schema.ATTRIBUTE()})]})},e.org.pkijs.schema.x509.GeneralSubtree=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[e.org.pkijs.schema.GENERAL_NAME(t.base||""),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.INTEGER({name:t.minimum||""})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.INTEGER({name:t.maximum||""})]})]})},e.org.pkijs.schema.x509.NameConstraints=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.REPEATED({name:t.permittedSubtrees||"",value:e.org.pkijs.schema.x509.GeneralSubtree()})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.REPEATED({name:t.excludedSubtrees||"",value:e.org.pkijs.schema.x509.GeneralSubtree()})]})]})},e.org.pkijs.schema.x509.BasicConstraints=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.BOOLEAN({optional:!0,name:t.cA||""}),new e.org.pkijs.asn1.INTEGER({optional:!0,name:t.pathLenConstraint||""})]})},e.org.pkijs.schema.x509.PolicyQualifierInfo=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.policyQualifierId||""}),new e.org.pkijs.asn1.ANY({name:t.qualifier||""})]})},e.org.pkijs.schema.x509.PolicyInformation=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.policyIdentifier||""}),new e.org.pkijs.asn1.SEQUENCE({optional:!0,value:[new e.org.pkijs.asn1.REPEATED({name:t.policyQualifiers||"",value:e.org.pkijs.schema.x509.PolicyQualifierInfo()})]})]})},e.org.pkijs.schema.x509.CertificatePolicies=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.certificatePolicies||"",value:e.org.pkijs.schema.x509.PolicyInformation()})]})},e.org.pkijs.schema.x509.PolicyMapping=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.issuerDomainPolicy||""}),new e.org.pkijs.asn1.OID({name:t.subjectDomainPolicy||""})]})},e.org.pkijs.schema.x509.PolicyMappings=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.mappings||"",value:e.org.pkijs.schema.x509.PolicyMapping()})]})},e.org.pkijs.schema.x509.PolicyConstraints=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.requireExplicitPolicy||"",optional:!0,id_block:{tag_class:3,tag_number:0}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.inhibitPolicyMapping||"",optional:!0,id_block:{tag_class:3,tag_number:1}})]})},e.org.pkijs.schema.x509.ExtKeyUsage=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.keyPurposes||"",value:new e.org.pkijs.asn1.OID})]})},e.org.pkijs.schema.x509.DistributionPoint=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({name:t.distributionPoint||"",optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.REPEATED({name:t.distributionPoint_names||"",value:e.org.pkijs.schema.GENERAL_NAME()})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({name:t.distributionPoint||"",optional:!0,id_block:{tag_class:3,tag_number:1},value:e.org.pkijs.schema.RDN().value_block.value})]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.reasons||"",optional:!0,id_block:{tag_class:3,tag_number:1}}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({name:t.cRLIssuer||"",optional:!0,id_block:{tag_class:3,tag_number:2},value:[new e.org.pkijs.asn1.REPEATED({name:t.cRLIssuer_names||"",value:e.org.pkijs.schema.GENERAL_NAME()})]})]})},e.org.pkijs.schema.x509.CRLDistributionPoints=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.distributionPoints||"",value:e.org.pkijs.schema.x509.DistributionPoint()})]})},e.org.pkijs.schema.x509.AccessDescription=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.OID({name:t.accessMethod||""}),e.org.pkijs.schema.GENERAL_NAME(t.accessLocation||"")]})},e.org.pkijs.schema.x509.InfoAccess=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.REPEATED({name:t.accessDescriptions||"",value:e.org.pkijs.schema.x509.AccessDescription()})]})},e.org.pkijs.schema.x509.IssuingDistributionPoint=function(){var t=e.org.pkijs.getNames(arguments[0]);return new e.org.pkijs.asn1.SEQUENCE({name:t.block_name||"",value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.CHOICE({value:[new e.org.pkijs.asn1.ASN1_CONSTRUCTED({name:t.distributionPoint||"",id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.REPEATED({name:t.distributionPoint_names||"",value:e.org.pkijs.schema.GENERAL_NAME()})]}),new e.org.pkijs.asn1.ASN1_CONSTRUCTED({name:t.distributionPoint||"",id_block:{tag_class:3,tag_number:1},value:e.org.pkijs.schema.RDN().value_block.value})]})]}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.onlyContainsUserCerts||"",optional:!0,id_block:{tag_class:3,tag_number:1}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.onlyContainsCACerts||"",optional:!0,id_block:{tag_class:3,tag_number:2}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.onlySomeReasons||"",optional:!0,id_block:{tag_class:3,tag_number:3}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.indirectCRL||"",optional:!0,id_block:{tag_class:3,tag_number:4}}),new e.org.pkijs.asn1.ASN1_PRIMITIVE({name:t.onlyContainsAttributeCerts||"",optional:!0,id_block:{tag_class:3,tag_number:5}})]})}}("undefined"!=typeof exports?exports:window),function(e){if("undefined"==typeof e.org)e.org={};else if("object"!=typeof e.org)throw new Error("Name org already exists and it's not an object");if("undefined"==typeof e.org.pkijs)e.org.pkijs={};else if("object"!=typeof e.org.pkijs)throw new Error("Name org.pkijs already exists and it's not an object but "+typeof e.org.pkijs);if("undefined"==typeof e.org.pkijs.simpl)e.org.pkijs.simpl={};else if("object"!=typeof e.org.pkijs.simpl)throw new Error("Name org.pkijs.simpl already exists and it's not an object but "+typeof e.org.pkijs.simpl);if("undefined"==typeof e.org.pkijs.simpl.x509)e.org.pkijs.simpl.x509={};else if("object"!=typeof e.org.pkijs.simpl.x509)throw new Error("Name org.pkijs.simpl.x509 already exists and it's not an object but "+typeof e.org.pkijs.simpl.x509);e.org.pkijs.simpl.TIME=function(){this.type=0,this.value=new Date(0,0,0),arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.TIME.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.type=arguments[0].type||0,this.value=arguments[0].value||new Date(0,0,0))},e.org.pkijs.simpl.TIME.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.TIME({names:{utcTimeName:"utcTimeName",generalTimeName:"generalTimeName"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for TIME");"utcTimeName"in r.result&&(this.type=0,this.value=r.result.utcTimeName.toDate()),"generalTimeName"in r.result&&(this.type=1,this.value=r.result.generalTimeName.toDate())},e.org.pkijs.simpl.TIME.prototype.toSchema=function(){var t={};return 0===this.type&&(t=new e.org.pkijs.asn1.UTCTIME({value_date:this.value})),1===this.type&&(t=new e.org.pkijs.asn1.GENERALIZEDTIME({value_date:this.value})),t},e.org.pkijs.simpl.TIME.prototype.toJSON=function(){return{type:this.type,value:this.value}},e.org.pkijs.simpl.GENERAL_NAME=function(){this.NameType=9,this.Name={},arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.GENERAL_NAME.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.NameType=arguments[0].NameType||9,this.Name=arguments[0].Name||{})},e.org.pkijs.simpl.GENERAL_NAME.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.GENERAL_NAME({names:{block_name:"block_name",otherName:"otherName",rfc822Name:"rfc822Name",dNSName:"dNSName",x400Address:"x400Address",directoryName:{names:{block_name:"directoryName"}},ediPartyName:"ediPartyName",uniformResourceIdentifier:"uniformResourceIdentifier",iPAddress:"iPAddress",registeredID:"registeredID"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAME");switch(this.NameType=r.result.block_name.id_block.tag_number,this.NameType){case 0:this.Name=r.result.block_name;break;case 1:case 2:case 6:var n=r.result.block_name;n.id_block.tag_class=1,n.id_block.tag_number=22;var i=n.toBER(!1);this.Name=e.org.pkijs.fromBER(i).result.value_block.value;break;case 3:this.Name=r.result.block_name;break;case 4:this.Name=new e.org.pkijs.simpl.RDN({schema:r.result.directoryName});break;case 5:this.Name=r.result.ediPartyName;break;case 7:this.Name=new e.org.pkijs.asn1.OCTETSTRING({value_hex:r.result.block_name.value_block.value_hex});break;case 8:var n=r.result.block_name;n.id_block.tag_class=1,n.id_block.tag_number=6;var i=n.toBER(!1);this.Name=e.org.pkijs.fromBER(i).result.value_block.toString()}},e.org.pkijs.simpl.GENERAL_NAME.prototype.toSchema=function(t){switch(this.NameType){case 0:case 3:case 5:return new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:this.NameType},value:[this.Name]});case 1:case 2:case 6:var r=new e.org.pkijs.asn1.IA5STRING({value:this.Name});return r.id_block.tag_class=3,r.id_block.tag_number=this.NameType,r;case 4:return new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:4},value:[this.Name.toSchema()]});case 7:var r=this.Name;return r.id_block.tag_class=3,r.id_block.tag_number=this.NameType,r;case 8:var r=new e.org.pkijs.asn1.OID({value:this.Name});return r.id_block.tag_class=3,r.id_block.tag_number=this.NameType,r;default:return e.org.pkijs.schema.GENERAL_NAME()}},e.org.pkijs.simpl.GENERAL_NAME.prototype.toJSON=function(){var e={NameType:this.NameType};return"string"==typeof this.Name?e.Name=this.Name:e.Name=this.Name.toJSON(),e},e.org.pkijs.simpl.GENERAL_NAMES=function(){this.names=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.GENERAL_NAMES.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.names=arguments[0].names||new Array)},e.org.pkijs.simpl.GENERAL_NAMES.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.REPEATED({name:"names",value:e.org.pkijs.schema.GENERAL_NAME()})]}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for GENERAL_NAMES");for(var n=r.result.names,i=0;i<n.length;i++)this.names.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:n[i]}))},e.org.pkijs.simpl.GENERAL_NAMES.prototype.toSchema=function(t){for(var r=new Array,n=0;n<this.names.length;n++)r.push(this.names[n].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:r})},e.org.pkijs.simpl.GENERAL_NAMES.prototype.toJSON=function(){for(var e=new Array,t=0;t<this.names.length;t++)e.push(this.names[t].toJSON());return{names:e}},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER=function(){this.algorithm_id="",arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.algorithm_id=arguments[0].algorithm_id||"","algorithm_params"in arguments[0]&&(this.algorithm_params=arguments[0].algorithm_params))},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.ALGORITHM_IDENTIFIER({names:{algorithmIdentifier:"algorithm",algorithmParams:"params"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ALGORITHM_IDENTIFIER");this.algorithm_id=r.result.algorithm.value_block.toString(),"params"in r.result&&(this.algorithm_params=r.result.params)},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.toSchema=function(){var t=new Array;return t.push(new e.org.pkijs.asn1.OID({value:this.algorithm_id})),"algorithm_params"in this&&t.push(this.algorithm_params),new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.getCommonName=function(){},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.toJSON=function(){var e={algorithm_id:this.algorithm_id};return"algorithm_params"in this&&(e.algorithm_params=this.algorithm_params.toJSON()),e},e.org.pkijs.simpl.ALGORITHM_IDENTIFIER.prototype.isEqual=function(t){return t instanceof e.org.pkijs.simpl.ALGORITHM_IDENTIFIER==0?!1:this.algorithm_id!=t.algorithm_id?!1:"algorithm_params"in this?"algorithm_params"in t?JSON.stringify(this.algorithm_params)==JSON.stringify(t.algorithm_params):!1:!("algorithm_params"in t)},e.org.pkijs.simpl.x509.RSAPublicKey=function(){this.modulus=new e.org.pkijs.asn1.INTEGER,this.publicExponent=new e.org.pkijs.asn1.INTEGER,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.RSAPublicKey.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.modulus=arguments[0].modulus||new e.org.pkijs.asn1.INTEGER,this.publicExponent=arguments[0].publicExponent||new e.org.pkijs.asn1.INTEGER)},e.org.pkijs.simpl.x509.RSAPublicKey.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.RSAPublicKey({names:{modulus:"modulus",publicExponent:"publicExponent"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPublicKey");this.modulus=r.result.modulus,this.publicExponent=r.result.publicExponent},e.org.pkijs.simpl.x509.RSAPublicKey.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[this.modulus,this.publicExponent]})},e.org.pkijs.simpl.x509.RSAPublicKey.prototype.toJSON=function(){return{modulus:this.modulus.toJSON(),publicExponent:this.publicExponent.toJSON()}},e.org.pkijs.simpl.x509.OtherPrimeInfo=function(){this.prime=new e.org.pkijs.asn1.INTEGER,this.exponent=new e.org.pkijs.asn1.INTEGER,this.coefficient=new e.org.pkijs.asn1.INTEGER,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.OtherPrimeInfo.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.prime=arguments[0].prime||new e.org.pkijs.asn1.INTEGER,this.exponent=arguments[0].exponent||new e.org.pkijs.asn1.INTEGER,this.coefficient=arguments[0].coefficient||new e.org.pkijs.asn1.INTEGER)},e.org.pkijs.simpl.x509.OtherPrimeInfo.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.OtherPrimeInfo({names:{prime:"prime",exponent:"exponent",coefficient:"coefficient"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for OtherPrimeInfo");this.prime=r.result.prime,this.exponent=r.result.exponent,this.coefficient=r.result.coefficient},e.org.pkijs.simpl.x509.OtherPrimeInfo.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[this.prime,this.exponent,this.coefficient]})},e.org.pkijs.simpl.x509.OtherPrimeInfo.prototype.toJSON=function(){return{prime:this.prime.toJSON(),exponent:this.exponent.toJSON(),coefficient:this.coefficient.toJSON()}},e.org.pkijs.simpl.x509.RSAPrivateKey=function(){this.version=0,this.modulus=new e.org.pkijs.asn1.INTEGER,this.publicExponent=new e.org.pkijs.asn1.INTEGER,this.privateExponent=new e.org.pkijs.asn1.INTEGER,this.prime1=new e.org.pkijs.asn1.INTEGER,this.prime2=new e.org.pkijs.asn1.INTEGER,this.exponent1=new e.org.pkijs.asn1.INTEGER,this.exponent2=new e.org.pkijs.asn1.INTEGER,this.coefficient=new e.org.pkijs.asn1.INTEGER,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.RSAPrivateKey.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.version=arguments[0].version||0,this.modulus=arguments[0].modulus||new e.org.pkijs.asn1.INTEGER,this.publicExponent=arguments[0].publicExponent||new e.org.pkijs.asn1.INTEGER,this.privateExponent=arguments[0].privateExponent||new e.org.pkijs.asn1.INTEGER,this.prime1=arguments[0].prime1||new e.org.pkijs.asn1.INTEGER,this.prime2=arguments[0].prime2||new e.org.pkijs.asn1.INTEGER,this.exponent1=arguments[0].exponent1||new e.org.pkijs.asn1.INTEGER,this.exponent2=arguments[0].exponent2||new e.org.pkijs.asn1.INTEGER,this.coefficient=arguments[0].coefficient||new e.org.pkijs.asn1.INTEGER,"otherPrimeInfos"in arguments[0]&&(this.otherPrimeInfos=arguments[0].otherPrimeInfos||new Array));
},e.org.pkijs.simpl.x509.RSAPrivateKey.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.RSAPrivateKey({names:{version:"version",modulus:"modulus",publicExponent:"publicExponent",privateExponent:"privateExponent",prime1:"prime1",prime2:"prime2",exponent1:"exponent1",exponent2:"exponent2",coefficient:"coefficient",otherPrimeInfos:"otherPrimeInfos"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSAPrivateKey");if(this.version=r.result.version.value_block.value_dec,this.modulus=r.result.modulus,this.publicExponent=r.result.publicExponent,this.privateExponent=r.result.privateExponent,this.prime1=r.result.prime1,this.prime2=r.result.prime2,this.exponent1=r.result.exponent1,this.exponent2=r.result.exponent2,this.coefficient=r.result.coefficient,"otherPrimeInfos"in r.result)for(var n=r.result.otherPrimeInfos,i=0;i<n.length;i++)this.otherPrimeInfos.push(new e.org.pkijs.simpl.x509.OtherPrimeInfo({schema:n[i]}))},e.org.pkijs.simpl.x509.RSAPrivateKey.prototype.toSchema=function(){var t=new Array;if(t.push(new e.org.pkijs.asn1.INTEGER({value:this.version})),t.push(this.modulus),t.push(this.publicExponent),t.push(this.privateExponent),t.push(this.prime1),t.push(this.prime2),t.push(this.exponent1),t.push(this.exponent2),t.push(this.coefficient),"otherPrimeInfos"in this){for(var r=new Array,n=0;n<this.otherPrimeInfos.length;n++)r.push(this.otherPrimeInfos[n].toSchema());t.push(new e.org.pkijs.asn1.SEQUENCE({value:r}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.RSAPrivateKey.prototype.toJSON=function(){var e={version:this.version,modulus:this.modulus.toJSON(),publicExponent:this.publicExponent.toJSON(),privateExponent:this.privateExponent.toJSON(),prime1:this.prime1.toJSON(),prime2:this.prime2.toJSON(),exponent1:this.exponent1.toJSON(),exponent2:this.exponent2.toJSON(),coefficient:this.coefficient.toJSON()};if("otherPrimeInfos"in this){e.otherPrimeInfos=new Array;for(var t=0;t<this.otherPrimeInfos.length;t++)e.otherPrimeInfos.push(this.otherPrimeInfos[t].toJSON())}return e},e.org.pkijs.simpl.x509.RSASSA_PSS_params=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.RSASSA_PSS_params.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("hashAlgorithm"in arguments[0]&&(this.hashAlgorithm=arguments[0].hashAlgorithm),"maskGenAlgorithm"in arguments[0]&&(this.maskGenAlgorithm=arguments[0].maskGenAlgorithm),"saltLength"in arguments[0]&&(this.saltLength=arguments[0].saltLength),"trailerField"in arguments[0]&&(this.trailerField=arguments[0].trailerField))},e.org.pkijs.simpl.x509.RSASSA_PSS_params.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.RSASSA_PSS_params({names:{hashAlgorithm:{names:{block_name:"hashAlgorithm"}},maskGenAlgorithm:{names:{block_name:"maskGenAlgorithm"}},saltLength:"saltLength",trailerField:"trailerField"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RSASSA_PSS_params");"hashAlgorithm"in r.result&&(this.hashAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.hashAlgorithm})),"maskGenAlgorithm"in r.result&&(this.maskGenAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.maskGenAlgorithm})),"saltLength"in r.result&&(this.saltLength=r.result.saltLength.value_block.value_dec),"trailerField"in r.result&&(this.trailerField=r.result.trailerField.value_block.value_dec)},e.org.pkijs.simpl.x509.RSASSA_PSS_params.prototype.toSchema=function(){var t=new Array;return"hashAlgorithm"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},value:[this.hashAlgorithm.toSchema()]})),"maskGenAlgorithm"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:1},value:[this.maskGenAlgorithm.toSchema()]})),"saltLength"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:2},value:[new e.org.pkijs.asn1.INTEGER({value:this.saltLength})]})),"trailerField"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:3},value:[new e.org.pkijs.asn1.INTEGER({value:this.trailerField})]})),new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.RSASSA_PSS_params.prototype.toJSON=function(){var e={};return"hashAlgorithm"in this&&(e.hashAlgorithm=this.hashAlgorithm.toJSON()),"maskGenAlgorithm"in this&&(e.maskGenAlgorithm=this.maskGenAlgorithm.toJSON()),"saltLength"in this&&(e.saltLength=this.saltLength.toJSON()),"trailerField"in this&&(e.trailerField=this.trailerField.toJSON()),e},e.org.pkijs.simpl.PUBLIC_KEY_INFO=function(){this.algorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.subjectPublicKey=new e.org.pkijs.asn1.BITSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.algorithm=arguments[0].algorithm||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.subjectPublicKey=arguments[0].subjectPublicKey||new e.org.pkijs.asn1.BITSTRING)},e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.PUBLIC_KEY_INFO({names:{algorithm:{names:{block_name:"algorithm"}},subjectPublicKey:"subjectPublicKey"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PUBLIC_KEY_INFO");this.algorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.algorithm}),this.subjectPublicKey=r.result.subjectPublicKey},e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[this.algorithm.toSchema(),this.subjectPublicKey]})},e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.importKey=function(t){var r=Promise.resolve(),n=this;if("undefined"==typeof t)return new Promise(function(e,t){t("Need to provide publicKey input parameter")});var i=e.org.pkijs.getCrypto();return"undefined"==typeof i?new Promise(function(e,t){t("Unable to create WebCrypto object")}):(r=r.then(function(){return i.exportKey("spki",t)}),r=r.then(function(t){var r=e.org.pkijs.fromBER(t);try{e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.fromSchema.call(n,r.result)}catch(i){return new Promise(function(e,t){t("Error during initializing object from schema")})}},function(e){return new Promise(function(t,r){r("Error during exporting public key: "+e)})}))},e.org.pkijs.simpl.PUBLIC_KEY_INFO.prototype.toJSON=function(){return{algorithm:this.algorithm.toJSON(),subjectPublicKey:this.subjectPublicKey.toJSON()}},e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE=function(){this.type="",this.value={},arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.type=arguments[0].type||"",this.value=arguments[0].value||{})},e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.ATTR_TYPE_AND_VALUE({names:{type:"type",value:"typeValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTR_TYPE_AND_VALUE");this.type=r.result.type.value_block.toString(),this.value=r.result.typeValue},e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.OID({value:this.type}),this.value]})},e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE.prototype.isEqual=function(){if(arguments[0]instanceof e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE){if(this.type!==arguments[0].type)return!1;if(this.value instanceof e.org.pkijs.asn1.UTF8STRING&&arguments[0].value instanceof e.org.pkijs.asn1.UTF8STRING||this.value instanceof e.org.pkijs.asn1.BMPSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.BMPSTRING||this.value instanceof e.org.pkijs.asn1.UNIVERSALSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.UNIVERSALSTRING||this.value instanceof e.org.pkijs.asn1.NUMERICSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.NUMERICSTRING||this.value instanceof e.org.pkijs.asn1.PRINTABLESTRING&&arguments[0].value instanceof e.org.pkijs.asn1.PRINTABLESTRING||this.value instanceof e.org.pkijs.asn1.TELETEXSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.TELETEXSTRING||this.value instanceof e.org.pkijs.asn1.VIDEOTEXSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.VIDEOTEXSTRING||this.value instanceof e.org.pkijs.asn1.IA5STRING&&arguments[0].value instanceof e.org.pkijs.asn1.IA5STRING||this.value instanceof e.org.pkijs.asn1.GRAPHICSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.GRAPHICSTRING||this.value instanceof e.org.pkijs.asn1.VISIBLESTRING&&arguments[0].value instanceof e.org.pkijs.asn1.VISIBLESTRING||this.value instanceof e.org.pkijs.asn1.GENERALSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.GENERALSTRING||this.value instanceof e.org.pkijs.asn1.CHARACTERSTRING&&arguments[0].value instanceof e.org.pkijs.asn1.CHARACTERSTRING){var t=e.org.pkijs.stringPrep(this.value.value_block.value),r=e.org.pkijs.stringPrep(arguments[0].value.value_block.value);if(0!==t.localeCompare(r))return!1}else if(e.org.pkijs.isEqual_buffer(this.value.value_before_decode,arguments[0].value.value_before_decode)===!1)return!1;return!0}return!1},e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE.prototype.toJSON=function(){var e={type:this.type};return 0!==Object.keys(this.value).length?e.value=this.value.toJSON():e.value=this.value,e},e.org.pkijs.simpl.RDN=function(){this.types_and_values=new Array,this.value_before_decode=new ArrayBuffer(0),arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.RDN.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.types_and_values=arguments[0].types_and_values||new Array,this.value_before_decode=arguments[0].value_before_decode||new ArrayBuffer(0))},e.org.pkijs.simpl.RDN.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.RDN({names:{block_name:"RDN",repeated_set:"types_and_values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for RDN");if("types_and_values"in r.result)for(var n=r.result.types_and_values,i=0;i<n.length;i++)this.types_and_values.push(new e.org.pkijs.simpl.ATTR_TYPE_AND_VALUE({schema:n[i]}));this.value_before_decode=r.result.RDN.value_before_decode},e.org.pkijs.simpl.RDN.prototype.toSchema=function(){if(0===this.value_before_decode.byteLength){for(var t=new Array,r=0;r<this.types_and_values.length;r++)t.push(this.types_and_values[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.SET({value:t})]})}var n=e.org.pkijs.fromBER(this.value_before_decode);return n.result},e.org.pkijs.simpl.RDN.prototype.isEqual=function(){if(arguments[0]instanceof e.org.pkijs.simpl.RDN){if(this.types_and_values.length!=arguments[0].types_and_values.length)return!1;for(var t=0;t<this.types_and_values.length;t++)if(this.types_and_values[t].isEqual(arguments[0].types_and_values[t])===!1)return!1;return!0}return arguments[0]instanceof ArrayBuffer?e.org.pkijs.isEqual_buffer(this.value_before_decode,arguments[0]):!1},e.org.pkijs.simpl.RDN.prototype.toJSON=function(){for(var e={types_and_values:new Array},t=0;t<this.types_and_values.length;t++)e.types_and_values.push(this.types_and_values[t].toJSON());return e},e.org.pkijs.simpl.x509.AuthorityKeyIdentifier=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.AuthorityKeyIdentifier.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("keyIdentifier"in arguments[0]&&(this.keyIdentifier=arguments[0].keyIdentifier),"authorityCertIssuer"in arguments[0]&&(this.authorityCertIssuer=arguments[0].authorityCertIssuer),"authorityCertSerialNumber"in arguments[0]&&(this.authorityCertSerialNumber=arguments[0].authorityCertSerialNumber))},e.org.pkijs.simpl.x509.AuthorityKeyIdentifier.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.AuthorityKeyIdentifier({names:{keyIdentifier:"keyIdentifier",authorityCertIssuer:"authorityCertIssuer",authorityCertSerialNumber:"authorityCertSerialNumber"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AuthorityKeyIdentifier");if("keyIdentifier"in r.result&&(r.result.keyIdentifier.id_block.tag_class=1,r.result.keyIdentifier.id_block.tag_number=4,this.keyIdentifier=r.result.keyIdentifier),"authorityCertIssuer"in r.result){this.authorityCertIssuer=new Array;for(var n=r.result.authorityCertIssuer,i=0;i<n.length;i++)this.authorityCertIssuer.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:n[i]}))}"authorityCertSerialNumber"in r.result&&(r.result.authorityCertSerialNumber.id_block.tag_class=1,r.result.authorityCertSerialNumber.id_block.tag_number=2,this.authorityCertSerialNumber=r.result.authorityCertSerialNumber)},e.org.pkijs.simpl.x509.AuthorityKeyIdentifier.prototype.toSchema=function(){var t=new Array;if("keyIdentifier"in this){var r=this.keyIdentifier;r.id_block.tag_class=3,r.id_block.tag_number=0,t.push(r)}if("authorityCertIssuer"in this){for(var n=new Array,i=0;i<this.authorityCertIssuer.length;i++)n.push(this.authorityCertIssuer[i].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.SEQUENCE({value:n})]}))}if("authorityCertSerialNumber"in this){var r=this.authorityCertSerialNumber;r.id_block.tag_class=3,r.id_block.tag_number=2,t.push(r)}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.AuthorityKeyIdentifier.prototype.toJSON=function(){var e={};if("keyIdentifier"in this&&(e.keyIdentifier=this.keyIdentifier.toJSON()),"authorityCertIssuer"in this){e.authorityCertIssuer=new Array;for(var t=0;t<this.authorityCertIssuer.length;t++)e.authorityCertIssuer.push(this.authorityCertIssuer[t].toJSON())}return"authorityCertSerialNumber"in this&&(e.authorityCertSerialNumber=this.authorityCertSerialNumber.toJSON()),e},e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("notBefore"in arguments[0]&&(this.notBefore=arguments[0].notBefore),"notAfter"in arguments[0]&&(this.notAfter=arguments[0].notAfter))},e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PrivateKeyUsagePeriod({names:{notBefore:"notBefore",notAfter:"notAfter"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PrivateKeyUsagePeriod");if("notBefore"in r.result){var n=new e.org.pkijs.asn1.GENERALIZEDTIME;n.fromBuffer(r.result.notBefore.value_block.value_hex),this.notBefore=n.toDate()}if("notAfter"in r.result){var i=new e.org.pkijs.asn1.GENERALIZEDTIME({value_hex:r.result.notAfter.value_block.value_hex});i.fromBuffer(r.result.notAfter.value_block.value_hex),this.notAfter=i.toDate()}},e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod.prototype.toSchema=function(){var t=new Array;return"notBefore"in this&&t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:0},value_hex:new e.org.pkijs.asn1.GENERALIZEDTIME({value_date:this.notBefore}).value_block.value_hex})),"notAfter"in this&&t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:1},value_hex:new e.org.pkijs.asn1.GENERALIZEDTIME({value_date:this.notAfter}).value_block.value_hex})),new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod.prototype.toJSON=function(){var e={};return"notBefore"in this&&(e.notBefore=this.notBefore),"notAfter"in this&&(e.notAfter=this.notAfter),e},e.org.pkijs.simpl.x509.AltName=function(){this.altNames=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.AltName.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.altNames=arguments[0].altNames||new Array)},e.org.pkijs.simpl.x509.AltName.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.AltName({names:{altNames:"altNames"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AltName");if("altNames"in r.result)for(var n=r.result.altNames,i=0;i<n.length;i++)this.altNames.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:n[i]}))},e.org.pkijs.simpl.x509.AltName.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.altNames.length;r++)t.push(this.altNames[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.AltName.prototype.toJSON=function(){for(var e={altNames:new Array},t=0;t<this.altNames.length;t++)e.altNames.push(this.altNames[t].toJSON());return e},e.org.pkijs.simpl.x509.SubjectDirectoryAttributes=function(){this.attributes=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.SubjectDirectoryAttributes.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.attributes=arguments[0].attributes||new Array)},e.org.pkijs.simpl.x509.SubjectDirectoryAttributes.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.SubjectDirectoryAttributes({names:{attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for SubjectDirectoryAttributes");for(var n=r.result.attributes,i=0;i<n.length;i++)this.attributes.push(new e.org.pkijs.simpl.ATTRIBUTE({schema:n[i]}))},e.org.pkijs.simpl.x509.SubjectDirectoryAttributes.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.attributes.length;r++)t.push(this.attributes[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.SubjectDirectoryAttributes.prototype.toJSON=function(){for(var e={attributes:new Array},t=0;t<this.attributes.length;t++)e.attributes.push(this.attributes[t].toJSON());return e},e.org.pkijs.simpl.x509.PolicyMapping=function(){this.issuerDomainPolicy="",this.subjectDomainPolicy="",arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PolicyMapping.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.issuerDomainPolicy=arguments[0].issuerDomainPolicy||"",this.subjectDomainPolicy=arguments[0].subjectDomainPolicy||"")},e.org.pkijs.simpl.x509.PolicyMapping.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PolicyMapping({names:{issuerDomainPolicy:"issuerDomainPolicy",subjectDomainPolicy:"subjectDomainPolicy"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMapping");this.issuerDomainPolicy=r.result.issuerDomainPolicy.value_block.toString(),this.subjectDomainPolicy=r.result.subjectDomainPolicy.value_block.toString()},e.org.pkijs.simpl.x509.PolicyMapping.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.OID({value:this.issuerDomainPolicy}),new e.org.pkijs.asn1.OID({value:this.subjectDomainPolicy})]})},e.org.pkijs.simpl.x509.PolicyMapping.prototype.toJSON=function(){return{issuerDomainPolicy:this.issuerDomainPolicy,subjectDomainPolicy:this.subjectDomainPolicy}},e.org.pkijs.simpl.x509.PolicyMappings=function(){this.mappings=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PolicyMappings.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.mappings=arguments[0].mappings||new Array)},e.org.pkijs.simpl.x509.PolicyMappings.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PolicyMappings({names:{mappings:"mappings"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyMappings");for(var n=r.result.mappings,i=0;i<n.length;i++)this.mappings.push(new e.org.pkijs.simpl.x509.PolicyMapping({schema:n[i]}))},e.org.pkijs.simpl.x509.PolicyMappings.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.mappings.length;r++)t.push(this.mappings.toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.PolicyMappings.prototype.toJSON=function(){for(var e={mappings:new Array},t=0;t<this.mappings.length;t++)e.mappings.push(this.mappings[t].toJSON());return e},e.org.pkijs.simpl.x509.GeneralSubtree=function(){this.base=new e.org.pkijs.simpl.GENERAL_NAME,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.GeneralSubtree.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.base=arguments[0].base||new e.org.pkijs.simpl.GENERAL_NAME,"minimum"in arguments[0]&&(this.minimum=arguments[0].minimum),"maximum"in arguments[0]&&(this.maximum=arguments[0].maximum))},e.org.pkijs.simpl.x509.GeneralSubtree.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.GeneralSubtree({names:{base:{names:{block_name:"base"}},minimum:"minimum",maximum:"maximum"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ");this.base=new e.org.pkijs.simpl.GENERAL_NAME({schema:r.result.base}),"minimum"in r.result&&(r.result.minimum.value_block.is_hex_only?this.minimum=r.result.minimum:this.minimum=r.result.minimum.value_block.value_dec),"maximum"in r.result&&(r.result.maximum.value_block.is_hex_only?this.maximum=r.result.maximum:this.maximum=r.result.maximum.value_block.value_dec)},e.org.pkijs.simpl.x509.GeneralSubtree.prototype.toSchema=function(){var t=new Array;if(t.push(this.base.toSchema()),"minimum"in this){var r=0;r=this.minimum instanceof e.org.pkijs.asn1.INTEGER?this.minimum:new e.org.pkijs.asn1.INTEGER({value:this.minimum}),t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[r]}))}if("maximum"in this){var n=0;n=this.maximum instanceof e.org.pkijs.asn1.INTEGER?this.maximum:new e.org.pkijs.asn1.INTEGER({value:this.maximum}),t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[n]}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.GeneralSubtree.prototype.toJSON=function(){var e={base:this.base.toJSON()};return"minimum"in this&&("number"==typeof this.minimum?e.minimum=this.minimum:e.minimum=this.minimum.toJSON()),"maximum"in this&&("number"==typeof this.maximum?e.maximum=this.maximum:e.maximum=this.maximum.toJSON()),e},e.org.pkijs.simpl.x509.NameConstraints=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.NameConstraints.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("permittedSubtrees"in arguments[0]&&(this.permittedSubtrees=arguments[0].permittedSubtrees),"excludedSubtrees"in arguments[0]&&(this.excludedSubtrees=arguments[0].excludedSubtrees))},e.org.pkijs.simpl.x509.NameConstraints.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.NameConstraints({names:{permittedSubtrees:"permittedSubtrees",excludedSubtrees:"excludedSubtrees"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for NameConstraints");if("permittedSubtrees"in r.result){this.permittedSubtrees=new Array;for(var n=r.result.permittedSubtrees,i=0;i<n.length;i++)this.permittedSubtrees.push(new e.org.pkijs.simpl.x509.GeneralSubtree({schema:n[i]}))}if("excludedSubtrees"in r.result){this.excludedSubtrees=new Array;for(var s=r.result.excludedSubtrees,i=0;i<s.length;i++)this.excludedSubtrees.push(new e.org.pkijs.simpl.x509.GeneralSubtree({schema:s[i]}))}},e.org.pkijs.simpl.x509.NameConstraints.prototype.toSchema=function(){var t=new Array;if("permittedSubtrees"in this){for(var r=new Array,n=0;n<this.permittedSubtrees.length;n++)r.push(this.permittedSubtrees[n].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.SEQUENCE({value:r})]}))}if("excludedSubtrees"in this){for(var i=new Array,n=0;n<this.excludedSubtrees.length;n++)i.push(this.excludedSubtrees[n].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:1},value:[new e.org.pkijs.asn1.SEQUENCE({value:i})]}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.NameConstraints.prototype.toJSON=function(){var e={};if("permittedSubtrees"in this){e.permittedSubtrees=new Array;for(var t=0;t<this.permittedSubtrees.length;t++)e.permittedSubtrees.push(this.permittedSubtrees[t].toJSON())}if("excludedSubtrees"in this){e.excludedSubtrees=new Array;for(var t=0;t<this.excludedSubtrees.length;t++)e.excludedSubtrees.push(this.excludedSubtrees[t].toJSON())}return e},e.org.pkijs.simpl.x509.BasicConstraints=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.BasicConstraints.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("cA"in arguments[0]&&(this.cA=arguments[0].cA),"pathLenConstraint"in arguments[0]&&(this.pathLenConstraint=arguments[0].pathLenConstraint))},e.org.pkijs.simpl.x509.BasicConstraints.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.BasicConstraints({names:{cA:"cA",pathLenConstraint:"pathLenConstraint"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for BasicConstraints");"cA"in r.result&&(this.cA=r.result.cA.value_block.value),"pathLenConstraint"in r.result&&(this.pathLenConstraint=r.result.pathLenConstraint.value_block.value_dec)},e.org.pkijs.simpl.x509.BasicConstraints.prototype.toSchema=function(){var t=new Array;return"cA"in this&&t.push(new e.org.pkijs.asn1.BOOLEAN({value:this.cA})),"pathLenConstraint"in this&&t.push(new e.org.pkijs.asn1.INTEGER({value:this.pathLenConstraint})),new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.BasicConstraints.prototype.toJSON=function(){var e={};return"cA"in this&&(e.cA=this.cA),"pathLenConstraint"in this&&(e.pathLenConstraint=this.pathLenConstraint),e},e.org.pkijs.simpl.x509.PolicyQualifierInfo=function(){this.policyQualifierId="",this.qualifier=new e.org.pkijs.asn1.ANY,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PolicyQualifierInfo.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.policyQualifierId=arguments[0].policyQualifierId||"",this.qualifier=arguments[0].qualifier||new e.org.pkijs.asn1.ANY)},e.org.pkijs.simpl.x509.PolicyQualifierInfo.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PolicyQualifierInfo({names:{policyQualifierId:"policyQualifierId",qualifier:"qualifier"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyQualifierInfo");this.policyQualifierId=r.result.policyQualifierId.value_block.toString(),this.qualifier=r.result.qualifier},e.org.pkijs.simpl.x509.PolicyQualifierInfo.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.OID({value:this.policyQualifierId}),this.qualifier]})},e.org.pkijs.simpl.x509.PolicyQualifierInfo.prototype.toJSON=function(){return{policyQualifierId:this.policyQualifierId,qualifier:this.qualifier.toJSON()}},e.org.pkijs.simpl.x509.PolicyInformation=function(){this.policyIdentifier="",arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PolicyInformation.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.policyIdentifier=arguments[0].policyIdentifier||"","policyQualifiers"in arguments[0]&&(this.policyQualifiers=arguments[0].policyQualifiers))},e.org.pkijs.simpl.x509.PolicyInformation.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PolicyInformation({names:{policyIdentifier:"policyIdentifier",policyQualifiers:"policyQualifiers"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyInformation");if(this.policyIdentifier=r.result.policyIdentifier.value_block.toString(),"policyQualifiers"in r.result){this.policyQualifiers=new Array;for(var n=r.result.policyQualifiers,i=0;i<n.length;i++)this.policyQualifiers.push(new e.org.pkijs.simpl.x509.PolicyQualifierInfo({schema:n[i]}))}},e.org.pkijs.simpl.x509.PolicyInformation.prototype.toSchema=function(){var t=new Array;if(t.push(new e.org.pkijs.asn1.OID({value:this.policyIdentifier})),"policyQualifiers"in this){for(var r=new Array,n=0;n<this.policyQualifiers.length;n++)r.push(this.policyQualifiers[n].toSchema());t.push(new e.org.pkijs.asn1.SEQUENCE({value:r}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.PolicyInformation.prototype.toJSON=function(){var e={policyIdentifier:this.policyIdentifier};if("policyQualifiers"in this){e.policyQualifiers=new Array;for(var t=0;t<this.policyQualifiers.length;t++)e.policyQualifiers.push(this.policyQualifiers[t].toJSON())}return e},e.org.pkijs.simpl.x509.CertificatePolicies=function(){this.certificatePolicies=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.CertificatePolicies.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.certificatePolicies=arguments[0].certificatePolicies||new Array)},e.org.pkijs.simpl.x509.CertificatePolicies.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.CertificatePolicies({names:{certificatePolicies:"certificatePolicies"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CertificatePolicies");for(var n=r.result.certificatePolicies,i=0;i<n.length;i++)this.certificatePolicies.push(new e.org.pkijs.simpl.x509.PolicyInformation({schema:n[i]}))},e.org.pkijs.simpl.x509.CertificatePolicies.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.certificatePolicies.length;r++)t.push(this.certificatePolicies[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.CertificatePolicies.prototype.toJSON=function(){for(var e={certificatePolicies:new Array},t=0;t<this.certificatePolicies.length;t++)e.certificatePolicies.push(this.certificatePolicies[t].toJSON());return e},e.org.pkijs.simpl.x509.PolicyConstraints=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.PolicyConstraints.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.requireExplicitPolicy=arguments[0].requireExplicitPolicy||0,this.inhibitPolicyMapping=arguments[0].inhibitPolicyMapping||0)},e.org.pkijs.simpl.x509.PolicyConstraints.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.PolicyConstraints({names:{requireExplicitPolicy:"requireExplicitPolicy",inhibitPolicyMapping:"inhibitPolicyMapping"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PolicyConstraints");if("requireExplicitPolicy"in r.result){var n=r.result.requireExplicitPolicy;n.id_block.tag_class=1,n.id_block.tag_number=2;var i=n.toBER(!1),s=e.org.pkijs.fromBER(i);this.requireExplicitPolicy=s.result.value_block.value_dec}if("inhibitPolicyMapping"in r.result){var o=r.result.inhibitPolicyMapping;o.id_block.tag_class=1,o.id_block.tag_number=2;var a=o.toBER(!1),c=e.org.pkijs.fromBER(a);this.inhibitPolicyMapping=c.result.value_block.value_dec}},e.org.pkijs.simpl.x509.PolicyConstraints.prototype.toSchema=function(){var t=new Array;if("requireExplicitPolicy"in this){var r=new e.org.pkijs.asn1.INTEGER({value:this.requireExplicitPolicy});r.id_block.tag_class=3,r.id_block.tag_number=0,t.push(r)}if("inhibitPolicyMapping"in this){var n=new e.org.pkijs.asn1.INTEGER({
value:this.inhibitPolicyMapping});r.id_block.tag_class=3,r.id_block.tag_number=1,t.push(n)}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.PolicyConstraints.prototype.toJSON=function(){var e={};return"requireExplicitPolicy"in this&&(e.requireExplicitPolicy=this.requireExplicitPolicy),"inhibitPolicyMapping"in this&&(e.inhibitPolicyMapping=this.inhibitPolicyMapping),e},e.org.pkijs.simpl.x509.ExtKeyUsage=function(){this.keyPurposes=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.ExtKeyUsage.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.keyPurposes=arguments[0].keyPurposes||new Array)},e.org.pkijs.simpl.x509.ExtKeyUsage.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.ExtKeyUsage({names:{keyPurposes:"keyPurposes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ExtKeyUsage");for(var n=r.result.keyPurposes,i=0;i<n.length;i++)this.keyPurposes.push(n[i].value_block.toString())},e.org.pkijs.simpl.x509.ExtKeyUsage.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.keyPurposes.length;r++)t.push(new e.org.pkijs.asn1.OID({value:this.keyPurposes[r]}));return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.ExtKeyUsage.prototype.toJSON=function(){for(var e={keyPurposes:new Array},t=0;t<this.keyPurposes.length;t++)e.keyPurposes.push(this.keyPurposes[t]);return e},e.org.pkijs.simpl.x509.DistributionPoint=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.DistributionPoint.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("distributionPoint"in arguments[0]&&(this.distributionPoint=arguments[0].distributionPoint),"reasons"in arguments[0]&&(this.reasons=arguments[0].reasons),"cRLIssuer"in arguments[0]&&(this.cRLIssuer=arguments[0].cRLIssuer))},e.org.pkijs.simpl.x509.DistributionPoint.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.DistributionPoint({names:{distributionPoint:"distributionPoint",distributionPoint_names:"distributionPoint_names",reasons:"reasons",cRLIssuer:"cRLIssuer",cRLIssuer_names:"cRLIssuer_names"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for DistributionPoint");if("distributionPoint"in r.result){if(0==r.result.distributionPoint.id_block.tag_number){this.distributionPoint=new Array;for(var n=r.result.distributionPoint_names,i=0;i<n.length;i++)this.distributionPoint.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:n[i]}))}1==r.result.distributionPoint.id_block.tag_number&&(r.result.distributionPoint.id_block.tag_class=1,r.result.distributionPoint.id_block.tag_number=16,this.distributionPoint=new e.org.pkijs.simpl.RDN({schema:r.result.distributionPoint}))}if("reasons"in r.result&&(this.reasons=new e.org.pkijs.asn1.BITSTRING({value_hex:r.result.reasons.value_block.value_hex})),"cRLIssuer"in r.result){this.cRLIssuer=new Array;for(var s=r.result.cRLIssuer_names,i=0;s>i;i++)this.cRLIssuer.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:s[i]}))}},e.org.pkijs.simpl.x509.DistributionPoint.prototype.toSchema=function(){var t=new Array;if("distributionPoint"in this){var r;if(this.distributionPoint instanceof Array){for(var n=new Array,i=0;i<this.distributionPoint.length;i++)n.push(this.distributionPoint[i].toSchema());r=new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},value:n})}else r=new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:1},value:[this.distributionPoint.toSchema()]});t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},value:[r]}))}if("reasons"in this&&t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:1},value_hex:this.reasons.value_block.value_hex})),"cRLIssuer"in this){for(var s=new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:2}}),i=0;i<this.cRLIssuer.length;i++)s.value_block.value.push(this.cRLIssuer[i].toSchema());t.push(s)}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.DistributionPoint.prototype.toJSON=function(){var e={};if("distributionPoint"in this)if(this.distributionPoint instanceof Array){e.distributionPoint=new Array;for(var t=0;t<this.distributionPoint.length;t++)e.distributionPoint.push(this.distributionPoint[t].toJSON())}else e.distributionPoint=this.distributionPoint.toJSON();if("reasons"in this&&(e.reasons=this.reasons.toJSON()),"cRLIssuer"in this){e.cRLIssuer=new Array;for(var t=0;t<this.cRLIssuer.length;t++)e.cRLIssuer.push(this.cRLIssuer[t].toJSON())}return e},e.org.pkijs.simpl.x509.CRLDistributionPoints=function(){this.distributionPoints=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.CRLDistributionPoints.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.distributionPoints=arguments[0].distributionPoints||new Array)},e.org.pkijs.simpl.x509.CRLDistributionPoints.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.CRLDistributionPoints({names:{distributionPoints:"distributionPoints"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRLDistributionPoints");for(var n=r.result.distributionPoints,i=0;i<n.length;i++)this.distributionPoints.push(new e.org.pkijs.simpl.x509.DistributionPoint({schema:n[i]}))},e.org.pkijs.simpl.x509.CRLDistributionPoints.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.distributionPoints.length;r++)t.push(this.distributionPoints[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.CRLDistributionPoints.prototype.toJSON=function(){for(var e={distributionPoints:new Array},t=0;t<this.distributionPoints.length;t++)e.distributionPoints.push(this.distributionPoints[t].toJSON());return e},e.org.pkijs.simpl.x509.AccessDescription=function(){this.accessMethod="",this.accessLocation=new e.org.pkijs.simpl.GENERAL_NAME,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.AccessDescription.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.accessMethod=arguments[0].accessMethod||"",this.accessLocation=arguments[0].accessLocation||new e.org.pkijs.simpl.GENERAL_NAME)},e.org.pkijs.simpl.x509.AccessDescription.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.AccessDescription({names:{accessMethod:"accessMethod",accessLocation:{names:{block_name:"accessLocation"}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for AccessDescription");this.accessMethod=r.result.accessMethod.value_block.toString(),this.accessLocation=new e.org.pkijs.simpl.GENERAL_NAME({schema:r.result.accessLocation})},e.org.pkijs.simpl.x509.AccessDescription.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.OID({value:this.accessMethod}),this.accessLocation.toSchema()]})},e.org.pkijs.simpl.x509.AccessDescription.prototype.toJSON=function(){return{accessMethod:this.accessMethod,accessLocation:this.accessLocation.toJSON()}},e.org.pkijs.simpl.x509.InfoAccess=function(){this.accessDescriptions=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.InfoAccess.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.accessDescriptions=arguments[0].accessDescriptions||new Array)},e.org.pkijs.simpl.x509.InfoAccess.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.InfoAccess({names:{accessDescriptions:"accessDescriptions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for InfoAccess");for(var n=r.result.accessDescriptions,i=0;i<n.length;i++)this.accessDescriptions.push(new e.org.pkijs.simpl.x509.AccessDescription({schema:n[i]}))},e.org.pkijs.simpl.x509.InfoAccess.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.accessDescriptions.length;r++)t.push(this.accessDescriptions[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.InfoAccess.prototype.toJSON=function(){for(var e={accessDescriptions:new Array},t=0;t<this.accessDescriptions.length;t++)e.accessDescriptions.push(this.accessDescriptions[t].toJSON());return e},e.org.pkijs.simpl.x509.IssuingDistributionPoint=function(){arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.x509.IssuingDistributionPoint.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&("distributionPoint"in arguments[0]&&(this.distributionPoint=arguments[0].distributionPoint),"onlyContainsUserCerts"in arguments[0]&&(this.onlyContainsUserCerts=arguments[0].onlyContainsUserCerts),"onlyContainsCACerts"in arguments[0]&&(this.onlyContainsCACerts=arguments[0].onlyContainsCACerts),"onlySomeReasons"in arguments[0]&&(this.onlySomeReasons=arguments[0].onlySomeReasons),"indirectCRL"in arguments[0]&&(this.indirectCRL=arguments[0].indirectCRL),"onlyContainsAttributeCerts"in arguments[0]&&(this.onlyContainsAttributeCerts=arguments[0].onlyContainsAttributeCerts))},e.org.pkijs.simpl.x509.IssuingDistributionPoint.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.x509.IssuingDistributionPoint({names:{distributionPoint:"distributionPoint",distributionPoint_names:"distributionPoint_names",onlyContainsUserCerts:"onlyContainsUserCerts",onlyContainsCACerts:"onlyContainsCACerts",onlySomeReasons:"onlySomeReasons",indirectCRL:"indirectCRL",onlyContainsAttributeCerts:"onlyContainsAttributeCerts"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for IssuingDistributionPoint");if("distributionPoint"in r.result){if(0==r.result.distributionPoint.id_block.tag_number){this.distributionPoint=new Array;for(var n=r.result.distributionPoint_names,i=0;i<n.length;i++)this.distributionPoint.push(new e.org.pkijs.simpl.GENERAL_NAME({schema:n[i]}))}1==r.result.distributionPoint.id_block.tag_number&&(r.result.distributionPoint.id_block.tag_class=1,r.result.distributionPoint.id_block.tag_number=16,this.distributionPoint=new e.org.pkijs.simpl.RDN({schema:r.result.distributionPoint}))}if("onlyContainsUserCerts"in r.result){var s=new Uint8Array(r.result.onlyContainsUserCerts.value_block.value_hex);this.onlyContainsUserCerts=0!==s[0]}if("onlyContainsCACerts"in r.result){var s=new Uint8Array(r.result.onlyContainsCACerts.value_block.value_hex);this.onlyContainsCACerts=0!==s[0]}if("onlySomeReasons"in r.result){var s=new Uint8Array(r.result.onlySomeReasons.value_block.value_hex);this.onlySomeReasons=s[0]}if("indirectCRL"in r.result){var s=new Uint8Array(r.result.indirectCRL.value_block.value_hex);this.indirectCRL=0!==s[0]}if("onlyContainsAttributeCerts"in r.result){var s=new Uint8Array(r.result.onlyContainsAttributeCerts.value_block.value_hex);this.onlyContainsAttributeCerts=0!==s[0]}},e.org.pkijs.simpl.x509.IssuingDistributionPoint.prototype.toSchema=function(){var t=new Array;if("distributionPoint"in this){var r;if(this.distributionPoint instanceof Array){r=new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0}});for(var n=0;n<this.distributionPoint.length;n++)r.value_block.value.push(this.distributionPoint[n].toSchema())}else r=this.distributionPoint.toSchema(),r.id_block.tag_class=3,r.id_block.tag_number=1;t.push(r)}if("onlyContainsUserCerts"in this){var i=new ArrayBuffer(1),s=new Uint8Array(i);s[0]=this.onlyContainsUserCerts===!1?0:255,t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:1},value_hex:i}))}if("onlyContainsCACerts"in this){var i=new ArrayBuffer(1),s=new Uint8Array(i);s[0]=this.onlyContainsCACerts===!1?0:255,t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:2},value_hex:i}))}if("onlySomeReasons"in this){var i=new ArrayBuffer(1),s=new Uint8Array(i);s[0]=this.onlySomeReasons,t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:3},value_hex:i}))}if("indirectCRL"in this){var i=new ArrayBuffer(1),s=new Uint8Array(i);s[0]=this.indirectCRL===!1?0:255,t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:4},value_hex:i}))}if("onlyContainsAttributeCerts"in this){var i=new ArrayBuffer(1),s=new Uint8Array(i);s[0]=this.onlyContainsAttributeCerts===!1?0:255,t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({id_block:{tag_class:3,tag_number:5},value_hex:i}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.x509.IssuingDistributionPoint.prototype.toJSON=function(){var e={};if("distributionPoint"in this)if(this.distributionPoint instanceof Array){e.distributionPoint=new Array;for(var t=0;t<this.distributionPoint.length;t++)e.distributionPoint.push(this.distributionPoint[t].toJSON())}else e.distributionPoint=this.distributionPoint.toJSON();return"onlyContainsUserCerts"in this&&(e.onlyContainsUserCerts=this.onlyContainsUserCerts),"onlyContainsCACerts"in this&&(e.onlyContainsCACerts=this.onlyContainsCACerts),"onlySomeReasons"in this&&(e.onlySomeReasons=this.onlySomeReasons.toJSON()),"indirectCRL"in this&&(e.indirectCRL=this.indirectCRL),"onlyContainsAttributeCerts"in this&&(e.onlyContainsAttributeCerts=this.onlyContainsAttributeCerts),e},e.org.pkijs.simpl.EXTENSION=function(){this.extnID="",this.critical=!1,this.extnValue=new e.org.pkijs.asn1.OCTETSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.EXTENSION.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.extnID=arguments[0].extnID||"",this.critical=arguments[0].critical||!1,"extnValue"in arguments[0]?this.extnValue=new e.org.pkijs.asn1.OCTETSTRING({value_hex:arguments[0].extnValue}):this.extnValue=new e.org.pkijs.asn1.OCTETSTRING,"parsedValue"in arguments[0]&&(this.parsedValue=arguments[0].parsedValue))},e.org.pkijs.simpl.EXTENSION.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.EXTENSION({names:{extnID:"extnID",critical:"critical",extnValue:"extnValue"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSION");this.extnID=r.result.extnID.value_block.toString(),"critical"in r.result&&(this.critical=r.result.critical.value_block.value),this.extnValue=r.result.extnValue;var r=e.org.pkijs.fromBER(this.extnValue.value_block.value_hex);if(-1!==r.offset)switch(this.extnID){case"2.5.29.9":this.parsedValue=new e.org.pkijs.simpl.x509.SubjectDirectoryAttributes({schema:r.result});break;case"2.5.29.14":this.parsedValue=r.result;break;case"2.5.29.15":this.parsedValue=r.result;break;case"2.5.29.16":this.parsedValue=new e.org.pkijs.simpl.x509.PrivateKeyUsagePeriod({schema:r.result});break;case"2.5.29.17":case"2.5.29.18":this.parsedValue=new e.org.pkijs.simpl.x509.AltName({schema:r.result});break;case"2.5.29.19":this.parsedValue=new e.org.pkijs.simpl.x509.BasicConstraints({schema:r.result});break;case"2.5.29.20":case"2.5.29.27":this.parsedValue=r.result;break;case"2.5.29.21":this.parsedValue=r.result;break;case"2.5.29.24":this.parsedValue=r.result;break;case"2.5.29.28":this.parsedValue=new e.org.pkijs.simpl.x509.IssuingDistributionPoint({schema:r.result});break;case"2.5.29.29":this.parsedValue=new e.org.pkijs.simpl.GENERAL_NAMES({schema:r.result});break;case"2.5.29.30":this.parsedValue=new e.org.pkijs.simpl.x509.NameConstraints({schema:r.result});break;case"2.5.29.31":case"2.5.29.46":this.parsedValue=new e.org.pkijs.simpl.x509.CRLDistributionPoints({schema:r.result});break;case"2.5.29.32":this.parsedValue=new e.org.pkijs.simpl.x509.CertificatePolicies({schema:r.result});break;case"2.5.29.33":this.parsedValue=new e.org.pkijs.simpl.x509.PolicyMappings({schema:r.result});break;case"2.5.29.35":this.parsedValue=new e.org.pkijs.simpl.x509.AuthorityKeyIdentifier({schema:r.result});break;case"2.5.29.36":this.parsedValue=new e.org.pkijs.simpl.x509.PolicyConstraints({schema:r.result});break;case"2.5.29.37":this.parsedValue=new e.org.pkijs.simpl.x509.ExtKeyUsage({schema:r.result});break;case"2.5.29.54":this.parsedValue=r.result;break;case"1.3.6.1.5.5.7.1.1":case"1.3.6.1.5.5.7.1.11":this.parsedValue=new e.org.pkijs.simpl.x509.InfoAccess({schema:r.result})}},e.org.pkijs.simpl.EXTENSION.prototype.toSchema=function(){var t=new Array;return t.push(new e.org.pkijs.asn1.OID({value:this.extnID})),this.critical&&t.push(new e.org.pkijs.asn1.BOOLEAN({value:this.critical})),t.push(this.extnValue),new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.EXTENSION.prototype.toJSON=function(){var e={extnID:this.extnID,critical:this.critical,extnValue:this.extnValue.toJSON()};return"parsedValue"in this&&(e.parsedValue=this.parsedValue.toJSON()),e},e.org.pkijs.simpl.EXTENSIONS=function(){this.extensions_array=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.EXTENSIONS.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.extensions_array=arguments[0].extensions_array||new Array)},e.org.pkijs.simpl.EXTENSIONS.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.EXTENSIONS({names:{extensions:"extensions"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for EXTENSIONS");for(var n=0;n<r.result.extensions.length;n++)this.extensions_array.push(new e.org.pkijs.simpl.EXTENSION({schema:r.result.extensions[n]}))},e.org.pkijs.simpl.EXTENSIONS.prototype.toSchema=function(){for(var t=new Array,r=0;r<this.extensions_array.length;r++)t.push(this.extensions_array[r].toSchema());return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.EXTENSIONS.prototype.toJSON=function(){for(var e={extensions_array:new Array},t=0;t<this.extensions_array.length;t++)e.extensions_array.push(this.extensions_array[t].toJSON());return e},e.org.pkijs.simpl.CERT=function(){this.tbs=new ArrayBuffer(0),this.serialNumber=new e.org.pkijs.asn1.INTEGER,this.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.issuer=new e.org.pkijs.simpl.RDN,this.notBefore=new e.org.pkijs.simpl.TIME,this.notAfter=new e.org.pkijs.simpl.TIME,this.subject=new e.org.pkijs.simpl.RDN,this.subjectPublicKeyInfo=new e.org.pkijs.simpl.PUBLIC_KEY_INFO,this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=new e.org.pkijs.asn1.BITSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.CERT.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.tbs=arguments[0].tbs||new ArrayBuffer(0),"version"in arguments[0]&&(this.version=arguments[0].version),this.serialNumber=arguments[0].serialNumber||new e.org.pkijs.asn1.INTEGER,this.signature=arguments[0].signature||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.issuer=arguments[0].issuer||new e.org.pkijs.simpl.RDN,this.notBefore=arguments[0].not_before||new e.org.pkijs.simpl.TIME,this.notAfter=arguments[0].not_after||new e.org.pkijs.simpl.TIME,this.subject=arguments[0].subject||new e.org.pkijs.simpl.RDN,this.subjectPublicKeyInfo=arguments[0].subjectPublicKeyInfo||new e.org.pkijs.simpl.PUBLIC_KEY_INFO,"issuerUniqueID"in arguments[0]&&(this.issuerUniqueID=arguments[0].issuerUniqueID),"subjectUniqueID"in arguments[0]&&(this.subjectUniqueID=arguments[0].subjectUniqueID),"extensions"in arguments[0]&&(this.extensions=arguments[0].extensions),this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=new e.org.pkijs.asn1.BITSTRING)},e.org.pkijs.simpl.CERT.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.CERT({names:{tbsCertificate:{names:{extensions:{names:{extensions:"tbsCertificate.extensions"}}}}}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CERT");if(this.tbs=r.result.tbsCertificate.value_before_decode,"tbsCertificate.version"in r.result&&(this.version=r.result["tbsCertificate.version"].value_block.value_dec),this.serialNumber=r.result["tbsCertificate.serialNumber"],this.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result["tbsCertificate.signature"]}),this.issuer=new e.org.pkijs.simpl.RDN({schema:r.result["tbsCertificate.issuer"]}),this.notBefore=new e.org.pkijs.simpl.TIME({schema:r.result["tbsCertificate.notBefore"]}),this.notAfter=new e.org.pkijs.simpl.TIME({schema:r.result["tbsCertificate.notAfter"]}),this.subject=new e.org.pkijs.simpl.RDN({schema:r.result["tbsCertificate.subject"]}),this.subjectPublicKeyInfo=new e.org.pkijs.simpl.PUBLIC_KEY_INFO({schema:r.result["tbsCertificate.subjectPublicKeyInfo"]}),"tbsCertificate.issuerUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.issuerUniqueID"].value_block.value_hex),"tbsCertificate.subjectUniqueID"in r.result&&(this.issuerUniqueID=r.result["tbsCertificate.subjectUniqueID"].value_block.value_hex),"tbsCertificate.extensions"in r.result){this.extensions=new Array;for(var n=r.result["tbsCertificate.extensions"],i=0;i<n.length;i++)this.extensions.push(new e.org.pkijs.simpl.EXTENSION({schema:n[i]}))}this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue},e.org.pkijs.simpl.CERT.prototype.encodeTBS=function(){var t=new Array;if("version"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.INTEGER({value:this.version})]})),t.push(this.serialNumber),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(new e.org.pkijs.asn1.SEQUENCE({value:[this.notBefore.toSchema(),this.notAfter.toSchema()]})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"issuerUniqueID"in this&&t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:1},value_hex:this.issuerUniqueID})),"subjectUniqueID"in this&&t.push(new e.org.pkijs.asn1.ASN1_PRIMITIVE({optional:!0,id_block:{tag_class:3,tag_number:2},value_hex:this.subjectUniqueID})),"subjectUniqueID"in this&&t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:3},value:[this.extensions.toSchema()]})),"extensions"in this){for(var r=new Array,n=0;n<this.extensions.length;n++)r.push(this.extensions[n].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:3},value:[new e.org.pkijs.asn1.SEQUENCE({value:r})]}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.CERT.prototype.toSchema=function(t){"undefined"==typeof t&&(t=!1);var r={};if(t===!1){if(0===this.tbs.length)return e.org.pkijs.schema.CERT().value[0];var n=e.org.pkijs.fromBER(this.tbs);r=n.result}else r=e.org.pkijs.simpl.CERT.prototype.encodeTBS.call(this);return new e.org.pkijs.asn1.SEQUENCE({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})},e.org.pkijs.simpl.CERT.prototype.verify=function(){var t=Promise.resolve(),r={},n=this.signatureValue,i=this.tbs,s=this;if(arguments[0]instanceof Object?"issuerCertificate"in arguments[0]&&(r=arguments[0].issuerCertificate.subjectPublicKeyInfo):this.issuer.isEqual(this.subject)&&(r=this.subjectPublicKeyInfo),r instanceof e.org.pkijs.simpl.PUBLIC_KEY_INFO==0)return new Promise(function(e,t){t("Please provide issuer certificate as a parameter")});var o=e.org.pkijs.getCrypto();if("undefined"==typeof o)return new Promise(function(e,t){t("Unable to create WebCrypto object")});var a=e.org.pkijs.getHashAlgorithm(this.signatureAlgorithm);return""===a?new Promise(function(e,t){t("Unsupported signature algorithm: "+s.signatureAlgorithm.algorithm_id)}):(t=t.then(function(){var t=e.org.pkijs.getAlgorithmByOID(s.signatureAlgorithm.algorithm_id);if("name"in t==0)return new Promise(function(e,t){t("Unsupported public key algorithm: "+s.signatureAlgorithm.algorithm_id)});var n=t.name,i=e.org.pkijs.getAlgorithmParameters(n,"importkey");"hash"in i.algorithm&&(i.algorithm.hash.name=a);var c=r.toSchema(),u=c.toBER(!1),l=new Uint8Array(u);return o.importKey("spki",l,i.algorithm,!0,i.usages)}),t=t.then(function(t){var r=e.org.pkijs.getAlgorithmParameters(t.algorithm.name,"verify");"hash"in r.algorithm&&(r.algorithm.hash.name=a);var c=n.value_block.value_hex;if("ECDSA"===t.algorithm.name){var u=e.org.pkijs.fromBER(c);c=e.org.pkijs.createECDSASignatureFromCMS(u.result)}if("RSA-PSS"===t.algorithm.name){var l;try{l=new e.org.pkijs.simpl.x509.RSASSA_PSS_params({schema:s.signatureAlgorithm.algorithm_params})}catch(p){return new Promise(function(e,t){t(p)})}"saltLength"in l?r.algorithm.saltLength=l.saltLength:r.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var g=e.org.pkijs.getAlgorithmByOID(l.hashAlgorithm.algorithm_id);if("name"in g==0)return new Promise(function(e,t){t("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithm_id)});h=g.name}r.algorithm.hash.name=h}return o.verify(r.algorithm,t,new Uint8Array(c),new Uint8Array(i))}))},e.org.pkijs.simpl.CERT.prototype.sign=function(t,r){var n=this;if("undefined"==typeof t)return new Promise(function(e,t){t("Need to provide a private key for signing")});if("undefined"==typeof r)r="SHA-1";else{var i=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===i)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)})}var s=e.org.pkijs.getAlgorithmParameters(t.algorithm.name,"sign");switch(s.algorithm.hash.name=r,t.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.signature.algorithm_id=e.org.pkijs.getOIDByAlgorithm(s.algorithm),n.signatureAlgorithm.algorithm_id=n.signature.algorithm_id;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":s.algorithm.saltLength=32;break;case"SHA-384":s.algorithm.saltLength=48;break;case"SHA-512":s.algorithm.saltLength=64}var o={};if("SHA-1"!==r.toUpperCase()){var a=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===a)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)});o.hashAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:a,algorithm_params:new e.org.pkijs.asn1.NULL}),o.maskGenAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.8",algorithm_params:o.hashAlgorithm.toSchema()})}20!==s.algorithm.saltLength&&(o.saltLength=s.algorithm.saltLength);var c=new e.org.pkijs.simpl.x509.RSASSA_PSS_params(o);n.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.10",algorithm_params:c.toSchema()}),n.signatureAlgorithm=n.signature;break;default:return new Promise(function(e,r){r("Unsupported signature algorithm: "+t.algorithm.name)})}n.tbs=e.org.pkijs.simpl.CERT.prototype.encodeTBS.call(this).toBER(!1);var u=e.org.pkijs.getCrypto();return"undefined"==typeof u?new Promise(function(e,t){t("Unable to create WebCrypto object")}):u.sign(s.algorithm,t,new Uint8Array(n.tbs)).then(function(t){"ECDSA"===s.algorithm.name&&(t=e.org.pkijs.createCMSECDSASignature(t)),n.signatureValue=new e.org.pkijs.asn1.BITSTRING({value_hex:t})},function(e){return new Promise(function(t,r){r("Signing error: "+e)})})},e.org.pkijs.simpl.CERT.prototype.getPublicKey=function(){var t,r=e.org.pkijs.getCrypto();if("undefined"==typeof r)return new Promise(function(e,t){t("Unable to create WebCrypto object")});if(arguments[0]instanceof Object){if(!("algorithm"in arguments[0]))return new Promise(function(e,t){t('Absent mandatory parameter "algorithm"')});t=arguments[0].algorithm}else{var n=e.org.pkijs.getHashAlgorithm(this.signatureAlgorithm);if(""===n)return new Promise(function(e,t){t("Unsupported signature algorithm: "+_this.signatureAlgorithm.algorithm_id)});var i=e.org.pkijs.getAlgorithmByOID(this.signatureAlgorithm.algorithm_id);if("name"in i==0)return new Promise(function(e,t){t("Unsupported public key algorithm: "+_this.signatureAlgorithm.algorithm_id)});var s=i.name;t=e.org.pkijs.getAlgorithmParameters(s,"importkey"),"hash"in t.algorithm&&(t.algorithm.hash.name=n)}var o=this.subjectPublicKeyInfo.toSchema(),a=o.toBER(!1),c=new Uint8Array(a);return r.importKey("spki",c,t.algorithm,!0,t.usages)},e.org.pkijs.simpl.CERT.prototype.getKeyHash=function(){var t=e.org.pkijs.getCrypto();return"undefined"==typeof t?new Promise(function(e,t){t("Unable to create WebCrypto object")}):t.digest({name:"sha-1"},new Uint8Array(this.subjectPublicKeyInfo.subjectPublicKey.value_block.value_hex))},e.org.pkijs.simpl.CERT.prototype.toJSON=function(){var t={tbs:e.org.pkijs.bufferToHexCodes(this.tbs,0,this.tbs.byteLength),serialNumber:this.serialNumber.toJSON(),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),notBefore:this.notBefore.toJSON(),notAfter:this.notAfter.toJSON(),subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if("version"in this&&(t.version=this.version),"issuerUniqueID"in this&&(t.issuerUniqueID=e.org.pkijs.bufferToHexCodes(this.issuerUniqueID,0,this.issuerUniqueID.byteLength)),"subjectUniqueID"in this&&(t.subjectUniqueID=e.org.pkijs.bufferToHexCodes(this.subjectUniqueID,0,this.subjectUniqueID.byteLength)),"extensions"in this){t.extensions=new Array;for(var r=0;r<this.extensions.length;r++)t.extensions.push(this.extensions[r].toJSON())}return t},e.org.pkijs.simpl.REV_CERT=function(){this.userCertificate=new e.org.pkijs.asn1.INTEGER,this.revocationDate=new e.org.pkijs.simpl.TIME,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.REV_CERT.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.userCertificate=arguments[0].userCertificate||new e.org.pkijs.asn1.INTEGER,this.revocationDate=arguments[0].revocationDate||new e.org.pkijs.simpl.TIME,"crlEntryExtensions"in arguments[0]&&(this.crlEntryExtensions=arguments[0].crlEntryExtensions))},e.org.pkijs.simpl.REV_CERT.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.INTEGER({name:"userCertificate"}),e.org.pkijs.schema.TIME({names:{utcTimeName:"revocationDate",generalTimeName:"revocationDate"}}),e.org.pkijs.schema.EXTENSIONS({names:{block_name:"crlEntryExtensions"}},!0)]}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for REV_CERT");if(this.userCertificate=r.result.userCertificate,this.revocationDate=new e.org.pkijs.simpl.TIME({schema:r.result.revocationDate}),"crlEntryExtensions"in r.result){this.crlEntryExtensions=new Array;for(var n=r.result.crlEntryExtensions.value_block.value,i=0;i<n.length;i++)this.crlEntryExtensions.push(new e.org.pkijs.simpl.EXTENSION({schema:n[i]}))}},e.org.pkijs.simpl.REV_CERT.prototype.toSchema=function(){var t=new Array;if(t.push(this.userCertificate),t.push(this.revocationDate.toSchema()),"crlEntryExtensions"in this){for(var r=new Array,n=0;n<this.crlEntryExtensions.length;n++)r.push(this.crlEntryExtensions[n].toSchema());t.push(new e.org.pkijs.asn1.SEQUENCE({value:r}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.REV_CERT.prototype.toJSON=function(){var e={userCertificate:this.userCertificate.toJSON(),revocationDate:this.revocationDate.toJSON};if("crlEntryExtensions"in this){e.crlEntryExtensions=new Array;for(var t=0;t<this.crlEntryExtensions.length;t++)e.crlEntryExtensions.push(this.crlEntryExtensions[t].toJSON())}return e},e.org.pkijs.simpl.CRL=function(){this.tbs=new ArrayBuffer(0),this.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.issuer=new e.org.pkijs.simpl.RDN,this.thisUpdate=new e.org.pkijs.simpl.TIME,this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=new e.org.pkijs.asn1.BITSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.CRL.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.tbs=arguments[0].tbs||new ArrayBuffer(0),"version"in arguments[0]&&(this.version=arguments[0].version),
this.signature=arguments[0].signature||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.issuer=arguments[0].issuer||new e.org.pkijs.simpl.RDN,this.thisUpdate=arguments[0].thisUpdate||new e.org.pkijs.simpl.TIME,"nextUpdate"in arguments[0]&&(this.nextUpdate=arguments[0].nextUpdate),"revokedCertificates"in arguments[0]&&(this.revokedCertificates=arguments[0].revokedCertificates),"crlExtensions"in arguments[0]&&(this.crlExtensions=arguments[0].crlExtensions),this.signatureAlgorithm=arguments[0].signatureAlgorithm||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=arguments[0].signatureValue||new e.org.pkijs.asn1.BITSTRING)},e.org.pkijs.simpl.CRL.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.CRL());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for CRL");if(this.tbs=r.result.tbsCertList.value_before_decode,"tbsCertList.version"in r.result&&(this.version=r.result["tbsCertList.version"].value_block.value_dec),this.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result["tbsCertList.signature"]}),this.issuer=new e.org.pkijs.simpl.RDN({schema:r.result["tbsCertList.issuer"]}),this.thisUpdate=new e.org.pkijs.simpl.TIME({schema:r.result["tbsCertList.thisUpdate"]}),"tbsCertList.nextUpdate"in r.result&&(this.nextUpdate=new e.org.pkijs.simpl.TIME({schema:r.result["tbsCertList.nextUpdate"]})),"tbsCertList.revokedCertificates"in r.result){this.revokedCertificates=new Array;for(var n=r.result["tbsCertList.revokedCertificates"],i=0;i<n.length;i++)this.revokedCertificates.push(new e.org.pkijs.simpl.REV_CERT({schema:n[i]}))}if("tbsCertList.extensions"in r.result){this.crlExtensions=new Array;for(var s=r.result["tbsCertList.extensions"].value_block.value,i=0;i<s.length;i++)this.crlExtensions.push(new e.org.pkijs.simpl.EXTENSION({schema:s[i]}))}this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue},e.org.pkijs.simpl.CRL.prototype.encodeTBS=function(){var t=new Array;if("version"in this&&t.push(new e.org.pkijs.asn1.INTEGER({value:this.version})),t.push(this.signature.toSchema()),t.push(this.issuer.toSchema()),t.push(this.thisUpdate.toSchema()),"nextUpdate"in this&&t.push(this.nextUpdate.toSchema()),"revokedCertificates"in this){for(var r=new Array,n=0;n<this.revokedCertificates.length;n++)r.push(this.revokedCertificates[n].toSchema());t.push(new e.org.pkijs.asn1.SEQUENCE({value:r}))}if("crlExtensions"in this){for(var i=new Array,s=0;s<this.crlExtensions.length;s++)i.push(this.crlExtensions[s].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:[new e.org.pkijs.asn1.SEQUENCE({value:i})]}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.CRL.prototype.toSchema=function(t){"undefined"==typeof t&&(t=!1);var r;if(t===!1){if(0===this.tbs.length)return e.org.pkijs.schema.CRL();r=e.org.pkijs.fromBER(this.tbs).result}else r=e.org.pkijs.simpl.CRL.prototype.encodeTBS.call(this);return new e.org.pkijs.asn1.SEQUENCE({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})},e.org.pkijs.simpl.CRL.prototype.verify=function(){var t=Promise.resolve(),r=this.signatureValue,n=this.tbs,i=-1,s=this;if(arguments[0]instanceof Object){if("issuerCertificate"in arguments[0]&&(i=arguments[0].issuerCertificate.subjectPublicKeyInfo,0==this.issuer.isEqual(arguments[0].issuerCertificate.subject)))return new Promise(function(e,t){e(!1)});"publicKeyInfo"in arguments[0]&&(i=arguments[0].publicKeyInfo)}if(i instanceof e.org.pkijs.simpl.PUBLIC_KEY_INFO==0)return new Promise(function(e,t){t("Issuer's certificate must be provided as an input parameter")});if("crlExtensions"in this)for(var o=0;o<this.crlExtensions.length;o++)if(this.crlExtensions[o].critical&&"parsedValue"in this.crlExtensions[o]==0)return new Promise(function(e,t){e(!1)});var a=e.org.pkijs.getCrypto();if("undefined"==typeof a)return new Promise(function(e,t){t("Unable to create WebCrypto object")});var c=e.org.pkijs.getHashAlgorithm(this.signatureAlgorithm);return""===c?new Promise(function(e,t){t("Unsupported signature algorithm: "+s.signatureAlgorithm.algorithm_id)}):(t=t.then(function(){var t=e.org.pkijs.getAlgorithmByOID(s.signature.algorithm_id);if("name"in t==="")return new Promise(function(e,t){t("Unsupported public key algorithm: "+s.signature.algorithm_id)});var r=t.name,n=e.org.pkijs.getAlgorithmParameters(r,"importkey");"hash"in n.algorithm&&(n.algorithm.hash.name=c);var o=i.toSchema(),u=o.toBER(!1),l=new Uint8Array(u);return a.importKey("spki",l,n.algorithm,!0,n.usages)}),t=t.then(function(t){var i=e.org.pkijs.getAlgorithmParameters(t.algorithm.name,"verify");"hash"in i.algorithm&&(i.algorithm.hash.name=c);var o=r.value_block.value_hex;if("ECDSA"===t.algorithm.name){var u=e.org.pkijs.fromBER(o);o=e.org.pkijs.createECDSASignatureFromCMS(u.result)}if("RSA-PSS"===t.algorithm.name){var l;try{l=new e.org.pkijs.simpl.x509.RSASSA_PSS_params({schema:s.signatureAlgorithm.algorithm_params})}catch(p){return new Promise(function(e,t){t(p)})}"saltLength"in l?i.algorithm.saltLength=l.saltLength:i.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var g=e.org.pkijs.getAlgorithmByOID(l.hashAlgorithm.algorithm_id);if("name"in g==0)return new Promise(function(e,t){t("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithm_id)});h=g.name}i.algorithm.hash.name=h}return a.verify(i.algorithm,t,new Uint8Array(o),new Uint8Array(n))}))},e.org.pkijs.simpl.CRL.prototype.sign=function(t,r){var n=this;if("undefined"==typeof t)return new Promise(function(e,t){t("Need to provide a private key for signing")});if("undefined"==typeof r)r="SHA-1";else{var i=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===i)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)})}var s=e.org.pkijs.getAlgorithmParameters(t.algorithm.name,"sign");switch(s.algorithm.hash.name=r,t.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.signature.algorithm_id=e.org.pkijs.getOIDByAlgorithm(s.algorithm),n.signatureAlgorithm.algorithm_id=n.signature.algorithm_id;break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":s.algorithm.saltLength=32;break;case"SHA-384":s.algorithm.saltLength=48;break;case"SHA-512":s.algorithm.saltLength=64}var o={};if("SHA-1"!==r.toUpperCase()){var a=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===a)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)});o.hashAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:a,algorithm_params:new e.org.pkijs.asn1.NULL}),o.maskGenAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.8",algorithm_params:o.hashAlgorithm.toSchema()})}20!==s.algorithm.saltLength&&(o.saltLength=s.algorithm.saltLength);var c=new e.org.pkijs.simpl.x509.RSASSA_PSS_params(o);n.signature=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.10",algorithm_params:c.toSchema()}),n.signatureAlgorithm=n.signature;break;default:return new Promise(function(e,r){r("Unsupported signature algorithm: "+t.algorithm.name)})}n.tbs=e.org.pkijs.simpl.CRL.prototype.encodeTBS.call(this).toBER(!1);var u=e.org.pkijs.getCrypto();return"undefined"==typeof u?new Promise(function(e,t){t("Unable to create WebCrypto object")}):u.sign(s.algorithm,t,new Uint8Array(n.tbs)).then(function(t){"ECDSA"===s.algorithm.name&&(t=e.org.pkijs.createCMSECDSASignature(t)),n.signatureValue=new e.org.pkijs.asn1.BITSTRING({value_hex:t})},function(e){return new Promise(function(t,r){r("Signing error: "+e)})})},e.org.pkijs.simpl.CRL.prototype.isCertificateRevoked=function(){var t={};if(arguments[0]instanceof Object&&"certificate"in arguments[0]&&(t=arguments[0].certificate),t instanceof e.org.pkijs.simpl.CERT==0)return!1;if(this.issuer.isEqual(t.issuer)===!1)return!1;if("revokedCertificates"in this==0)return!1;for(var r=0;r<this.revokedCertificates.length;r++)if(this.revokedCertificates[r].userCertificate.isEqual(t.serialNumber))return!0;return!1},e.org.pkijs.simpl.CRL.prototype.toJSON=function(){var t={tbs:e.org.pkijs.bufferToHexCodes(this.tbs,0,this.tbs.byteLength),signature:this.signature.toJSON(),issuer:this.issuer.toJSON(),thisUpdate:this.thisUpdate.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if("version"in this&&(t.version=this.version),"nextUpdate"in this&&(t.nextUpdate=this.nextUpdate.toJSON()),"revokedCertificates"in this){t.revokedCertificates=new Array;for(var r=0;r<this.revokedCertificates.length;r++)t.revokedCertificates.push(this.revokedCertificates[r].toJSON())}if("crlExtensions"in this){t.crlExtensions=new Array;for(var r=0;r<this.crlExtensions.length;r++)t.crlExtensions.push(this.crlExtensions[r].toJSON())}return t},e.org.pkijs.simpl.ATTRIBUTE=function(){this.type="",this.values=new Array,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.ATTRIBUTE.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.type=arguments[0].type||"",this.values=arguments[0].values||new Array)},e.org.pkijs.simpl.ATTRIBUTE.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.ATTRIBUTE({names:{type:"type",values:"values"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for ATTRIBUTE");this.type=r.result.type.value_block.toString(),this.values=r.result.values},e.org.pkijs.simpl.ATTRIBUTE.prototype.toSchema=function(){return new e.org.pkijs.asn1.SEQUENCE({value:[new e.org.pkijs.asn1.OID({value:this.type}),new e.org.pkijs.asn1.SET({value:this.values})]})},e.org.pkijs.simpl.ATTRIBUTE.prototype.toJSON=function(){for(var e={type:this.type,values:new Array},t=0;t<this.values.length;t++)e.values.push(this.values[t].toJSON());return e},e.org.pkijs.simpl.PKCS10=function(){this.tbs=new ArrayBuffer(0),this.version=0,this.subject=new e.org.pkijs.simpl.RDN,this.subjectPublicKeyInfo=new e.org.pkijs.simpl.PUBLIC_KEY_INFO,this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=new e.org.pkijs.asn1.BITSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.PKCS10.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.tbs=arguments[0].tbs||new ArrayBuffer(0),this.version=arguments[0].version||0,this.subject=arguments[0].subject||new e.org.pkijs.simpl.RDN,this.subjectPublicKeyInfo=arguments[0].subjectPublicKeyInfo||new e.org.pkijs.simpl.PUBLIC_KEY_INFO,"attributes"in arguments[0]&&(this.attributes=arguments[0].attributes),this.signatureAlgorithm=arguments[0].signatureAlgorithm||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.signatureValue=arguments[0].signatureValue||new e.org.pkijs.asn1.BITSTRING)},e.org.pkijs.simpl.PKCS10.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.PKCS10());if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS10");if(this.tbs=r.result.CertificationRequestInfo.value_before_decode,this.version=r.result["CertificationRequestInfo.version"].value_block.value_dec,this.subject=new e.org.pkijs.simpl.RDN({schema:r.result["CertificationRequestInfo.subject"]}),this.subjectPublicKeyInfo=new e.org.pkijs.simpl.PUBLIC_KEY_INFO({schema:r.result["CertificationRequestInfo.subjectPublicKeyInfo"]}),"CertificationRequestInfo.attributes"in r.result){this.attributes=new Array;for(var n=r.result["CertificationRequestInfo.attributes"],i=0;i<n.length;i++)this.attributes.push(new e.org.pkijs.simpl.ATTRIBUTE({schema:n[i]}))}this.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.signatureAlgorithm}),this.signatureValue=r.result.signatureValue},e.org.pkijs.simpl.PKCS10.prototype.encodeTBS=function(){var t=new Array;if(t.push(new e.org.pkijs.asn1.INTEGER({value:this.version})),t.push(this.subject.toSchema()),t.push(this.subjectPublicKeyInfo.toSchema()),"attributes"in this){for(var r=new Array,n=0;n<this.attributes.length;n++)r.push(this.attributes[n].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({id_block:{tag_class:3,tag_number:0},value:r}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.PKCS10.prototype.toSchema=function(t){"undefined"==typeof t&&(t=!1);var r;if(t===!1){if(0===this.tbs.length)return e.org.pkijs.schema.PKCS10();r=e.org.pkijs.fromBER(this.tbs).result}else r=e.org.pkijs.simpl.PKCS10.prototype.encodeTBS.call(this);return new e.org.pkijs.asn1.SEQUENCE({value:[r,this.signatureAlgorithm.toSchema(),this.signatureValue]})},e.org.pkijs.simpl.PKCS10.prototype.verify=function(){var t=this,r="",n=Promise.resolve(),i=this.subjectPublicKeyInfo,s=this.signatureValue,o=this.tbs,a=e.org.pkijs.getCrypto();return"undefined"==typeof a?new Promise(function(e,t){t("Unable to create WebCrypto object")}):(r=e.org.pkijs.getHashAlgorithm(this.signatureAlgorithm),""===r?new Promise(function(e,r){r("Unsupported signature algorithm: "+t.signatureAlgorithm.algorithm_id)}):(n=n.then(function(){var n=e.org.pkijs.getAlgorithmByOID(t.signatureAlgorithm.algorithm_id);if("name"in n==0)return new Promise(function(e,r){r("Unsupported public key algorithm: "+t.signatureAlgorithm.algorithm_id)});var s=n.name,o=e.org.pkijs.getAlgorithmParameters(s,"importkey");"hash"in o.algorithm&&(o.algorithm.hash.name=r);var c=i.toSchema(),u=c.toBER(!1),l=new Uint8Array(u);return a.importKey("spki",l,o.algorithm,!0,o.usages)}),n=n.then(function(n){var i=e.org.pkijs.getAlgorithmParameters(n.algorithm.name,"verify");"hash"in i.algorithm&&(i.algorithm.hash.name=r);var c=s.value_block.value_hex;if("ECDSA"===n.algorithm.name){var u=e.org.pkijs.fromBER(c);c=e.org.pkijs.createECDSASignatureFromCMS(u.result)}if("RSA-PSS"===n.algorithm.name){var l;try{l=new e.org.pkijs.simpl.x509.RSASSA_PSS_params({schema:t.signatureAlgorithm.algorithm_params})}catch(p){return new Promise(function(e,t){t(p)})}"saltLength"in l?i.algorithm.saltLength=l.saltLength:i.algorithm.saltLength=20;var h="SHA-1";if("hashAlgorithm"in l){var g=e.org.pkijs.getAlgorithmByOID(l.hashAlgorithm.algorithm_id);if("name"in g==0)return new Promise(function(e,t){t("Unrecognized hash algorithm: "+l.hashAlgorithm.algorithm_id)});h=g.name}i.algorithm.hash.name=h}return a.verify(i.algorithm,n,new Uint8Array(c),new Uint8Array(o))})))},e.org.pkijs.simpl.PKCS10.prototype.sign=function(t,r){var n=this;if("undefined"==typeof t)return new Promise(function(e,t){t("Need to provide a private key for signing")});if("undefined"==typeof r)r="SHA-1";else{var i=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===i)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)})}var s=e.org.pkijs.getAlgorithmParameters(t.algorithm.name,"sign");switch(s.algorithm.hash.name=r,t.algorithm.name.toUpperCase()){case"RSASSA-PKCS1-V1_5":case"ECDSA":n.signatureAlgorithm.algorithm_id=e.org.pkijs.getOIDByAlgorithm(s.algorithm);break;case"RSA-PSS":switch(r.toUpperCase()){case"SHA-256":s.algorithm.saltLength=32;break;case"SHA-384":s.algorithm.saltLength=48;break;case"SHA-512":s.algorithm.saltLength=64}var o={};if("SHA-1"!==r.toUpperCase()){var a=e.org.pkijs.getOIDByAlgorithm({name:r});if(""===a)return new Promise(function(e,t){t("Unsupported hash algorithm: "+r)});o.hashAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:a,algorithm_params:new e.org.pkijs.asn1.NULL}),o.maskGenAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.8",algorithm_params:o.hashAlgorithm.toSchema()})}20!==s.algorithm.saltLength&&(o.saltLength=s.algorithm.saltLength);var c=new e.org.pkijs.simpl.x509.RSASSA_PSS_params(o);n.signatureAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({algorithm_id:"1.2.840.113549.1.1.10",algorithm_params:c.toSchema()});break;default:return new Promise(function(e,r){r("Unsupported signature algorithm: "+t.algorithm.name)})}n.tbs=e.org.pkijs.simpl.PKCS10.prototype.encodeTBS.call(this).toBER(!1);var u=e.org.pkijs.getCrypto();return"undefined"==typeof u?new Promise(function(e,t){t("Unable to create WebCrypto object")}):u.sign(s.algorithm,t,new Uint8Array(n.tbs)).then(function(t){"ECDSA"===s.algorithm.name&&(t=e.org.pkijs.createCMSECDSASignature(t)),n.signatureValue=new e.org.pkijs.asn1.BITSTRING({value_hex:t})},function(e){return new Promise(function(t,r){r("Signing error: "+e)})})},e.org.pkijs.simpl.PKCS10.prototype.toJSON=function(){var t={tbs:e.org.pkijs.bufferToHexCodes(this.tbs,0,this.tbs.byteLength),version:this.version,subject:this.subject.toJSON(),subjectPublicKeyInfo:this.subjectPublicKeyInfo.toJSON(),signatureAlgorithm:this.signatureAlgorithm.toJSON(),signatureValue:this.signatureValue.toJSON()};if("attributes"in this){t.attributes=new Array;for(var r=0;r<this.attributes.length;r++)t.attributes.push(this.attributes[r].toJSON())}return t},e.org.pkijs.simpl.PKCS8=function(){this.version=0,this.privateKeyAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.privateKey=new e.org.pkijs.asn1.OCTETSTRING,arguments[0]instanceof Object&&"schema"in arguments[0]?e.org.pkijs.simpl.PKCS8.prototype.fromSchema.call(this,arguments[0].schema):arguments[0]instanceof Object&&(this.version=arguments[0].version||0,this.privateKeyAlgorithm=arguments[0].privateKeyAlgorithm||new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER,this.privateKey=arguments[0].privateKey||new e.org.pkijs.asn1.OCTETSTRING,"attributes"in arguments[0]&&(this.attributes=arguments[0].attributes))},e.org.pkijs.simpl.PKCS8.prototype.fromSchema=function(t){var r=e.org.pkijs.compareSchema(t,t,e.org.pkijs.schema.PKCS8({names:{version:"version",privateKeyAlgorithm:{names:{block_name:"privateKeyAlgorithm"}},privateKey:"privateKey",attributes:"attributes"}}));if(r.verified===!1)throw new Error("Object's schema was not verified against input data for PKCS8");if(this.version=r.result.version.value_block.value_dec,this.privateKeyAlgorithm=new e.org.pkijs.simpl.ALGORITHM_IDENTIFIER({schema:r.result.privateKeyAlgorithm}),this.privateKey=r.result.privateKey,"attributes"in r.result){this.attributes=new Array;for(var n=r.result.attributes,i=0;i<n.length;i++)this.attributes.push(new e.org.pkijs.simpl.ATTRIBUTE({schema:n[i]}))}},e.org.pkijs.simpl.PKCS8.prototype.toSchema=function(){var t=new Array;if(t.push(new e.org.pkijs.asn1.INTEGER({value:this.version})),t.push(this.privateKeyAlgorithm.toSchema()),t.push(this.privateKey),"attributes"in this){for(var r=new Array,n=0;n<this.attributes.length;n++)r.push(this.attributes[n].toSchema());t.push(new e.org.pkijs.asn1.ASN1_CONSTRUCTED({optional:!0,id_block:{tag_class:3,tag_number:0},value:r}))}return new e.org.pkijs.asn1.SEQUENCE({value:t})},e.org.pkijs.simpl.PKCS8.prototype.toJSON=function(){var e={version:this.version,privateKeyAlgorithm:this.privateKeyAlgorithm.toJSON(),privateKey:this.privateKey.toJSON()};if("attributes"in this){e.attributes=new Array;for(var t=0;t<this.attributes.length;t++)e.attributes.push(this.attributes[t].toJSON())}return e},e.org.pkijs.simpl.CERT_CHAIN=function(){this.trusted_certs=new Array,this.certs=new Array,this.crls=new Array,arguments[0]instanceof Object&&(this.trusted_certs=arguments[0].trusted_certs||new Array,this.certs=arguments[0].certs||new Array,this.crls=arguments[0].crls||new Array)},e.org.pkijs.simpl.CERT_CHAIN.prototype.sort=function(){function e(e,t){function r(e){return o.crls[e].verify({issuerCertificate:t}).then(function(t){return t===!0?new Promise(function(t,r){t(o.crls[e])}):(e++,e<o.crls.length?r(e):new Promise(function(e,t){t({result:!1,result_code:9,result_message:"Unable to find CRL for issuer's certificate"})}))},function(e){return new Promise(function(e,t){t({result:!1,result_code:10,result_message:"Unable to find CRL for issuer's certificate"})})})}var n=Promise.resolve();return n=n.then(function(){return e.notBefore.value>s||e.notAfter.value<s?new Promise(function(e,t){t({result:!1,result_code:8,result_message:"Certificate validity period is out of checking date"})}):void 0}),0===o.crls.length?n.then(function(){return new Promise(function(e,t){e()})}):(n=n.then(function(){return r(0)}),n=n.then(function(t){return t.isCertificateRevoked({certificate:e})===!0?new Promise(function(e,t){t({result:!1,result_code:11,result_message:"Subject certificate was revoked"})}):new Promise(function(e,t){e()})},function(e){return new Promise(function(e,t){e()})}))}function t(){return r(m,0).then(function(r){if(n.push(i[r]),m=i[r],i.splice(r,1),m.issuer.isEqual(m.subject)===!0){for(var s=0===o.trusted_certs.length,a=0;a<o.trusted_certs.length;a++)if(m.issuer.isEqual(o.trusted_certs[a].issuer)===!0&&m.subject.isEqual(o.trusted_certs[a].subject)===!0&&m.serialNumber.isEqual(o.trusted_certs[a].serialNumber)===!0){s=!0;break}return s===!1?new Promise(function(e,t){t({result:!1,result_code:22,result_message:'Self-signed root certificate not in "trusted certificates" array'})}):m.verify().then(function(t){return t===!0?e(m,m).then(function(){return new Promise(function(e,t){e(n)})},function(e){return new Promise(function(t,r){r({result:!1,result_code:12,result_message:e})})}):new Promise(function(e,t){t({result:!1,result_code:13,result_message:"Unable to build certificate chain - signature of root certificate is invalid"})})},function(e){return new Promise(function(t,r){r({result:!1,result_code:14,result_message:e})})})}return i.length>0?t():0!==o.trusted_certs.length?(i=o.trusted_certs.splice(0),t()):new Promise(function(e,t){t({result:!1,result_code:23,result_message:"Root certificate not found"})})},function(e){return new Promise(function(t,r){r(e)})})}function r(t,n){return i[n].subject.isEqual(t.issuer)===!0?t.verify({issuerCertificate:i[n]}).then(function(s){return s===!0?e(t,i[n]).then(function(){return new Promise(function(e,t){e(n)})},function(e){return new Promise(function(t,r){r({result:!1,result_code:16,result_message:e})})}):n<i.length-1?r(t,n+1):new Promise(function(e,t){t({result:!1,result_code:17,result_message:"Unable to build certificate chain - incomplete certificate chain or signature of some certificate is invalid"})})},function(e){return new Promise(function(e,t){t({result:!1,result_code:18,result_message:"Unable to build certificate chain - error during certificate signature verification"})})}):n<i.length-1?r(t,n+1):new Promise(function(e,t){t({result:!1,result_code:19,result_message:"Unable to build certificate chain - incomplete certificate chain"})})}var n=new Array,i=this.certs.slice(0),s=new Date,o=this;if(0===i.length)return new Promise(function(e,t){t({result:!1,result_code:2,result_message:"Certificate's array can not be empty"})});for(var a=-1,c=0;c<i.length;c++){var u=!1;if("extensions"in i[c]){for(var l=!1,p=!1,h=!1,g=0;g<i[c].extensions.length;g++){if(i[c].extensions[g].critical===!0&&"parsedValue"in i[c].extensions[g]==0)return new Promise(function(e,t){t({result:!1,result_code:6,result_message:"Unable to parse critical certificate extension: "+i[c].extensions[g].extnID})});if("2.5.29.15"===i[c].extensions[g].extnID){p=!0;var f=new Uint8Array(i[c].extensions[g].parsedValue.value_block.value_hex);4===(4&f[0])&&(l=!0),2===(2&f[0])&&(h=!0)}"2.5.29.19"===i[c].extensions[g].extnID&&"cA"in i[c].extensions[g].parsedValue&&i[c].extensions[g].parsedValue.cA===!0&&(u=!0)}if(l===!0&&u===!1)return new Promise(function(e,t){t({result:!1,result_code:3,result_message:'Unable to build certificate chain - using "keyCertSign" flag set without BasicConstaints'})});if(p===!0&&u===!0&&l===!1)return new Promise(function(e,t){t({result:!1,result_code:4,result_message:'Unable to build certificate chain - "keyCertSign" flag was not set'})});if(u===!0&&p===!0&&h===!1)return new Promise(function(e,t){t({result:!1,result_code:5,result_message:'Unable to build certificate chain - intermediate certificate must have "cRLSign" key usage flag'})})}if(u===!1){if(0!==n.length)return new Promise(function(e,t){t({result:!1,result_code:7,result_message:"Unable to build certificate chain - more than one possible end-user certificate"})});n.push(i[c]),a=c}}if(i.splice(a,1),0===n.length)return new Promise(function(e,t){t({result:!1,result_code:1,result_message:"Can't find end-user certificate"})});if(0===i.length){if(n[0].issuer.isEqual(n[0].subject)===!0)return new Promise(function(e,t){e(n)});if(0===this.trusted_certs.length)return new Promise(function(e,t){t({result:!1,result_code:70,result_message:"Can't find root certificate"})});i=o.trusted_certs.splice(0)}var m=n[0];return t()},e.org.pkijs.simpl.CERT_CHAIN.prototype.verify=function(){if(0===this.certs.length)return new Promise(function(e,t){t("Empty certificate array")});var t=Promise.resolve(),r=this,n=new Array;n.push("2.5.29.32.0");var i=!1,s=!1,o=!1,a=new Array,c=new Array,u=new Array;new Date,arguments[0]instanceof Object&&("initial_policy_set"in arguments[0]&&(n=arguments[0].initial_policy_set),"initial_explicit_policy"in arguments[0]&&(i=arguments[0].initial_explicit_policy),"initial_policy_mapping_inhibit"in arguments[0]&&(s=arguments[0].initial_policy_mapping_inhibit),"initial_inhibit_policy"in arguments[0]&&(o=arguments[0].initial_inhibit_policy),"initial_permitted_subtrees_set"in arguments[0]&&(a=arguments[0].initial_permitted_subtrees_set),"initial_excluded_subtrees_set"in arguments[0]&&(c=arguments[0].initial_excluded_subtrees_set),"initial_required_name_forms"in arguments[0]&&(u=arguments[0].initial_required_name_forms));var l=i,p=s,h=o,g=new Array(3);g[0]=!1,g[1]=!1,g[2]=!1;var f=0,m=0,_=0,k=a,b=c,d=u,v=1;return t=e.org.pkijs.simpl.CERT_CHAIN.prototype.sort.call(this).then(function(e){r.certs=e}),t=t.then(function(){var e=new Array;e.push("2.5.29.32.0");for(var t=new Array,i=new Array(r.certs.length-1),s=0;s<r.certs.length-1;s++)i[s]=!0;t.push(i);for(var o=new Array(r.certs.length-1),a=new Array(r.certs.length-1),c=r.certs.length-2;c>=0;c--,v++)if("extensions"in r.certs[c]){for(var u=0;u<r.certs[c].extensions.length;u++){if("2.5.29.32"===r.certs[c].extensions[u].extnID){a[c]=r.certs[c].extensions[u].parsedValue;for(var k=0;k<r.certs[c].extensions[u].parsedValue.certificatePolicies.length;k++){for(var b=-1,d=0;d<e.length;d++)if(r.certs[c].extensions[u].parsedValue.certificatePolicies[k].policyIdentifier===e[d]){b=d;break}if(-1===b){e.push(r.certs[c].extensions[u].parsedValue.certificatePolicies[k].policyIdentifier);var y=new Array(r.certs.length-1);y[c]=!0,t.push(y)}else t[b][c]=!0}}"2.5.29.33"===r.certs[c].extensions[u].extnID&&(o[c]=r.certs[c].extensions[u].parsedValue),"2.5.29.36"===r.certs[c].extensions[u].extnID&&0==l&&(0===r.certs[c].extensions[u].parsedValue.requireExplicitPolicy?l=!0:g[0]===!1?(g[0]=!0,f=r.certs[c].extensions[u].parsedValue.requireExplicitPolicy):f=f>r.certs[c].extensions[u].parsedValue.requireExplicitPolicy?r.certs[c].extensions[u].parsedValue.requireExplicitPolicy:f,0===r.certs[c].extensions[u].parsedValue.inhibitPolicyMapping?p=!0:g[1]===!1?(g[1]=!0,m=r.certs[c].extensions[u].parsedValue.requireExplicitPolicy):m=m>r.certs[c].extensions[u].parsedValue.requireExplicitPolicy?r.certs[c].extensions[u].parsedValue.requireExplicitPolicy:m),"2.5.29.54"===r.certs[c].extensions[u].extnID&&h===!1&&(0===r.certs[c].extensions[u].parsedValue.value_block.value_dec?h=!0:g[2]===!1?(g[2]=!0,_=r.certs[c].extensions[u].parsedValue.value_block.value_dec):_=_>r.certs[c].extensions[u].parsedValue.value_block.value_dec?r.certs[c].extensions[u].parsedValue.value_block.value_dec:_)}if(h===!0&&delete t[0][c],"undefined"!=typeof a[c]&&"undefined"!=typeof o[c]&&p===!1)for(var E=0;E<a[c].certificatePolicies.length;E++){for(var S="",I=0;I<o[c].mappings.length;I++){if(o[c].mappings[I].subjectDomainPolicy===a[c].certificatePolicies[E].policyIdentifier){S=o[c].mappings[I].issuerDomainPolicy;break}if(o[c].mappings[I].issuerDomainPolicy===a[c].certificatePolicies[E].policyIdentifier){S=o[c].mappings[I].subjectDomainPolicy;break}}if(""!==S){for(var N=-1,A=0;A<e.length;A++)if(e[A]===S){N=A;break}-1!==N&&(t[N][c]=!0)}}l===!1&&g[0]===!0&&(f--,0===f&&(l=!0,g[0]=!1)),p===!1&&g[1]===!0&&(m--,0===m&&(p=!0,g[1]=!1)),h===!1&&g[2]===!0&&(_--,0===_&&(h=!0,g[2]=!1))}for(var w=new Array,c=0;c<t.length;c++){for(var j=!0,u=0;u<r.certs.length-1;u++)if("undefined"==typeof t[c][u]){j=!1;break}j===!0&&w.push(e[c])}for(var C=new Array,c=0;c<w.length;c++)for(var u=0;u<n.length;u++)if(n[u]===w[c]){C.push(n[u]);break}return{result:C.length>0,result_code:0,result_message:C.length>0?"":'Zero "user_constr_policies" array, no intersections with "auth_constr_policies"',auth_constr_policies:w,user_constr_policies:C,explicit_policy_indicator:l,policy_mappings:o}}),t=t.then(function(t){function n(t,r){var n=e.org.pkijs.stringPrep(t),i=e.org.pkijs.stringPrep(r),s=n.split("."),o=i.split("."),a=s.length,c=o.length;if(0===a||0===c||c>a)return!1;for(var u=0;a>u;u++)if(0===s[u].length)return!1;for(var u=0;c>u;u++)if(0===o[u].length){if(0===u){if(1===c)return!1;continue}return!1}for(var u=0;c>u;u++)if(0!==o[c-1-u].length&&0!==s[a-1-u].localeCompare(o[c-1-u]))return!1;return!0}function i(t,r){var i=e.org.pkijs.stringPrep(t),s=e.org.pkijs.stringPrep(r),o=i.split("@"),a=s.split("@");if(0===o.length||0===a.length||o.length<a.length)return!1;if(1===a.length){var c=n(o[1],a[0]);if(c){var u=o[1].split("."),l=a[0].split(".");return 0===l[0].length?!0:u.length===l.length}return!1}return 0===i.localeCompare(s)}function s(t,r){var i=e.org.pkijs.stringPrep(t),s=e.org.pkijs.stringPrep(r),o=i.split("/"),a=s.split("/");if(a.length>1)return!1;if(o.length>1)for(var c=0;c<o.length;c++)if(o[c].length>0&&":"!==o[c].charAt(o[c].length-1)){var u=o[c].split(":");i=u[0];break}var l=n(i,s);if(l){var p=i.split("."),h=s.split(".");return 0===h[0].length?!0:p.length===h.length}return!1}function o(e,t){var r=new Uint8Array(e.value_block.value_hex),n=new Uint8Array(t.value_block.value_hex);if(4===r.length&&8===n.length){for(var i=0;4>i;i++)if((r[i]^n[i])&n[i+4])return!1;return!0}if(16===r.length&&32===n.length){for(var i=0;16>i;i++)if((r[i]^n[i])&n[i+16])return!1;return!0}return!1}function a(e,t){if(0===e.types_and_values.length||0===t.types_and_values.length)return!0;if(e.types_and_values.length<t.types_and_values.length)return!1;for(var r=!0,n=0,i=0;i<t.types_and_values.length;i++){for(var s=!1,o=n;o<e.types_and_values.length;o++)if(s=e.types_and_values[o].isEqual(t.types_and_values[i]),e.types_and_values[o].type===t.types_and_values[i].type&&(r=r&&s),s===!0){if(0===n||n===o){n=o+1;break}return!1}if(s===!1)return!1}return 0===n?!1:r}if(t.result===!1)return t;v=1;for(var c=r.certs.length-2;c>=0;c--,v++){var u=new Array,l=new Array,p=new Array;if("extensions"in r.certs[c])for(var h=0;h<r.certs[c].extensions.length;h++)"2.5.29.30"===r.certs[c].extensions[h].extnID&&("permittedSubtrees"in r.certs[c].extensions[h].parsedValue&&(l=l.concat(r.certs[c].extensions[h].parsedValue.permittedSubtrees)),"excludedSubtrees"in r.certs[c].extensions[h].parsedValue&&(p=p.concat(r.certs[c].extensions[h].parsedValue.excludedSubtrees))),"2.5.29.17"===r.certs[c].extensions[h].extnID&&(u=u.concat(r.certs[c].extensions[h].parsedValue.altNames));for(var g=d.length<=0,h=0;h<d.length;h++)switch(d[h].base.NameType){case 4:if(d[h].base.Name.types_and_values.length!==r.certs[c].subject.types_and_values.length)continue;g=!0;for(var f=0;f<r.certs[c].subject.types_and_values.length;f++)if(r.certs[c].subject.types_and_values[f].type!==d[h].base.Name.types_and_values[f].type){g=!1;break}if(g===!0)break}if(g===!1)return t.result=!1,t.result_code=21,t.result_message="No neccessary name form found",new Promise(function(e,r){r(t)});var m=new Array;m[0]=new Array,m[1]=new Array,m[2]=new Array,m[3]=new Array,m[4]=new Array;for(var h=0;h<k.length;h++)switch(k[h].base.NameType){case 1:m[0].push(k[h]);break;case 2:m[1].push(k[h]);break;case 4:m[2].push(k[h]);break;case 6:m[3].push(k[h]);break;case 7:m[4].push(k[h])}for(var _=0;5>_;_++){for(var y=!1,E=!1,S=m[_],h=0;h<S.length;h++){switch(_){case 0:if(u.length>0)for(var f=0;f<u.length;f++)1===u[f].NameType&&(E=!0,y=y||i(u[f].Name,S[h].base.Name));else for(var f=0;f<r.certs[c].subject.types_and_values.length;f++)"1.2.840.113549.1.9.1"!==r.certs[c].subject.types_and_values[f].type&&"0.9.2342.19200300.100.1.3"!==r.certs[c].subject.types_and_values[f].type||(E=!0,
y=y||i(r.certs[c].subject.types_and_values[f].value.value_block.value,S[h].base.Name));break;case 1:if(u.length>0)for(var f=0;f<u.length;f++)2===u[f].NameType&&(E=!0,y=y||n(u[f].Name,S[h].base.Name));break;case 2:E=!0,y=a(r.certs[c].subject,S[h].base.Name);break;case 3:if(u.length>0)for(var f=0;f<u.length;f++)6===u[f].NameType&&(E=!0,y=y||s(u[f].Name,S[h].base.Name));break;case 4:if(u.length>0)for(var f=0;f<u.length;f++)7===u[f].NameType&&(E=!0,y=y||o(u[f].Name,S[h].base.Name))}if(y)break}if(y===!1&&S.length>0&&E)return t.result=!1,t.result_code=41,t.result_message='Failed to meet "permitted sub-trees" name constraint',new Promise(function(e,r){r(t)})}for(var I=!1,h=0;h<b.length;h++){switch(b[h].base.NameType){case 1:if(u.length>=0)for(var f=0;f<u.length;f++)1===u[f].NameType&&(I=I||i(u[f].Name,b[h].base.Name));else for(var f=0;f<r.subject.types_and_values.length;f++)"1.2.840.113549.1.9.1"!==r.subject.types_and_values[f].type&&"0.9.2342.19200300.100.1.3"!==r.subject.types_and_values[f].type||(I=I||i(r.subject.types_and_values[f].value.value_block.value,b[h].base.Name));break;case 2:if(u.length>0)for(var f=0;f<u.length;f++)2===u[f].NameType&&(I=I||n(u[f].Name,b[h].base.Name));break;case 4:I=I||a(r.certs[c].subject,b[h].base.Name);break;case 6:if(u.length>0)for(var f=0;f<u.length;f++)6===u[f].NameType&&(I=I||s(u[f].Name,b[h].base.Name));break;case 7:if(u.length>0)for(var f=0;f<u.length;f++)7===u[f].NameType&&(I=I||o(u[f].Name,b[h].base.Name))}if(I)break}if(I===!0)return t.result=!1,t.result_code=42,t.result_message='Failed to meet "excluded sub-trees" name constraint',new Promise(function(e,r){r(t)});k=k.concat(l),b=b.concat(p)}return t})}}("undefined"!=typeof exports?exports:window);var _get=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,r,n)}if("value"in i)return i.value;var o=i.get;return void 0!==o?o.call(n):void 0},_createClass=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),js_xmldsig;!function(e){wgxpath.install(),wgxpath.install({document:Document.prototype}),window.js_xmldsig=e}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){function t(e){var t,r;if(!e||"string"!=typeof e)return null;try{DOMParser?(r=new DOMParser,t=r.parseFromString(e,"text/xml")):(t=new ActiveXObject("Microsoft.XMLDOM"),t.async="false",t.loadXML(e))}catch(n){t=void 0}if(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)throw"Invalid XML: "+e;return t}function r(e){var t=new XMLSerializer;return t.serializeToString(e)}function n(e,t,r){for(var n=0;n<e.attributes.length;n++){var i=e.attributes[n];if(a(i,t,r)||c(i,t,r,e))return i}return null}function i(e,t){for(var r=e.ownerDocument.evaluate(t,e,null,XPathResult.ANY_TYPE,null),n=[],i=r.iterateNext();i;)n.push(i),i=r.iterateNext();return n}function s(e,t){var r=i(e,t);if(0==r.length)throw"could not find xpath "+t;return r[0]}function o(e,t,r){e=e.documentElement||e;for(var n=[],i=0;i<e.childNodes.length;i++){var s=e.childNodes[i];s.localName!=t||s.namespaceURI!=r&&r||n.push(s)}return n}function a(e,t,r){return e.localName==t&&(e.namespaceURI==r||!r)}function c(e,t,r,n){return e.localName==t&&(!e.namespaceURI&&n.namespaceURI==r||!r)}function u(e){return e.replace(/([\&<"\t\n\r])/g,function(e){return S[e]})}function l(e){return e.replace(/([\&<>\r])/g,function(e){return S[e]})}function p(e){return e.replace(I,"")}function h(e){for(var t=e.ownerDocument.createTreeWalker(e),r=[];t.nextNode();){var n=t.currentNode;if(n instanceof Text){var i=n.data,s=i.trim();0==s.length&&r.push(n)}}r.forEach(function(e){e.remove()})}function g(e){return void 0!=e&&null!=e}function f(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function m(e){var t=[];if(e.length%2!=0)throw"Ой плохая строка";for(var r=0;r<e.length;r+=2)t.push(parseInt(e.substr(r,2),16));return t}function _(e){for(var t="",r=0;r<e.length;r++){var n=e[r].toString(16);1==n.length&&(n="0"+n),t+=n}return t}function k(e){var t=m(e);return base64js.fromByteArray(t)}function b(e){var t=d(e),r=_(t);return r}function d(e){return base64js.toByteArray(p(e))}function v(e){return base64js.fromByteArray(e)}function y(e){return unescape(encodeURIComponent(e))}function E(e){return decodeURIComponent(escape(e))}e.parseXml=t,e.stringifyNode=r,e.findAttr=n,e.select=i,e.findFirst=s,e.findChilds=o;var S={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","	":"&#x9;","\n":"&#xA;","\r":"&#xD;"};e.escapeAttributeEntities=u,e.escapeTextEntities=l;var I=/[\r|\n|\s]/g;e.removeIndentation=h,e.isDefined=g,e.guid=f,e.getBytesArrayFromHexString=m,e.getHexStringFromBytesArray=_,e.byteStringToBase64=k,e.base64ToByteString=b,e.base64ToByteArray=d,e.byteArrayToBase64=v,e.toUtf8=y,e.fromUtf8=E}(t=e.utils||(e.utils={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(t){function r(t){var r=e.utils.base64ToByteArray(t),n=r instanceof Uint8Array?r:new Uint8Array(r),i=org.pkijs.fromBER(n.buffer).result;if(i.error&&i.error.length>0)throw i.error;return i}t.getSchemaFromBase64=r}(t=e.asn1||(e.asn1={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){var t;!function(e){function t(e){return new org.pkijs.simpl.CERT({schema:e})}e.getCertificateData=t;var r=function(){function e(){_classCallCheck(this,e),this.knownOids={"2.5.4.3":"CN","2.5.4.7":"L","2.5.4.8":"ST","2.5.4.10":"O","2.5.4.11":"OU","2.5.4.6":"C","2.5.4.9":"STREET","0.9.2342.19200300.100.1.25":"DC","0.9.2342.19200300.100.1.1":"UID"},this.reverseOrder=!0,this.escapees=',=+<>#;"\\'}return _createClass(e,[{key:"format",value:function(e){var t=e.types_and_values,r="";this.reverseOrder&&(t=t.reverse());for(var n=0;n<t.length;n++){var i=t[n],s=i.type,o=i.value.value_block.value.toString();r+=this.knownOids[s]||s,r+="=";for(var a=0;a<o.length;a++){var c=o[a];(this.escapees.indexOf(c)>-1||(0==a||a==o.length-1)&&" "==c)&&(c="\\"+c),r+=c}n<t.length-1&&(r+=",")}return r}}]),e}();e.RDNFormatter=r}(t=e.x509||(e.x509={}))}(t=e.asn1||(e.asn1={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){function t(t){switch(t){case"http://www.w3.org/2000/09/xmldsig#enveloped-signature":return new e.EnvelopedSignature;case"http://www.w3.org/2001/10/xml-exc-c14n#":return new e.ExclusiveCanonicalization;case"http://www.w3.org/2001/10/xml-exc-c14n#WithComments":return new e.ExclusiveCanonicalizationWithComments;default:throw"Неизвестный алгоритм канонизации"}}e.getAlgoritm=t}(t=e.canonicalization||(e.canonicalization={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(t){var r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"process",value:function(t){var r=e.utils.select(t,".//*[local-name(.)='Signature' and namespace-uri(.)='http://www.w3.org/2000/09/xmldsig#']")[0];return r&&r.parentNode.removeChild(r),t}},{key:"getAlgorithmName",value:function(){return"http://www.w3.org/2000/09/xmldsig#enveloped-signature"}}]),t}();t.EnvelopedSignature=r}(t=e.canonicalization||(e.canonicalization={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(t){var r=function(){function t(){_classCallCheck(this,t),this.includeComments=!1}return _createClass(t,[{key:"attrCompare",value:function(e,t){if(!e.namespaceURI&&t.namespaceURI)return-1;if(!t.namespaceURI&&e.namespaceURI)return 1;var r=e.namespaceURI+e.localName,n=t.namespaceURI+t.localName;return r===n?0:n>r?-1:1}},{key:"nsCompare",value:function(e,t){var r=e.prefix,n=t.prefix;return r==n?0:r.localeCompare(n)}},{key:"renderAttrs",value:function(t,r){var n,i=[],s=[];if(t instanceof Comment)return this.renderComment(t);if(t.attributes)for(var o=0;o<t.attributes.length;++o)n=t.attributes[o],0!==n.name.indexOf("xmlns")&&s.push(n);s.sort(this.attrCompare);for(var a in s)s.hasOwnProperty(a)&&(n=s[a],i.push(" ",n.name,'="',e.utils.escapeAttributeEntities(n.value),'"'));return i.join("")}},{key:"renderComment",value:function(t){if(!this.includeComments)return"";var r=t.ownerDocument===t.parentNode,n=null,i=null;if(r){for(var s=t,o=t;null!==s;){if(s===t.ownerDocument.documentElement){n=!0;break}s=s.nextSibling}for(;null!==o;){if(o===t.ownerDocument.documentElement){i=!0;break}o=o.previousSibling}}return(i?"\n":"")+"<!--"+e.utils.escapeTextEntities(t.data)+"-->"+(n?"\n":"")}},{key:"renderNs",value:function(e,t,r,n,i){var s,o,a=[],c=r,u=[],l=e.namespaceURI||"";if(e.prefix?-1==t.indexOf(e.prefix)&&(u.push({prefix:e.prefix,namespaceURI:e.namespaceURI||n[e.prefix]}),t.push(e.prefix)):r!=l&&(c=e.namespaceURI,a.push(' xmlns="',c,'"')),e.attributes)for(var p=0;p<e.attributes.length;++p)o=e.attributes[p],o.prefix&&-1===t.indexOf(o.localName)&&i.indexOf(o.localName)>=0&&(u.push({prefix:o.localName,namespaceURI:o.value}),t.push(o.localName)),o.prefix&&-1==t.indexOf(o.prefix)&&"xmlns"!=o.prefix&&(u.push({prefix:o.prefix,namespaceURI:o.namespaceURI}),t.push(o.prefix));u.sort(this.nsCompare);for(var h in u)u.hasOwnProperty(h)&&(s=u[h],a.push(" xmlns:",s.prefix,'="',s.namespaceURI,'"'));return{rendered:a.join(""),newDefaultNs:c}}},{key:"processInner",value:function(t,r,n,i,s){if(t instanceof Comment)return this.renderComment(t);if(t instanceof CharacterData)return e.utils.escapeTextEntities(t.data);if(t instanceof Element){for(var o=this.renderNs(t,r,n,i,s),a=["<",t.tagName,o.rendered,this.renderAttrs(t,o.newDefaultNs),">"],c=0;c<t.childNodes.length;++c){var u=r.slice(0);a.push(this.processInner(t.childNodes[c],u,o.newDefaultNs,i,s))}a.push("</",t.tagName,">")}return a.join("")}},{key:"process",value:function(t,r){r=r||{};var n=r.inclusiveNamespacesPrefixList||[],i=r.defaultNs||"",s=r.defaultNsForPrefix||{ds:"http://www.w3.org/2000/09/xmldsig#"};return e.utils.toUtf8(this.processInner(t,[],i,s,n))}},{key:"getAlgorithmName",value:function(){return"http://www.w3.org/2001/10/xml-exc-c14n#"}}]),t}();t.ExclusiveCanonicalization=r;var n=function(e){function t(){_classCallCheck(this,t);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(t).call(this));return e.includeComments=!0,e}return _inherits(t,e),_createClass(t,[{key:"getAlgorithmName",value:function(){return"http://www.w3.org/2001/10/xml-exc-c14n#WithComments"}}]),t}(r);t.ExclusiveCanonicalizationWithComments=n}(t=e.canonicalization||(e.canonicalization={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"IsCertificateAuthority",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsCertificateAuthority)}catch(n){r(n)}})}},{key:"IsPathLenConstraintPresent",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsPathLenConstraintPresent)}catch(n){r(n)}})}},{key:"IsCritical",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsCritical)}catch(n){r(n)}})}},{key:"IsPresent",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsPresent)}catch(n){r(n)}})}},{key:"PathLenConstraint",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.PathLenConstraint)}catch(n){r(n)}})}}]),e}();e.BasicConstraints=t;var r=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"Name",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Name)}catch(n){r(n)}})}},{key:"OID",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.OID)}catch(n){r(n)}})}}]),e}();e.EKU=r;var n=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"Item",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var n=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,i){try{t(new r(n.target.Item(e)))}catch(s){i(s)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Count",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Count)}catch(n){r(n)}})}}]),e}();e.EKUs=n;var i=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"IsCritical",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsCritical)}catch(n){r(n)}})}},{key:"IsPresent",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IsPresent)}catch(n){r(n)}})}},{key:"EKUs",get:function(){var e=this;return new Promise(function(t,r){try{t(new n(e.target.EKUs))}catch(i){r(i)}})}}]),e}();e.ExtendedKeyUsage=i;var s=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"BasicConstraints",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,n){try{e(new t(r.target.BasicConstraints()))}catch(i){n(i)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"Display",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){try{e(t.target.Display())}catch(n){r(n)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"Export",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(r.target.Export(e))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"ExtendedKeyUsage",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){try{e(new i(t.target.ExtendedKeyUsage()))}catch(n){r(n)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"HasPrivateKey",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){try{e(t.target.HasPrivateKey())}catch(n){r(n)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"GetInfo",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(r.target.GetInfo(e))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Archived",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Archived)}catch(n){r(n)}})}},{key:"IssuerName",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.IssuerName)}catch(n){r(n)}})}},{key:"SerialNumber",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.SerialNumber)}catch(n){r(n)}})}},{key:"SubjectName",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.SubjectName)}catch(n){r(n)}})}},{key:"Thumbprint",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Thumbprint)}catch(n){r(n)}})}},{key:"ValidFromDate",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.ValidFromDate)}catch(n){r(n)}})}},{key:"ValidToDate",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.ValidToDate)}catch(n){r(n)}})}},{key:"Version",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Version)}catch(n){r(n)}})}},{key:"Target",get:function(){return this.target}}]),e}();e.Certificate=s;var o=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"Add",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(r.target.Add(e))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Clear",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){try{e(t.target.Clear())}catch(n){r(n)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"Find",value:function(t,r,n){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function i(){var s=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(i,o){try{i(new e(s.target.Find(t,r,n)))}catch(a){o(a)}}));case 1:case"end":return i.stop()}},i,this)}))}},{key:"Remove",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(r.target.Remove(e))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Item",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(new s(r.target.Item(e)))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Select",value:function(t,r,n){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function i(){var s=this;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.abrupt("return",new Promise(function(i,o){try{i(new e(s.target.Select(t,r,n)))}catch(a){o(a)}}));case 1:case"end":return i.stop()}},i,this)}))}},{key:"Count",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Count)}catch(n){r(n)}})}}]),e}();e.Certificates=o;var a=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"Open",value:function(e,t,r){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){var i=this;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise(function(n,s){try{n(i.target.Open(e,t,r))}catch(o){s(o)}}));case 1:case"end":return n.stop()}},n,this)}))}},{key:"Close",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(e,r){try{e(t.target.Close())}catch(n){r(n)}}));case 1:case"end":return e.stop()}},e,this)}))}},{key:"Certificates",get:function(){var e=this;return new Promise(function(t,r){try{t(new o(e.target.Certificates))}catch(n){r(n)}})}},{key:"Location",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Location)}catch(n){r(n)}})}},{key:"Name",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Name)}catch(n){r(n)}})}}]),e}();e.Store=a;var c=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"Hash",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{t(r.target.Hash(e))}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"propset_Algorithm",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{r.target.Algorithm=e,t()}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"propset_Value",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{r.target.Value=e,t()}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"propset_DataEncoding",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,n){try{r.target.DataEncoding=e,t()}catch(i){n(i)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"Algorithm",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Algorithm)}catch(n){r(n)}})}},{key:"Value",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Value)}catch(n){r(n)}})}},{key:"DataEncoding",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.DataEncoding)}catch(n){r(n)}})}},{key:"Target",get:function(){return this.target}}]),e}();e.HashedData=c;var u=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"SignHash",value:function(e,t){var r=this;return new Promise(function(n,i){var o,a;return e instanceof c?(o=e.Target,t instanceof s?(a=t.Target,void n(r.target.SignHash(o,a))):void i("Неподдерживаемый тип аргумента certificate. Ожидался capicomasync.Certificate")):void i("Неподдерживаемый тип аргумента hash. Ожидался capicomasync.HashedData")})}},{key:"VerifyHash",value:function(e,t){var r=this;return new Promise(function(n,i){var o,a;return e instanceof c?(o=e.Target,t instanceof s?(a=t.Target,void n(r.target.VerifyHash(o,a))):void i("Неподдерживаемый тип аргумента certificate. Ожидался capicomasync.Certificate")):void i("Неподдерживаемый тип аргумента hash. Ожидался capicomasync.HashedData")})}}]),e}();e.RawSignature=u;var l=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"toString",value:function(){var e=this;return new Promise(function(t,r){try{t(e.target.toString())}catch(n){r(n)}})}},{key:"BuildVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.BuildVersion)}catch(n){r(n)}})}},{key:"MajorVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.MajorVersion)}catch(n){r(n)}})}},{key:"MinorVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.MinorVersion)}catch(n){r(n)}})}}]),e}();e.Version=l;var p=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"CSPVersion",value:function(){var e=this;return new Promise(function(t,r){try{t(new l(e.target.CSPVersion()))}catch(n){r(n)}})}},{key:"BuildVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.BuildVersion)}catch(n){r(n)}})}},{key:"MajorVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.MajorVersion)}catch(n){r(n)}})}},{key:"MinorVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.MinorVersion)}catch(n){r(n)}})}},{key:"Version",get:function(){var e=this;return new Promise(function(t,r){try{t(e.target.Version)}catch(n){r(n)}})}},{key:"PluginVersion",get:function(){var e=this;return new Promise(function(t,r){try{t(new l(e.target.PluginVersion))}catch(n){r(n)}})}}]),e}();e.About=p}(t=e.capicomasync||(e.capicomasync={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){!function(e){e[e.CAPICOM_ENCODE_ANY=-1]="CAPICOM_ENCODE_ANY",e[e.CAPICOM_ENCODE_BASE64=0]="CAPICOM_ENCODE_BASE64",e[e.CAPICOM_ENCODE_BINARY=1]="CAPICOM_ENCODE_BINARY"}(e.CAPICOM_ENCODING_TYPE||(e.CAPICOM_ENCODING_TYPE={})),e.CAPICOM_ENCODING_TYPE,!function(e){e[e.CAPICOM_EKU_OTHER=0]="CAPICOM_EKU_OTHER",e[e.CAPICOM_EKU_SERVER_AUTH=1]="CAPICOM_EKU_SERVER_AUTH",e[e.CAPICOM_EKU_CLIENT_AUTH=2]="CAPICOM_EKU_CLIENT_AUTH",e[e.CAPICOM_EKU_CODE_SIGNING=3]="CAPICOM_EKU_CODE_SIGNING",e[e.CAPICOM_EKU_EMAIL_PROTECTION=4]="CAPICOM_EKU_EMAIL_PROTECTION",e[e.CAPICOM_EKU_SMARTCARD_LOGON=5]="CAPICOM_EKU_SMARTCARD_LOGON",e[e.CAPICOM_EKU_ENCRYPTING_FILE_SYSTEM=6]="CAPICOM_EKU_ENCRYPTING_FILE_SYSTEM"}(e.CAPICOM_EKU||(e.CAPICOM_EKU={})),e.CAPICOM_EKU,!function(e){e[e.CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME=0]="CAPICOM_CERT_INFO_SUBJECT_SIMPLE_NAME",e[e.CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME=1]="CAPICOM_CERT_INFO_ISSUER_SIMPLE_NAME",e[e.CAPICOM_CERT_INFO_SUBJECT_EMAIL_NAME=2]="CAPICOM_CERT_INFO_SUBJECT_EMAIL_NAME",e[e.CAPICOM_CERT_INFO_ISSUER_EMAIL_NAME=3]="CAPICOM_CERT_INFO_ISSUER_EMAIL_NAME",e[e.CAPICOM_CERT_INFO_SUBJECT_UPN=4]="CAPICOM_CERT_INFO_SUBJECT_UPN",e[e.CAPICOM_CERT_INFO_ISSUER_UPN=5]="CAPICOM_CERT_INFO_ISSUER_UPN",e[e.CAPICOM_CERT_INFO_SUBJECT_DNS_NAME=6]="CAPICOM_CERT_INFO_SUBJECT_DNS_NAME",e[e.CAPICOM_CERT_INFO_ISSUER_DNS_NAME=7]="CAPICOM_CERT_INFO_ISSUER_DNS_NAME"}(e.CAPICOM_CERT_INFO_TYPE||(e.CAPICOM_CERT_INFO_TYPE={})),e.CAPICOM_CERT_INFO_TYPE,!function(e){e[e.CAPICOM_CERTIFICATE_FIND_SHA1_HASH=0]="CAPICOM_CERTIFICATE_FIND_SHA1_HASH",e[e.CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME=1]="CAPICOM_CERTIFICATE_FIND_SUBJECT_NAME",e[e.CAPICOM_CERTIFICATE_FIND_ISSUER_NAME=2]="CAPICOM_CERTIFICATE_FIND_ISSUER_NAME",e[e.CAPICOM_CERTIFICATE_FIND_ROOT_NAME=3]="CAPICOM_CERTIFICATE_FIND_ROOT_NAME",e[e.CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME=4]="CAPICOM_CERTIFICATE_FIND_TEMPLATE_NAME",e[e.CAPICOM_CERTIFICATE_FIND_EXTENSION=5]="CAPICOM_CERTIFICATE_FIND_EXTENSION",e[e.CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY=6]="CAPICOM_CERTIFICATE_FIND_EXTENDED_PROPERTY",e[e.CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY=7]="CAPICOM_CERTIFICATE_FIND_APPLICATION_POLICY",e[e.CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY=8]="CAPICOM_CERTIFICATE_FIND_CERTIFICATE_POLICY",e[e.CAPICOM_CERTIFICATE_FIND_TIME_VALID=9]="CAPICOM_CERTIFICATE_FIND_TIME_VALID",e[e.CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID=10]="CAPICOM_CERTIFICATE_FIND_TIME_NOT_YET_VALID",e[e.CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED=11]="CAPICOM_CERTIFICATE_FIND_TIME_EXPIRED",e[e.CAPICOM_CERTIFICATE_FIND_KEY_USAGE=12]="CAPICOM_CERTIFICATE_FIND_KEY_USAGE"}(e.CAPICOM_CERTIFICATE_FIND_TYPE||(e.CAPICOM_CERTIFICATE_FIND_TYPE={})),e.CAPICOM_CERTIFICATE_FIND_TYPE,!function(e){e[e.CAPICOM_MEMORY_STORE=0]="CAPICOM_MEMORY_STORE",e[e.CAPICOM_LOCAL_MACHINE_STORE=1]="CAPICOM_LOCAL_MACHINE_STORE",e[e.CAPICOM_CURRENT_USER_STORE=2]="CAPICOM_CURRENT_USER_STORE",e[e.CAPICOM_ACTIVE_DIRECTORY_USER_STORE=3]="CAPICOM_ACTIVE_DIRECTORY_USER_STORE",e[e.CAPICOM_SMART_CARD_USER_STORE=4]="CAPICOM_SMART_CARD_USER_STORE"}(e.CAPICOM_STORE_LOCATION||(e.CAPICOM_STORE_LOCATION={})),e.CAPICOM_STORE_LOCATION,!function(e){e[e.CAPICOM_STORE_OPEN_READ_ONLY=0]="CAPICOM_STORE_OPEN_READ_ONLY",e[e.CAPICOM_STORE_OPEN_READ_WRITE=1]="CAPICOM_STORE_OPEN_READ_WRITE",e[e.CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED=2]="CAPICOM_STORE_OPEN_MAXIMUM_ALLOWED",e[e.CAPICOM_STORE_OPEN_EXISTING_ONLY=128]="CAPICOM_STORE_OPEN_EXISTING_ONLY",e[e.CAPICOM_STORE_OPEN_INCLUDE_ARCHIVED=256]="CAPICOM_STORE_OPEN_INCLUDE_ARCHIVED"}(e.CAPICOM_STORE_OPEN_MODE||(e.CAPICOM_STORE_OPEN_MODE={})),e.CAPICOM_STORE_OPEN_MODE,e.StoreName={CAPICOM_CA_STORE:"Ca",CAPICOM_MY_STORE:"My",CAPICOM_OTHER_STORE:"Other",CAPICOM_ROOT_STORE:"Root"},function(e){e[e.CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE=128]="CAPICOM_DIGITAL_SIGNATURE_KEY_USAGE",e[e.CAPICOM_NON_REPUDIATION_KEY_USAGE=64]="CAPICOM_NON_REPUDIATION_KEY_USAGE",e[e.CAPICOM_KEY_ENCIPHERMENT_KEY_USAGE=32]="CAPICOM_KEY_ENCIPHERMENT_KEY_USAGE",e[e.CAPICOM_DATA_ENCIPHERMENT_KEY_USAGE=16]="CAPICOM_DATA_ENCIPHERMENT_KEY_USAGE",e[e.CAPICOM_KEY_AGREEMENT_KEY_USAGE=8]="CAPICOM_KEY_AGREEMENT_KEY_USAGE",e[e.CAPICOM_KEY_CERT_SIGN_KEY_USAGE=4]="CAPICOM_KEY_CERT_SIGN_KEY_USAGE",e[e.CAPICOM_OFFLINE_CRL_SIGN_KEY_USAGE=2]="CAPICOM_OFFLINE_CRL_SIGN_KEY_USAGE",e[e.CAPICOM_CRL_SIGN_KEY_USAGE=2]="CAPICOM_CRL_SIGN_KEY_USAGE",e[e.CAPICOM_ENCIPHER_ONLY_KEY_USAGE=1]="CAPICOM_ENCIPHER_ONLY_KEY_USAGE",e[e.CAPICOM_DECIPHER_ONLY_KEY_USAGE=32768]="CAPICOM_DECIPHER_ONLY_KEY_USAGE"}(e.CAPICOM_KEY_USAGE||(e.CAPICOM_KEY_USAGE={})),e.CAPICOM_KEY_USAGE,!function(e){e[e.CAPICOM_HASH_ALGORITHM_SHA1=0]="CAPICOM_HASH_ALGORITHM_SHA1",e[e.CAPICOM_HASH_ALGORITHM_MD2=1]="CAPICOM_HASH_ALGORITHM_MD2",e[e.CAPICOM_HASH_ALGORITHM_MD4=2]="CAPICOM_HASH_ALGORITHM_MD4",e[e.CAPICOM_HASH_ALGORITHM_MD5=3]="CAPICOM_HASH_ALGORITHM_MD5",e[e.CAPICOM_HASH_ALGORITHM_SHA_256=4]="CAPICOM_HASH_ALGORITHM_SHA_256",e[e.CAPICOM_HASH_ALGORITHM_SHA_384=5]="CAPICOM_HASH_ALGORITHM_SHA_384",e[e.CAPICOM_HASH_ALGORITHM_SHA_512=6]="CAPICOM_HASH_ALGORITHM_SHA_512"}(e.CapicomHashAlgorithm||(e.CapicomHashAlgorithm={})),e.CapicomHashAlgorithm}(t=e.capicom||(e.capicom={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){!function(e){e[e.CadescomHashAlgorithmCpGost3411=100]="CadescomHashAlgorithmCpGost3411",e[e.CadescomHashAlgorithmCpGost34112012256=101]="CadescomHashAlgorithmCpGost34112012256",e[e.CadescomHashAlgorithmCpGost34112012512=102]="CadescomHashAlgorithmCpGost34112012512"}(e.CapicomHashAlgorithm||(e.CapicomHashAlgorithm={})),e.CapicomHashAlgorithm,!function(e){e[e.CadescomBase64ToBinary=1]="CadescomBase64ToBinary",e[e.CadescomStringToUcs2Le=0]="CadescomStringToUcs2Le"}(e.CadescomContentEncodingType||(e.CadescomContentEncodingType={})),e.CadescomContentEncodingType}(t=e.capicom||(e.capicom={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){function r(e){var r=t.providers[e];if(!r)throw"Неизвестный криптопровайдер";return r}function n(e){var r=t.signers[e];if(!r)throw"Неизвестный метод подписания";return r}function i(e){var r=t.hashers[e];if(!r)throw"Неизвестный метод хэширования";return r}t.providers={},t.signers={},t.hashers={},t.getProvider=r,t.getSigner=n,t.getHasher=i;var s=function(){function t(e){_classCallCheck(this,t),this._certificate=e}return _createClass(t,[{key:"init",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this._initialized){t.next=7;break}return t.next=3,this._certificate.Export(e.capicom.CAPICOM_ENCODING_TYPE.CAPICOM_ENCODE_BASE64);case 3:this._rawData=t.sent,this._schema=e.asn1.getSchemaFromBase64(this._rawData),this._parsedData=e.asn1.x509.getCertificateData(this._schema),this._initialized=!0;case 7:case"end":return t.stop()}},t,this)}))}},{key:"isInitialized",get:function(){return this._initialized}},{key:"certificate",get:function(){return this._certificate}},{key:"rawData",get:function(){var e=this;return new Promise(function(t,r){return __awaiter(e,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:t(this._rawData);case 4:case"end":return e.stop()}},n,this)}))})}},{key:"issuerData",get:function(){var e=this;return new Promise(function(t,r){return __awaiter(e,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){
e.next=3;break}return e.next=3,this.init();case 3:t(this._parsedData.issuer);case 4:case"end":return e.stop()}},n,this)}))})}},{key:"subjectData",get:function(){var e=this;return new Promise(function(t,r){return __awaiter(e,void 0,void 0,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this._initialized){e.next=3;break}return e.next=3,this.init();case 3:t(this._parsedData.subject);case 4:case"end":return e.stop()}},n,this)}))})}}]),t}();t.CertificateHolder=s}(t=e.cryptography||(e.cryptography={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(t){function r(t){for(var r=t,n=arguments.length,i=Array(n>1?n-1:0),s=1;n>s;s++)i[s-1]=arguments[s];return i.forEach(function(t){var n=e.canonicalization.getAlgoritm(t);r=n.process(r)}),r instanceof Node&&(r=e.utils.stringifyNode(r)),r}t.XMLDSigNS="http://www.w3.org/2000/09/xmldsig#";var n=function(){function e(){_classCallCheck(this,e)}return _createClass(e,[{key:"onAdded",value:function(e){this.signedXml=e.signedXml}}]),e}();t.AbstractNodeCreator=n,t.canonicalize=r;var i=function(){function e(t){_classCallCheck(this,e),this.target=t}return _createClass(e,[{key:"getNode",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.target instanceof Node)){e.next=2;break}return e.abrupt("return",this.target);case 2:return e.abrupt("return",this.target.createNode());case 3:case"end":return e.stop()}},e,this)}))}},{key:"toString",value:function(){return"#"+this.getId()}},{key:"getId",value:function(){var e;if(this.target instanceof n)e=this.target.id;else{var t=this.target.attributes.getNamedItem("Id")||this.target.attributes.getNamedItem("id");t&&(e=t.value)}if(!e)throw"У элемента отсутствует атрибут Id";return e}}]),e}();t.Uri=i}(r=t.base||(t.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(t){var r=function(){function r(n,i){_classCallCheck(this,r),this.document=n,this.certificate=new e.cryptography.CertificateHolder(i),this.signature=new t.Signature(this),this.signature.onAdded()}return _createClass(r,[{key:"createSignature",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.certificate){t.next=2;break}throw"Не указан сертификат";case 2:return t.next=4,this.signature.createNode(e);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}))}},{key:"createSignedXml",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){var r,n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=this.document.cloneNode(!0),t.next=3,this.createSignature(e);case 3:return n=t.sent,n=r.importNode(n,!0),r.documentElement.firstChild?r.documentElement.insertBefore(n,r.documentElement.firstChild):r.documentElement.appendChild(n),t.abrupt("return",r);case 7:case"end":return t.stop()}},t,this)}))}}]),r}();t.AbstractSignedXml=r}(r=t.base||(t.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(t){var r=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,Object.getPrototypeOf(r).apply(this,arguments))}return _inherits(r,t),_createClass(r,[{key:"getCryptoProvider",value:function(){return e.cryptography.getProvider(e.cryptography.cryptopro.Id)}}]),r}(t.base.AbstractSignedXml);t.SignedXml=r}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(t.prototype),"onAdded",this).call(this,e)}}]),t}(e.AbstractNodeCreator);t.Item=r}(t=e.object||(e.object={}))}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(t){function r(r){var n=r.signature.object.addItem(new t.QualifyingProperties),i=r.signature.signedInfo.addReference(new e.signature.base.Reference(new e.signature.base.Uri(n.signedProperties)));n.signedProperties.digestMethod="http://www.w3.org/2001/04/xmldsig-more#gostr3411",i.type="http://uri.etsi.org/01903#SignedProperties",i.addTransform(new e.signature.base.Transform("http://www.w3.org/2001/10/xml-exc-c14n#")),i.digestMethod="http://www.w3.org/2001/04/xmldsig-more#gostr3411"}t.XadesNS="http://uri.etsi.org/01903/v1.3.2#",t.Apply=r}(t=e.xades||(e.xades={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r=function(e){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.signedProperties=new t.SignedProperties,e}return _inherits(r,e),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.object=e,this.signedProperties.onAdded(this)}},{key:"createNode",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.rendered&&!e){r.next=10;break}return n=this.signedXml.document.createElementNS(t.XadesNS,"QualifyingProperties"),n.setAttribute("Target","#"+this.signedXml.signature.id),r.t0=n,r.next=6,this.signedProperties.createNode(e);case 6:r.t1=r.sent,r.t0.appendChild.call(r.t0,r.t1),this.rendered=!0,this.renderedNode=n;case 10:return r.abrupt("return",this.renderedNode);case 11:case"end":return r.stop()}},r,this)}))}}]),r}(e.signature.base.object.Item);t.QualifyingProperties=r}(t=e.xades||(e.xades={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r=function(r){function n(){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return t.id="xades-"+e.utils.guid(),t}return _inherits(n,r),_createClass(n,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(n.prototype),"onAdded",this).call(this,e),this.qualifyingProperties=e}},{key:"createNode",value:function(){var r=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){var i,s,o,a,c,u,l,p,h,g,f;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.rendered&&!r){n.next=36;break}return i=this.signedXml.document.createElementNS(t.XadesNS,"SignedProperties"),s=this.signedXml.document.createElementNS(t.XadesNS,"SignedSignatureProperties"),o=this.signedXml.document.createElementNS(t.XadesNS,"SigningTime"),a=this.signedXml.document.createElementNS(t.XadesNS,"SigningCertificate"),c=this.signedXml.document.createElementNS(t.XadesNS,"Cert"),u=this.signedXml.document.createElementNS(t.XadesNS,"CertDigest"),l=this.signedXml.document.createElementNS(t.XadesNS,"IssuerSerial"),p=this.signedXml.document.createElementNS(e.signature.base.XMLDSigNS,"DigestMethod"),h=this.signedXml.document.createElementNS(e.signature.base.XMLDSigNS,"DigestValue"),g=this.signedXml.document.createElementNS(e.signature.base.XMLDSigNS,"X509IssuerName"),f=this.signedXml.document.createElementNS(e.signature.base.XMLDSigNS,"X509SerialNumber"),i.setAttribute("Id",this.id),i.appendChild(s),o.textContent=(new Date).toISOString(),s.appendChild(o),s.appendChild(a),a.appendChild(c),c.appendChild(u),c.appendChild(l),p.setAttribute("Algorithm",this.digestMethod),u.appendChild(p),n.t0=e.utils,n.t1=this.signedXml.getCryptoProvider(),n.next=16,this.signedXml.certificate.rawData;case 16:return n.t2=n.sent,n.t3=this.digestMethod,n.next=20,n.t1.getBinaryHash.call(n.t1,n.t2,n.t3);case 20:return n.t4=n.sent,h.textContent=n.t0.byteStringToBase64.call(n.t0,n.t4),u.appendChild(h),n.t5=new e.asn1.x509.RDNFormatter,n.next=26,this.signedXml.certificate.issuerData;case 26:return n.t6=n.sent,g.textContent=n.t5.format.call(n.t5,n.t6),l.appendChild(g),n.next=31,this.signedXml.certificate.certificate.SerialNumber;case 31:n.t7=n.sent,f.textContent=bigInt(n.t7,16).toString(),l.appendChild(f),this.rendered=!0,this.renderedNode=i;case 36:return n.abrupt("return",this.renderedNode);case 37:case"end":return n.stop()}},n,this)}))}}]),n}(e.signature.base.AbstractNodeCreator);t.SignedProperties=r}(t=e.xades||(e.xades={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){var t;!function(e){e.Id="cryptopro"}(t=e.cryptopro||(e.cryptopro={}))}(t=e.cryptography||(e.cryptography={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(t){var r=function(){function t(){_classCallCheck(this,t)}return _createClass(t,[{key:"isLoaded",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(cadesplugin&&cadesplugin instanceof Promise)){e.next=4;break}return e.abrupt("return",cadesplugin.then(function(){return!0},function(){return!1}));case 4:return e.abrupt("return",new Promise(function(e,t){e(!!cadesplugin)}));case 5:case"end":return e.stop()}},e,this)}))}},{key:"getStore",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.createStore());case 1:case"end":return e.stop()}},e,this)}))}},{key:"getHash",value:function(e,t,r){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.getHashedData(t,r);case 2:return i=n.sent,n.next=5,i.Hash(e);case 5:return n.abrupt("return",i.Value);case 6:case"end":return n.stop()}},n,this)}))}},{key:"getHashedData",value:function(t,r){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){var i;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,this.createHashedData();case 2:if(i=n.sent,!e.utils.isDefined(t)){n.next=11;break}return n.prev=4,n.next=7,i.propset_Algorithm(t);case 7:n.next=11;break;case 9:n.prev=9,n.t0=n["catch"](4);case 11:if(!e.utils.isDefined(r)){n.next=19;break}return n.prev=12,n.next=15,i.propset_DataEncoding(r);case 15:n.next=19;break;case 17:n.prev=17,n.t1=n["catch"](12);case 19:return n.abrupt("return",i);case 20:case"end":return n.stop()}},n,this,[[4,9],[12,17]])}))}},{key:"getTextHash",value:function(t,r){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return"string"==typeof r&&(r=this.getAlgorithm(r)),n.next=3,this.getHash(t,r,e.capicom.CadescomContentEncodingType.CadescomStringToUcs2Le);case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}},n,this)}))}},{key:"getBinaryHash",value:function(t,r){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if("string"==typeof r&&(r=this.getAlgorithm(r)),t&&t.length){n.next=3;break}return n.abrupt("return","981E5F3CA30C841487830F84FB433E13AC1101569B9C13584AC483234CD656C0");case 3:return n.next=5,this.getHash(t,r,e.capicom.CadescomContentEncodingType.CadescomBase64ToBinary);case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}},{key:"signData",value:function(t,r,n,i){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function s(){var o,a,c,u;return regeneratorRuntime.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return"string"==typeof i&&(i=this.getAlgorithm(i)),s.next=3,this.getHashedData(i,n);case 3:return o=s.sent,s.next=6,this.createRawSignature();case 6:return a=s.sent,s.next=9,o.Hash(t);case 9:return s.next=11,a.SignHash(o,r);case 11:return c=s.sent,u=e.utils.getBytesArrayFromHexString(c).reverse(),s.abrupt("return",e.utils.getHexStringFromBytesArray(u));case 14:case"end":return s.stop()}},s,this)}))}},{key:"getAlgorithm",value:function(t){switch(t){case"http://www.w3.org/2001/04/xmldsig-more#gostr3411":case"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411":return e.capicom.CapicomHashAlgorithm.CadescomHashAlgorithmCpGost3411;default:throw"Неизвестный алгоритм хеширования"}}}]),t}();t.ProviderBase=r}(r=t.cryptopro||(t.cryptopro={}))}(t=e.cryptography||(e.cryptography={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(r){var n=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"createObject",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",cadesplugin.CreateObjectAsync(e).then(function(e){return e},function(e){throw e}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"createStore",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createObject("CAPICOM.Store");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"createHashedData",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createObject("CAdESCOM.HashedData");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"createRawSignature",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createObject("CAdESCOM.RawSignature");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}},{key:"getVersion",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.createObject("CAdESCOM.About");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}))}}]),t}(r.ProviderBase);r.ProviderAsync=n,cadesplugin&&cadesplugin.CreateObjectAsync&&!function(){var r=new n;t.providers[t.cryptopro.Id]=r,t.signers["http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411"]=t.signers["urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411"]=function(t,n,i){return r.signData(t,n,i,e.capicom.CapicomHashAlgorithm.CadescomHashAlgorithmCpGost3411)},t.hashers["http://www.w3.org/2001/04/xmldsig-more#gostr3411"]=t.hashers["urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411"]=function(e){return r.getBinaryHash(e,"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411")}}()}(r=t.cryptopro||(t.cryptopro={}))}(t=e.cryptography||(e.cryptography={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(r){var n=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,Object.getPrototypeOf(r).apply(this,arguments))}return _inherits(r,t),_createClass(r,[{key:"createObject",value:function(e){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(t,r){try{t(cadesplugin.CreateObject(e))}catch(n){r(n)}}));case 1:case"end":return t.stop()}},t,this)}))}},{key:"createStore",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.capicomasync.Store,t.next=3,this.createObject("CAPICOM.Store");case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t,this)}))}},{key:"createHashedData",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.capicomasync.HashedData,t.next=3,this.createObject("CAdESCOM.HashedData");case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t,this)}))}},{key:"createRawSignature",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.capicomasync.RawSignature,t.next=3,this.createObject("CAdESCOM.RawSignature");case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t,this)}))}},{key:"getVersion",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e.capicomasync.About,t.next=3,this.createObject("CAdESCOM.About");case 3:return t.t1=t.sent,t.abrupt("return",new t.t0(t.t1));case 5:case"end":return t.stop()}},t,this)}))}}]),r}(r.ProviderBase);r.Provider=n,cadesplugin&&cadesplugin.CreateObject&&!function(){var r=new n;t.providers[t.cryptopro.Id]=r,t.signers["http://www.w3.org/2001/04/xmldsig-more#gostr34102001-gostr3411"]=t.signers["urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr34102001-gostr3411"]=function(t,n,i){return r.signData(t,n,i,e.capicom.CapicomHashAlgorithm.CadescomHashAlgorithmCpGost3411)},t.hashers["http://www.w3.org/2001/04/xmldsig-more#gostr3411"]=t.hashers["urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411"]=function(e){return r.getBinaryHash(e,"urn:ietf:params:xml:ns:cpxmlsec:algorithms:gostr3411")}}()}(r=t.cryptopro||(t.cryptopro={}))}(t=e.cryptography||(e.cryptography={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.content=[],e}return _inherits(r,t),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.signature=e}},{key:"addContent",value:function(e){return this.content.push(e),e.onAdded(this),e}},{key:"createNode",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.rendered&&!t){r.next=15;break}n=this.signedXml.document.createElementNS(e.XMLDSigNS,"KeyInfo"),i=0;case 3:if(!(i<this.content.length)){r.next=13;break}return s=this.content[i],r.t0=n,r.next=8,s.createNode(t);case 8:r.t1=r.sent,r.t0.appendChild.call(r.t0,r.t1);case 10:i++,r.next=3;break;case 13:this.renderedNode=n,this.rendered=!0;case 15:return r.abrupt("return",this.renderedNode);case 16:case"end":return r.stop()}},r,this)}))}}]),r}(e.AbstractNodeCreator);e.KeyInfo=t}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.objects=[],e}return _inherits(r,t),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.signature=e}},{key:"createNode",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(0!=this.objects.length){r.next=2;break}return r.abrupt("return",Promise.resolve(null));case 2:if(this.rendered&&!t){r.next=17;break}n=this.signedXml.document.createElementNS(e.XMLDSigNS,"Object"),i=0;case 5:if(!(i<this.objects.length)){r.next=15;break}return s=this.objects[i],r.t0=n,r.next=10,s.createNode(t);case 10:r.t1=r.sent,r.t0.appendChild.call(r.t0,r.t1);case 12:i++,r.next=5;break;case 15:this.renderedNode=n,this.rendered=!0;case 17:return r.abrupt("return",this.renderedNode);case 18:case"end":return r.stop()}},r,this)}))}},{key:"addItem",value:function(e){return this.objects.push(e),e.onAdded(this),e}}]),r}(e.AbstractNodeCreator);e.ObjectNode=t}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(t){var r=function(r){function n(e){_classCallCheck(this,n);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return t.uri=e,t.transforms=[],t}return _inherits(n,r),_createClass(n,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(n.prototype),"onAdded",this).call(this,e),this.signedInfo=e}},{key:"addTransform",value:function(e){return this.transforms.push(e),e.onAdded(this),e}},{key:"createNode",value:function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i,s,o,a,c;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.rendered&&!e){r.next=24;break}n=this.signedXml.document.createElementNS(t.XMLDSigNS,"Reference"),i=this.signedXml.document.createElementNS(t.XMLDSigNS,"Transforms"),s=this.signedXml.document.createElementNS(t.XMLDSigNS,"DigestMethod"),o=this.signedXml.document.createElementNS(t.XMLDSigNS,"DigestValue"),n.setAttribute("URI",this.uri.toString()),this.type&&n.setAttribute("Type",this.type),n.appendChild(i),a=0;case 6:if(!(a<this.transforms.length)){r.next=16;break}return c=this.transforms[a],r.t0=i,r.next=11,c.createNode(e);case 11:r.t1=r.sent,r.t0.appendChild.call(r.t0,r.t1);case 13:a++,r.next=6;break;case 16:return s.setAttribute("Algorithm",this.digestMethod),n.appendChild(s),r.next=20,this.calculateDigest();case 20:o.textContent=r.sent,n.appendChild(o),this.renderedNode=n,this.rendered=!0;case 24:return r.abrupt("return",this.renderedNode);case 25:case"end":return r.stop()}},r,this)}))}},{key:"calculateDigest",value:function(){return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i,s,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,this.uri.getNode();case 2:return n=r.sent,i=this.transforms.map(function(e){return e.algoritm}),s=t.canonicalize.apply(t,[n].concat(_toConsumableArray(i))),o=this.signedXml.getCryptoProvider(),r.next=8,o.getBinaryHash(btoa(s),this.digestMethod);case 8:return a=r.sent,r.abrupt("return",e.utils.byteStringToBase64(a));case 10:case"end":return r.stop()}},r,this)}))}}]),n}(t.AbstractNodeCreator);t.Reference=r}(r=t.base||(t.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(t){var r;!function(t){var r=function(r){function n(r){_classCallCheck(this,n);var i=_possibleConstructorReturn(this,Object.getPrototypeOf(n).call(this));return i.signedXml=r,i.signedInfo=new t.SignedInfo,i.keyInfo=new t.KeyInfo,i.object=new t.ObjectNode,i.id="xmldsig-"+e.utils.guid(),i}return _inherits(n,r),_createClass(n,[{key:"onAdded",value:function(){this.signedInfo.onAdded(this),this.keyInfo.onAdded(this),this.object.onAdded(this)}},{key:"createNode",value:function(){var r=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function n(){var i,s,o,a,c,u;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(this.rendered&&!r){n.next=29;break}return i=this.signedXml.document.createElementNS(t.XMLDSigNS,"Signature"),n.next=4,this.signedInfo.createNode(r);case 4:return s=n.sent,o=this.signedXml.document.createElementNS(t.XMLDSigNS,"SignatureValue"),n.next=8,this.keyInfo.createNode(r);case 8:return a=n.sent,n.next=11,this.object.createNode(r);case 11:if(c=n.sent,this.id){n.next=14;break}throw"Не задан атрибут Id для подписи";case 14:if(u=e.cryptography.getSigner(this.signedInfo.signatureMethod)){n.next=17;break}throw"Неизвестный метод подписания";case 17:return i.setAttribute("Id",this.id),i.appendChild(s),n.t0=e.utils,n.next=22,u(btoa(t.canonicalize(s,this.signedInfo.canonicalizationMethod)),this.signedXml.certificate.certificate,e.capicom.CadescomContentEncodingType.CadescomBase64ToBinary);case 22:n.t1=n.sent,o.textContent=n.t0.byteStringToBase64.call(n.t0,n.t1),i.appendChild(o),i.appendChild(a),c&&i.appendChild(c),this.renderedNode=i,this.rendered=!0;case 29:return n.abrupt("return",this.renderedNode);case 30:case"end":return n.stop()}},n,this)}))}}]),n}(t.AbstractNodeCreator);t.Signature=r}(r=t.base||(t.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function r(){_classCallCheck(this,r);var e=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return e.references=[],e}return _inherits(r,t),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.signature=e}},{key:"addReference",value:function(e){return this.references.push(e),e.onAdded(this),e}},{key:"createNode",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i,s,o,a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.rendered&&!t){r.next=19;break}n=this.signedXml.document.createElementNS(e.XMLDSigNS,"SignedInfo"),i=this.signedXml.document.createElementNS(e.XMLDSigNS,"CanonicalizationMethod"),s=this.signedXml.document.createElementNS(e.XMLDSigNS,"SignatureMethod"),i.setAttribute("Algorithm",this.canonicalizationMethod),n.appendChild(i),s.setAttribute("Algorithm",this.signatureMethod),n.appendChild(s),o=0;case 7:if(!(o<this.references.length)){r.next=17;break}return a=this.references[o],r.t0=n,r.next=12,a.createNode(t);case 12:r.t1=r.sent,r.t0.appendChild.call(r.t0,r.t1);case 14:o++,r.next=7;break;case 17:this.renderedNode=n,this.rendered=!0;case 19:return r.abrupt("return",this.renderedNode);case 20:case"end":return r.stop()}},r,this)}))}}]),r}(e.AbstractNodeCreator);e.SignedInfo=t}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t=function(t){function r(e){_classCallCheck(this,r);var t=_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this));return t.algoritm=e,t}return _inherits(r,t),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.reference=e}},{key:"createNode",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return this.rendered&&!t||(n=this.signedXml.document.createElementNS(e.XMLDSigNS,"Transform"),n.setAttribute("Algorithm",this.algoritm),this.renderedNode=n,this.rendered=!0),r.abrupt("return",this.renderedNode);case 2:case"end":return r.stop()}},r,this)}))}}]),r}(e.AbstractNodeCreator);e.Transform=t}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var r=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,Object.getPrototypeOf(t).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(t.prototype),"onAdded",this).call(this,e);
}}]),t}(e.AbstractNodeCreator);t.Content=r}(t=e.keyinfo||(e.keyinfo={}))}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));var __awaiter=function(e,t,r,n){return new(r||(r=Promise))(function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n["throw"](e))}catch(t){s(t)}}function c(e){e.done?i(e.value):new r(function(t){t(e.value)}).then(o,a)}c((n=n.apply(e,t)).next())})},js_xmldsig;!function(e){var t;!function(e){var t;!function(e){var t;!function(t){var r=function(t){function r(){return _classCallCheck(this,r),_possibleConstructorReturn(this,Object.getPrototypeOf(r).call(this))}return _inherits(r,t),_createClass(r,[{key:"onAdded",value:function(e){_get(Object.getPrototypeOf(r.prototype),"onAdded",this).call(this,e),this.keyInfo=e}},{key:"createNode",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return __awaiter(this,void 0,Promise,regeneratorRuntime.mark(function r(){var n,i;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(this.rendered&&!t){r.next=8;break}return n=this.signedXml.document.createElementNS(e.XMLDSigNS,"X509Data"),i=this.signedXml.document.createElementNS(e.XMLDSigNS,"X509Certificate"),r.next=4,this.signedXml.certificate.rawData;case 4:i.textContent=r.sent,n.appendChild(i),this.renderedNode=n,this.rendered=!0;case 8:return r.abrupt("return",this.renderedNode);case 9:case"end":return r.stop()}},r,this)}))}}]),r}(t.Content);t.X509Certificate=r}(t=e.keyinfo||(e.keyinfo={}))}(t=e.base||(e.base={}))}(t=e.signature||(e.signature={}))}(js_xmldsig||(js_xmldsig={}));